---
sidebar_position: 4
title: For 循环多变量更新
tags: [go, syntax, for-loop]
---

# Go For 循环多变量更新语法

在 Go 的 `for` 循环里，如果你想同时更新两个变量（比如同时让 i 加 1，j 也加 1），你不能像 C 语言或 Java 那样写 `i++, j++`，而必须写成 `i, j = i+1, j+1`。

## 1. `++` 和 `--` 是语句而不是表达式

这是 Go 和 C/Java/JavaScript 最大的区别之一。

### 在 C/Java 中（表达式）

`i++` 既是一个动作（i 加 1），也是一个**值**：

```c
// 可以这样写
a = i++;      // 把 i 的值赋给 a，然后 i 加 1
foo(i++);     // 作为函数参数
```

### 在 Go 中（语句）

`i++` 仅仅是一个命令，它**没有返回值**：

```go
// ❌ 这些都是语法错误
a = i++       // 错误！i++ 没有值
foo(i++)      // 错误！i++ 不能作为参数

// ✅ 只能单独一行使用
i++           // 正确
```

## 2. Go 没有逗号操作符

### 在 C/Java 中

有一个"逗号操作符"，允许在本该只能放一个表达式的地方，塞进去多个表达式：

```c
// C 语言 - 逗号操作符让 i++ 和 j++ 都能执行
for (int i = 0, j = 10; i < j; i++, j--) {
    printf("%d %d\n", i, j);
}
```

### 在 Go 中

**没有**这种逗号操作符：

```go
// ❌ 语法错误 - Go 不认识 i++, j-- 中间的逗号
for i, j := 0, 10; i < j; i++, j-- {
    println(i, j)
}
```

## 3. 并行赋值（Parallel Assignment）

既然不能用逗号分隔两个 `++`，Go 提供了**多重赋值**（也叫并行赋值）来解决这个问题：

```go
// 语法
a, b = 1, 2
i, j = i+1, j-1
```

### 完整示例

假设我们要写一个循环，`i` 从 0 变大，`j` 从 10 变小：

```go
package main

import "fmt"

func main() {
    // ✅ 使用并行赋值： i, j = i+1, j-1
    // 这是一个单一的"赋值语句"，符合 Go 语法
    for i, j := 0, 10; i < j; i, j = i+1, j-1 {
        fmt.Println(i, j)
    }
}
```

输出：

```
0 10
1 9
2 8
3 7
4 6
```

## 4. 为什么不能混用并行赋值和 `++`

在并行赋值的等号右边，必须是**表达式（有值的东东）**。因为 `i++` 在 Go 里没有值（不是表达式），所以不能把并行赋值和 `++` 混用：

```go
// ❌ 错误！因为 i++ 没有值，赋不进 i 里去
i, j = i++, j--

// ✅ 正确！i+1 是一个有值的表达式
i, j = i+1, j-1
```

## 5. 常见场景对比

| 场景 | C/Java 写法 | Go 写法 |
|------|-------------|---------|
| 单变量递增 | `for(i=0; i<n; i++)` | `for i := 0; i < n; i++` |
| 双变量同向 | `for(i=0, j=0; ...; i++, j++)` | `for i, j := 0, 0; ...; i, j = i+1, j+1` |
| 双变量反向 | `for(i=0, j=n; i<j; i++, j--)` | `for i, j := 0, n; i < j; i, j = i+1, j-1` |

## 总结

Go 语言在 for 循环中的设计选择：

1. **`++` 和 `--` 是语句**，不是表达式，没有返回值
2. **没有逗号操作符**，不能写 `i++, j++`
3. **使用并行赋值**来同时更新多个变量：`i, j = i+1, j-1`

这种设计虽然看起来比 C/Java 繁琐一点，但更加清晰明确，避免了 `i++` 作为表达式时容易产生的副作用问题。
