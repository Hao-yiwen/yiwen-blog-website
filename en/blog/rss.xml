<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>yiwen Blog</title>
        <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog</link>
        <description>yiwen Blog</description>
        <lastBuildDate>Sat, 06 Dec 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[深入理解 RoPE：从几何直觉到代码实现]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope</guid>
            <pubDate>Sat, 06 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[在 Transformer 的架构演进中，位置编码（Positional Embedding）一直是核心话题。从最初的正弦位置编码（Sinusoidal），到可学习的绝对位置编码，再到如今 LLaMA、Mistral 等主流大模型标配的 RoPE (Rotary Positional Embedding)，我们一直在寻找一种更优雅的方式告诉模型"我是第几个字"。]]></description>
            <content:encoded><![CDATA[<p>在 Transformer 的架构演进中，位置编码（Positional Embedding）一直是核心话题。从最初的正弦位置编码（Sinusoidal），到可学习的绝对位置编码，再到如今 LLaMA、Mistral 等主流大模型标配的 <strong>RoPE (Rotary Positional Embedding)</strong>，我们一直在寻找一种更优雅的方式告诉模型"我是第几个字"。</p>
<p>RoPE 之所以成为主流，是因为它用一种极其巧妙的<strong>几何</strong>手段，解决了"绝对位置"与"相对位置"的统一问题。</p>
<p>本文将带你从最直观的几何原理出发，推导其数学形式，并最终落实到一行行的 PyTorch 代码实现。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-核心直觉为什么是旋转">1. 核心直觉：为什么是"旋转"？<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#1-%E6%A0%B8%E5%BF%83%E7%9B%B4%E8%A7%89%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF%E6%97%8B%E8%BD%AC" class="hash-link" aria-label="Direct link to 1. 核心直觉：为什么是&quot;旋转&quot;？" title="Direct link to 1. 核心直觉：为什么是&quot;旋转&quot;？" translate="no">​</a></h2>
<p>在 RoPE 之前，主流做法通常是 <strong>相加</strong>：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi></mrow></msub><mo>+</mo><msub><mi>P</mi><mrow><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x_{input} + P_{pos}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">os</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></p>
<p>即把位置向量加到词向量上。这就像给每个词贴了个"号码牌"。</p>
<p>而 RoPE 的做法是 <strong>旋转</strong>：
它不再是加法，而是将向量在一个高维空间中进行旋转。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="想象一组时钟">想象一组时钟<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E6%83%B3%E8%B1%A1%E4%B8%80%E7%BB%84%E6%97%B6%E9%92%9F" class="hash-link" aria-label="Direct link to 想象一组时钟" title="Direct link to 想象一组时钟" translate="no">​</a></h3>
<p>假设我们将词向量的每两个维度看作一个二维平面（复平面）。</p>
<ul>
<li><strong>绝对位置是旋转角度：</strong> 第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span></span></span></span> 个 Token，我们就把它在这个平面上逆时针旋转 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>×</mo><mi>θ</mi></mrow><annotation encoding="application/x-tex">m \times \theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span> 度。</li>
<li><strong>相对位置是夹角：</strong>
<ul>
<li>Token <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span></span></span></span> 旋转了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">m\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span>。</li>
<li>Token <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 旋转了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">n\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span>。</li>
<li>它们之间的<strong>相对角度差</strong>就是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo><mi>θ</mi></mrow><annotation encoding="application/x-tex">(m-n)\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span>。</li>
</ul>
</li>
</ul>
<p>当我们在 Attention 机制中计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">Q</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span></span></span></span> 的点积（Dot Product）时，点积的大小取决于向量的长度和<strong>夹角</strong>。</p>
<p><strong>关键点来了：</strong>
由于 RoPE 保证了旋转后的夹角只与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(m-n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 有关，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">Q</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span></span></span></span> 的点积结果，就天然地包含了它们的<strong>相对距离信息</strong>。我们不需要显式地告诉模型"这两个字距离为 5"，模型通过计算点积，发现夹角变了，自然就感知到了距离。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-数学推导从复数到实数">2. 数学推导：从复数到实数<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#2-%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC%E4%BB%8E%E5%A4%8D%E6%95%B0%E5%88%B0%E5%AE%9E%E6%95%B0" class="hash-link" aria-label="Direct link to 2. 数学推导：从复数到实数" title="Direct link to 2. 数学推导：从复数到实数" translate="no">​</a></h2>
<p>为了看清本质，我们先用复数（Complex Numbers）来推导，因为二维旋转在复数域最简单。</p>
<p>假设二维向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span></span></span></span> 表示为复数，位置为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span></span></span></span>，基准频率为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-施加旋转">Step 1: 施加旋转<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#step-1-%E6%96%BD%E5%8A%A0%E6%97%8B%E8%BD%AC" class="hash-link" aria-label="Direct link to Step 1: 施加旋转" title="Direct link to Step 1: 施加旋转" translate="no">​</a></h3>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mi>q</mi><mo>⋅</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>m</mi><mi>θ</mi></mrow></msup></mrow><annotation encoding="application/x-tex">f(q, m) = q \cdot e^{im\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>同理，对于位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 的 key 向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span>：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>k</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>k</mi><mo>⋅</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>n</mi><mi>θ</mi></mrow></msup></mrow><annotation encoding="application/x-tex">f(k, n) = k \cdot e^{in\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span></span></span></span></span></span></span></span></span></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-计算-attention-score-内积">Step 2: 计算 Attention Score (内积)<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#step-2-%E8%AE%A1%E7%AE%97-attention-score-%E5%86%85%E7%A7%AF" class="hash-link" aria-label="Direct link to Step 2: 计算 Attention Score (内积)" title="Direct link to Step 2: 计算 Attention Score (内积)" translate="no">​</a></h3>
<p>Attention 的核心是计算 query 和 key 的相似度。在复数域中，我们计算 Hermite 内积：</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext>Score</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>f</mi><mo stretchy="false">(</mo><mi>k</mi><mo separator="true">,</mo><mi>n</mi><msup><mo stretchy="false">)</mo><mo>∗</mo></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>q</mi><mo>⋅</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>m</mi><mi>θ</mi></mrow></msup><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi>k</mi><mo>⋅</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>n</mi><mi>θ</mi></mrow></msup><msup><mo stretchy="false">)</mo><mo>∗</mo></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>q</mi><mo>⋅</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>m</mi><mi>θ</mi></mrow></msup><mo>⋅</mo><msup><mi>k</mi><mo>∗</mo></msup><mo>⋅</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>i</mi><mi>n</mi><mi>θ</mi></mrow></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>q</mi><mo>⋅</mo><msup><mi>k</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>⋅</mo><msup><mi>e</mi><mrow><mi>i</mi><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo><mi>θ</mi></mrow></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
\text{Score} &amp;= f(q, m) \cdot f(k, n)^* \\
&amp;= (q \cdot e^{im\theta}) \cdot (k \cdot e^{in\theta})^* \\
&amp;= q \cdot e^{im\theta} \cdot k^* \cdot e^{-in\theta} \\
&amp;= (q \cdot k^*) \cdot e^{i(m-n)\theta}
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.2162em;vertical-align:-2.8581em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.3581em"><span style="top:-5.5181em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Score</span></span></span></span><span style="top:-3.959em"><span class="pstrut" style="height:3em"></span><span class="mord"></span></span><span style="top:-2.3999em"><span class="pstrut" style="height:3em"></span><span class="mord"></span></span><span style="top:-0.8019em"><span class="pstrut" style="height:3em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.8581em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.3581em"><span style="top:-5.5181em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span><span style="top:-3.959em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span><span style="top:-2.3999em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span></span></span></span></span></span></span></span><span style="top:-0.8019em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">m</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">)</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.8581em"><span></span></span></span></span></span></span></span></span></span></span></span>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-回到实数域">Step 3: 回到实数域<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#step-3-%E5%9B%9E%E5%88%B0%E5%AE%9E%E6%95%B0%E5%9F%9F" class="hash-link" aria-label="Direct link to Step 3: 回到实数域" title="Direct link to Step 3: 回到实数域" translate="no">​</a></h3>
<p>取实部（对应实数向量的点积），我们发现结果包含：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Result</mtext><mo>∝</mo><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Result} \propto \cos((m-n)\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord text"><span class="mord">Result</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop">cos</span><span class="mopen">((</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span><span class="mclose">)</span></span></span></span></p>
<p><strong>结论：</strong> 最终的计算结果只依赖于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span> 的原始内容，以及它们的相对距离 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(m-n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>。这就是 RoPE 具备**相对位置编码（Relative Positional Encoding）**特性的数学证明。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-矩阵形式与工程优化">3. 矩阵形式与工程优化<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#3-%E7%9F%A9%E9%98%B5%E5%BD%A2%E5%BC%8F%E4%B8%8E%E5%B7%A5%E7%A8%8B%E4%BC%98%E5%8C%96" class="hash-link" aria-label="Direct link to 3. 矩阵形式与工程优化" title="Direct link to 3. 矩阵形式与工程优化" translate="no">​</a></h2>
<p>在实际代码中，我们不能直接用复数。我们需要把二维向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix} x \\ y \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span></span></span></span> 旋转 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span> 角，对应线性代数中的旋转矩阵：</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>cos</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>cos</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} \cos\theta &amp; -\sin\theta \\ \sin\theta &amp; \cos\theta \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span></span></span></span></span>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="极其巧妙的变形">极其巧妙的变形<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E6%9E%81%E5%85%B6%E5%B7%A7%E5%A6%99%E7%9A%84%E5%8F%98%E5%BD%A2" class="hash-link" aria-label="Direct link to 极其巧妙的变形" title="Direct link to 极其巧妙的变形" translate="no">​</a></h3>
<p>为了在 GPU 上高效计算，我们避免写原本的矩阵乘法，而是利用以下数学恒等式：</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mi>cos</mi><mo>⁡</mo><mi>θ</mi><mo>+</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow><annotation encoding="application/x-tex">\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} x \\ y \end{bmatrix} \cos\theta + \begin{bmatrix} -y \\ x \end{bmatrix} \sin\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span></span></span></span></span>
<p>仔细观察第二项：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix} -y \\ x \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span></span></span></span> 实际上就是将原向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix} x \\ y \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">]</span></span></span></span></span></span> 旋转了 90 度（并取反）。</p>
<p>这意味着：<strong>RoPE 可以通过两次向量的 element-wise 乘法和一次加法来实现，无需构建巨大的旋转矩阵。</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-pytorch-代码全解">4. PyTorch 代码全解<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#4-pytorch-%E4%BB%A3%E7%A0%81%E5%85%A8%E8%A7%A3" class="hash-link" aria-label="Direct link to 4. PyTorch 代码全解" title="Direct link to 4. PyTorch 代码全解" translate="no">​</a></h2>
<p>下面是 LLaMA 等模型中通用的 RoPE 实现。我们将逐行拆解。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-定义-rope-模块">4.1 定义 RoPE 模块<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#41-%E5%AE%9A%E4%B9%89-rope-%E6%A8%A1%E5%9D%97" class="hash-link" aria-label="Direct link to 4.1 定义 RoPE 模块" title="Direct link to 4.1 定义 RoPE 模块" translate="no">​</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nn </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> nn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">RotaryPositionalEmbedding</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Module</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dim</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_seq_len</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> base</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># dim: 这里必须是 head_size (即 model_dim / num_heads)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 因为旋转是在每个 Head 内部独立进行的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 1. 计算不同维度的频率 θ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 公式: theta_i = base^(-2i/d)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 频率跨度从 1 到 1/10000，高频捕捉短距离，低频捕捉长距离</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        inv_freq </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dim</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> dim</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register_buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'inv_freq'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> inv_freq</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 2. 预计算所有位置的 cos 和 sin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 这是一个缓存表，避免每次 forward 都重算</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_seq_len</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 外积操作: [seq_len] x [dim/2] -&gt; [seq_len, dim/2]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        freqs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">einsum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'i,j-&gt;ij'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> inv_freq</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 3. 拼接: 为了配合代码实现，将 [cos, sin] 扩展到完整维度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 这里的 emb 形状变为 [seq_len, dim]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 注意：这里 cat 了两次，是为了让 dim 0 和 dim dim/2 共享同一个频率</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">freqs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> freqs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dim</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register_buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'cos_cached'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> emb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register_buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'sin_cached'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> emb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> seq_len</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># x: [batch, seq_len, num_heads, head_dim]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> seq_len </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cos_cached</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># 如果推理长度超过缓存，需要重新计算或报错</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cos_cached</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">seq_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sin_cached</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">seq_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-应用旋转-核心逻辑">4.2 应用旋转 (核心逻辑)<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#42-%E5%BA%94%E7%94%A8%E6%97%8B%E8%BD%AC-%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91" class="hash-link" aria-label="Direct link to 4.2 应用旋转 (核心逻辑)" title="Direct link to 4.2 应用旋转 (核心逻辑)" translate="no">​</a></h3>
<p>这里就是上文提到的"巧妙变形"的代码实现。</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rotate_half</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    将向量 x 切分成两半 (x1, x2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    然后重组为 (-x2, x1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    对应数学公式中的 [-y, x] 部分</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">//</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">//</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">x2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dim</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apply_rotary_pos_emb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">q</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    q, k: [batch, seq_len, num_heads, head_dim]</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    cos, sin: [seq_len, head_dim] (广播到 batch 和 heads)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 核心公式: Result = x * cos + rotate_90(x) * sin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    q_embed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">q </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rotate_half</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">q</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> sin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k_embed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rotate_half</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> sin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> q_embed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_embed</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-灵魂追问位置信息到底是怎么生效的">5. 灵魂追问：位置信息到底是怎么生效的？<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#5-%E7%81%B5%E9%AD%82%E8%BF%BD%E9%97%AE%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E5%88%B0%E5%BA%95%E6%98%AF%E6%80%8E%E4%B9%88%E7%94%9F%E6%95%88%E7%9A%84" class="hash-link" aria-label="Direct link to 5. 灵魂追问：位置信息到底是怎么生效的？" title="Direct link to 5. 灵魂追问：位置信息到底是怎么生效的？" translate="no">​</a></h2>
<p>很多同学看懂了代码，但依然有一个疑问：</p>
<blockquote>
<p><strong>"我们只是分别旋转了 Q 和 K，并没有算它们之间的距离，为什么模型就知道 1 和 1000 的关系了？"</strong></p>
</blockquote>
<p>答案就在 <strong>Attention 的计算公式</strong>里：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 当这行代码执行时，奇迹发生了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matmul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">q_embed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_embed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transpose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<ol>
<li><strong>自动注入：</strong> <code>q_embed</code> 携带了绝对位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span></span></span></span> 的旋转，<code>k_embed</code> 携带了绝对位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 的旋转。</li>
<li><strong>数学魔法：</strong> 当它们做矩阵乘法（点积）时，根据积化和差公式，两者的绝对位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 抵消，留下了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\cos((m-n)\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop">cos</span><span class="mopen">((</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.02778em">θ</span><span class="mclose">)</span></span></span></span>。</li>
<li><strong>结果：</strong> <code>scores</code> 矩阵中的数值大小，直接受到了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>−</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">m-n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> (相对距离) 的控制。<!-- -->
<ul>
<li>如果距离很近，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mop">cos</span></span></span></span> 值大，Score 趋向保留原始语义相似度。</li>
<li>如果距离很远，不同频率维度的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mop">cos</span></span></span></span> 值开始震荡抵消，Score 会受到衰减。</li>
</ul>
</li>
</ol>
<p>这就好比 Q 和 K 都在转动自己的表盘，只有当它们两个对齐（做点积）的那一瞬间，表盘指针的夹角（相对距离）才显现出来，并直接决定了 Attention 分数的高低。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-深入理解相干叠加与位置衰减">6. 深入理解：相干叠加与位置衰减<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#6-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E7%9B%B8%E5%B9%B2%E5%8F%A0%E5%8A%A0%E4%B8%8E%E4%BD%8D%E7%BD%AE%E8%A1%B0%E5%87%8F" class="hash-link" aria-label="Direct link to 6. 深入理解：相干叠加与位置衰减" title="Direct link to 6. 深入理解：相干叠加与位置衰减" translate="no">​</a></h2>
<p>这里有一个非常关键的误解需要澄清。当我们说"距离为 0 时完全匹配"，实际的求和结果<strong>不是 1，而是 64</strong>（维度对数）。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="相干叠加coherent-superposition">相干叠加（Coherent Superposition）<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E7%9B%B8%E5%B9%B2%E5%8F%A0%E5%8A%A0coherent-superposition" class="hash-link" aria-label="Direct link to 相干叠加（Coherent Superposition）" title="Direct link to 相干叠加（Coherent Superposition）" translate="no">​</a></h3>
<p>完整的公式是：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></msubsup><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo><mo>⋅</mo><msub><mi>θ</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S = \sum_{j=0}^{63} \cos((m-n) \cdot \theta_j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.3898em;vertical-align:-0.4358em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">63</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">cos</span><span class="mopen">((</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<p>假设 head_dim 是 128，那么就有 <strong>64 对</strong> 这样的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mop">cos</span></span></span></span> 值相加。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="情况-a距离为-0自己看自己mn">情况 A：距离为 0（自己看自己，m=n）<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E6%83%85%E5%86%B5-a%E8%B7%9D%E7%A6%BB%E4%B8%BA-0%E8%87%AA%E5%B7%B1%E7%9C%8B%E8%87%AA%E5%B7%B1mn" class="hash-link" aria-label="Direct link to 情况 A：距离为 0（自己看自己，m=n）" title="Direct link to 情况 A：距离为 0（自己看自己，m=n）" translate="no">​</a></h4>
<ul>
<li>距离 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">d = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></li>
<li>对于所有的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span></span></span></span>，角度都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>⋅</mo><msub><mi>θ</mi><mi>j</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0 \cdot \theta_j = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\cos(0) = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></li>
<li><strong>求和结果：</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>1</mn><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 + 1 + ... + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span>（共 64 个）<strong>= 64</strong></li>
<li><strong>含义：</strong> 这是最强的信号，表示"完全匹配"</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="情况-b距离很近比如-m-n--1">情况 B：距离很近（比如 m-n = 1）<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E6%83%85%E5%86%B5-b%E8%B7%9D%E7%A6%BB%E5%BE%88%E8%BF%91%E6%AF%94%E5%A6%82-m-n--1" class="hash-link" aria-label="Direct link to 情况 B：距离很近（比如 m-n = 1）" title="Direct link to 情况 B：距离很近（比如 m-n = 1）" translate="no">​</a></h4>
<ul>
<li><strong>低频对（转得慢）：</strong> 角度只转了一点点，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo><mo>≈</mo><mn>0.999</mn></mrow><annotation encoding="application/x-tex">\cos \approx 0.999</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.999</span></span></span></span></li>
<li><strong>高频对（转得快）：</strong> 角度转得稍微多点，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo><mo>≈</mo><mn>0.9</mn></mrow><annotation encoding="application/x-tex">\cos \approx 0.9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.9</span></span></span></span></li>
<li><strong>求和结果：</strong> 大约 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>64</mn><mo>×</mo><mn>0.95</mn><mo>≈</mo></mrow><annotation encoding="application/x-tex">64 \times 0.95 \approx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">64</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.95</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≈</span></span></span></span> <strong>60</strong> 左右</li>
<li><strong>含义：</strong> 信号依然很强，只是比"自己看自己"稍弱一点</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="情况-c距离很远比如-m-n--1000">情况 C：距离很远（比如 m-n = 1000）<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E6%83%85%E5%86%B5-c%E8%B7%9D%E7%A6%BB%E5%BE%88%E8%BF%9C%E6%AF%94%E5%A6%82-m-n--1000" class="hash-link" aria-label="Direct link to 情况 C：距离很远（比如 m-n = 1000）" title="Direct link to 情况 C：距离很远（比如 m-n = 1000）" translate="no">​</a></h4>
<ul>
<li><strong>乱套了：</strong>
<ul>
<li>有的维度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mop">cos</span></span></span></span> 是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.8</mn></mrow><annotation encoding="application/x-tex">0.8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.8</span></span></span></span></li>
<li>有的维度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mop">cos</span></span></span></span> 是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>0.9</mn></mrow><annotation encoding="application/x-tex">-0.9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">0.9</span></span></span></span></li>
<li>有的维度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mop">cos</span></span></span></span> 是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.1</mn></mrow><annotation encoding="application/x-tex">0.1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.1</span></span></span></span></li>
</ul>
</li>
<li><strong>求和结果：</strong> 正负相互抵消（Destructive Interference）</li>
<li><strong>最终结果：</strong> 可能只有 <strong>2</strong> 或者 <strong>-3</strong>，甚至接近 <strong>0</strong></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数值示例">数值示例<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E6%95%B0%E5%80%BC%E7%A4%BA%E4%BE%8B" class="hash-link" aria-label="Direct link to 数值示例" title="Direct link to 数值示例" translate="no">​</a></h3>
<p>假设 dim=128（64对），base=10000。位置部分的求和结果大致如下：</p>
<table><thead><tr><th>距离</th><th>求和值</th><th>归一化后</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>64</td><td>1.0</td><td>完全匹配，所有 cos 都是 1</td></tr><tr><td>10</td><td>~51</td><td>~0.8</td><td>高频维度开始错位，但低频依然对齐</td></tr><tr><td>100</td><td>~19</td><td>~0.3</td><td>大部分维度已经乱了，只有极低频在贡献</td></tr><tr><td>1000</td><td>~3</td><td>~0.05</td><td>接近噪音水平，几乎无相关性</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="这对-attention-意味着什么">这对 Attention 意味着什么？<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E8%BF%99%E5%AF%B9-attention-%E6%84%8F%E5%91%B3%E7%9D%80%E4%BB%80%E4%B9%88" class="hash-link" aria-label="Direct link to 这对 Attention 意味着什么？" title="Direct link to 这对 Attention 意味着什么？" translate="no">​</a></h3>
<p>把这个数值放回 Attention 的公式里：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Attention</mtext><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>Softmax</mtext><mrow><mo fence="true">(</mo><mfrac><mtext>Score</mtext><msqrt><mi>d</mi></msqrt></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Attention}(Q, K) = \text{Softmax}\left(\frac{\text{Score}}{\sqrt{d}}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">Attention</span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.8em;vertical-align:-0.65em"></span><span class="mord text"><span class="mord">Softmax</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em"><span style="top:-2.5335em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9378em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mtight" style="padding-left:0.833em"><span class="mord mathnormal mtight">d</span></span></span><span style="top:-2.8978em"><span class="pstrut" style="height:3em"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1022em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Score</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size2">)</span></span></span></span></span></span></p>
<ul>
<li>当模型在看<strong>邻居</strong>时，Score 贡献是 <strong>~60</strong></li>
<li>当模型在看<strong>远方</strong>时，Score 贡献是 <strong>~0</strong></li>
</ul>
<p>经过 <strong>Softmax</strong>（它是指数放大的）之后：</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mn>60</mn><mi mathvariant="normal">/</mi><msqrt><mi>d</mi></msqrt></mrow></msup></mrow><annotation encoding="application/x-tex">e^{60/\sqrt{d}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0195em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0195em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">60/</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9378em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mtight" style="padding-left:0.833em"><span class="mord mathnormal mtight">d</span></span></span><span style="top:-2.8978em"><span class="pstrut" style="height:3em"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1022em"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 是一个很大的数字</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">e^{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span> 是 1</li>
</ul>
<p><strong>结论：</strong> 正是因为这个和<strong>不是恒定的 1</strong>，而是从 64 跌落到 0，才使得 Attention 机制能够"聚焦"。如果不管距离多远和都是 1，那 RoPE 就失效了，模型就变成了"近视眼"，分不清远近。</p>
<p>这个求和结果是一个<strong>反映"位置相似度"的打分</strong>：</p>
<ul>
<li><strong>最高分 = 维度对数（64）</strong> → 距离为 0</li>
<li><strong>随着距离增加，分数下降</strong></li>
<li><strong>这就是 RoPE 实现"远程衰减"的物理本质</strong></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rope#%E6%80%BB%E7%BB%93" class="hash-link" aria-label="Direct link to 总结" title="Direct link to 总结" translate="no">​</a></h2>
<p>RoPE 是现代 LLM 的基石之一。它不做加法，而是做旋转；它不存相对位置表，而是通过绝对位置的旋转差值自然导出相对位置。</p>
<ul>
<li><strong>优点 1：</strong> 理论上可以处理任意长度的序列（外推性好）。</li>
<li><strong>优点 2：</strong> 计算高效，完美契合 GPU 架构。</li>
<li><strong>优点 3：</strong> 显式地将相对距离衰减引入了 Attention 机制（远程衰减）。</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[黄昏]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/nightfall</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/nightfall</guid>
            <pubDate>Sat, 08 Nov 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[时光一直往前走，而我也在往前，可是越往前走，好像越不知道往哪走，往东，还是往西那，在恍惚之间，在昏黄的灯光和酒水的微醺下，我好像回到了从前，我好想回到了，我始终没有离开过的故乡。]]></description>
            <content:encoded><![CDATA[<p>时光一直往前走，而我也在往前，可是越往前走，好像越不知道往哪走，往东，还是往西那，在恍惚之间，在昏黄的灯光和酒水的微醺下，我好像回到了从前，我好想回到了，我始终没有离开过的故乡。</p>
<p>故乡在我这里从来不是一个好的回忆，但是我却深爱着那片土地，在某一个不经意的瞬间，貌似，我好想就矗立在田埂上， 在清晨的田埂上，一晃15年过去了，所以我经常问，宜文，为啥来这里那，为了换个活法，活的精彩。</p>
<p>我曾在故乡的田埂背后无数次的幻想过未来，我也曾在家乡的桥头无数次表达对未来的期望，而今看来，确实离开了那里，来到了一个更大的舞台。可是，这里的舞台，貌似灯光忽明忽暗，在恍惚间，我总是感到错愕，好像有些不同于想象。</p>
<p>在匆忙间，我时常没有力气和心力去回首来时的路，来时满是泥泞的道路，可在今晚，在一些因素的催化下，我好想看到了，看到了我的过去，我那时是那么年轻，那么一无所有，那么没有安全感，但是那么意气风发，可是一切在14岁后都变了，我好像没怎么抬头看过星星，有时候想起来，晚上在家门口一起看星星的时光，貌似一切没有发生过一样。</p>
<p>好像，在不经意间，我变得轻盈了，我好像不在乎了，我好像不害怕了，我好像解脱了，我好像要拥有自己的人生了。</p>
<p>所以如果一切按照预想，宜文，你会怎么过那，总是眺望远方，又或者轻盈的活着，至于哪些琐碎的事情，可能很多都无所谓了，在晴天的傍晚，去河堤上去看看池塘的鱼，貌似，一切也不差。</p>
<p>我从来不曾了解过我的家乡，就像我的想象和记忆，总是那么偏执，而现在每次遇到他，好像他那么轻盈，从来没有见过一般。</p>
<p>13年过去 我什么也没有改变 现在青春只剩尾巴 一切会好起来吗？一切会好起来的</p>
<p>过的轻快，随性，洒脱。欢迎回来。</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2025 blog]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog</guid>
            <pubDate>Fri, 03 Jan 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[20250103]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250103">20250103<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250103" class="hash-link" aria-label="Direct link to 20250103" title="Direct link to 20250103" translate="no">​</a></h2>
<p>2025年第一个感想，在开发app的时候最好不要使用React Native开发，这个东西性能有时候会查到让你惊讶。而且因为单线程的设计，导致你在有些时候都没有办法优化。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250117">20250117<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250117" class="hash-link" aria-label="Direct link to 20250117" title="Direct link to 20250117" translate="no">​</a></h2>
<p>因为之前学习进度过慢的情况，再经过很多痛苦的琢磨后有一点进展，不知道是否有效，心里很忐忑，静态结果。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250120">20250120<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250120" class="hash-link" aria-label="Direct link to 20250120" title="Direct link to 20250120" translate="no">​</a></h2>
<p>心里一直想搞清楚大模型的基本原理是什么，大模型到底是怎么一回事，一致想搞懂，但是从机器学习到深度学习路程太遥远，现在我大概知道原理是什么了。这是值得开心的一天。</p>
<p><a href="https://hao-yiwen.github.io/yiwen-blog-website/docs/ai/transformer" target="_blank" rel="noopener noreferrer">文档链接</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250205">20250205<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250205" class="hash-link" aria-label="Direct link to 20250205" title="Direct link to 20250205" translate="no">​</a></h2>
<p>时间在不留意之间从指尖划过，今天又到了离开的时候，又需要去外出打工了。</p>
<p>经过半个月的休整，这半个月发生了很多事情，事情繁杂而又遗憾，我没有去小董家，原本的约定也止步于口头，爱情终究要溜走了，我也要溜走了。</p>
<p>事情并没有按照预期发展，内心是挣扎的，但是问题也暴露了。我也不知道如何解决这些问题，我选择了离开。</p>
<p>今年过年最火爆的公司就是deepseek，他用一种低成本的方式实现了cot逻辑，从而有着巨大的象征意义，因为这标志着国内的ai从大而不强转向了新的阶段。</p>
<p>我很想参与这个过程中，虽然我是前端出生，但是我想不断的扩展我的知识体系，因为从热爱的角度来说，我不属于前端。</p>
<p>种种迹象表明2025年是ai的时代，这个时代风起云涌，一切新的力量将会出现，而最简单的事物本身属于应用升级和新应用的产生，我在上海，时刻关注相关事情的发生，我一直在想这是否是我们这一代人的最好的机会，因为产业变革必将带来若干机会，如果抓不住这个机会，那么艰苦的奋斗是没有意义的。</p>
<p>这一年我想去各处看看，因为我已变得千疮百孔，我想出去走走，看看世界的模样，但是年初最重要的事情是切换赛道，如果可以直接切换到ai相关是最好的，但是如果不可以的话，我理解移动端可能机会更多一些。</p>
<p>我也不知道分开我是否回难过，因为人会在过的不好的时候怀念以前，我希望我们都好，我们都朝着正确的方向迈进。既然选择了离开，那么我想我也不会这么碌碌无为的一年又一年，因为我确实放弃了很多东西。</p>
<p>每个时代有每个人的机会，当新的时代的机会没有出现在眼前的时候，我们可以在现有体系中苟延残喘，但是当新的体系已经出现的时候，我想我们应该付出巨大的力量进入新的体系，因为现有的体系已经足够稳定，而稳定真正的含义是没有新的机会了，但是新的体系无处不涌现着机会，跟随绝对的力量对现有的体系进行颠覆，从而产生利益。</p>
<ul>
<li>deepseek</li>
<li>ai导游</li>
</ul>
<p>这就是上半年的主要工作了，希望能获得机会进入更好的舞台。</p>
<p>技术是为了挣钱，如果技术无法变现，那么再牛的技术也毫无意义。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250223">20250223<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250223" class="hash-link" aria-label="Direct link to 20250223" title="Direct link to 20250223" translate="no">​</a></h2>
<p>年前想着年后要一心一意搞ai，但是在年前对大模型有了一些了解后，发现大模型需要大量的算力，而普通人很难获得这些算力，所以满满的有些懈怠了。也没有啥动力，然后很多事情推进不太顺利。</p>
<p>年后最先干的事情是日历组件的推动适配，这件事情进展还行，最终也是有业务成功接入了。</p>
<p>还有很重要的一件事情是ai答疑助手开发，因为涉及到前后端开发，并且设计到es/nodejs/soa/qmq以及公司发布体系/模型申请，还是有些复杂的，然后直到这周才搭完架子，然后很多方面的优化后续才会进行。</p>
<p>目前看来进展是有的，但是还是有些艰难的，但是最直观的感觉是事情的进展远没有24年迅速了。希望25年情况能好转些，进展能迅速些。</p>
<p>ai最终的应用落地场景极其广泛，但是感觉最直观的领域还是教育。所以ai教育大有可为，这也是25年我的主旋律吧。</p>
<p>ai学习还是要继续深入，就像去年说的，长期坚持投入，到某一个点就好了，如果没有坚持投入，那么后续应该也没有什么大的成就。ai领域的投入是必然的，要对ai模型进行了解，这样才能在新时代有所建树。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250308">20250308<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250308" class="hash-link" aria-label="Direct link to 20250308" title="Direct link to 20250308" translate="no">​</a></h2>
<p>病疼总是缠绕身旁，无法评判生活的走向，只是希望未来的生活中，少有些病痛。愿天下父母，平安度春秋。我的一件心事了了，我时常想起和怀念那些年少的夜晚，是您的面容陪我走过，而如今，我无能无为，只是希望少有些疼痛。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250313">20250313<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250313" class="hash-link" aria-label="Direct link to 20250313" title="Direct link to 20250313" translate="no">​</a></h2>
<p>今天身体很不舒服，心脏感觉不跳了。然后晚上部署服务，妈的因为国内网络问题，docker容器内死活安装不了依赖，真是气死我了。docker镜像的打包和部署必须彻底分开，不然妈的动不动就的解决打包问题。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250315">20250315<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250315" class="hash-link" aria-label="Direct link to 20250315" title="Direct link to 20250315" translate="no">​</a></h2>
<p>很担心应用的高并发情况，一直觉得不可能高并发，但是实际测试发现在15个并发的情况下，实际上cpu只有10%，内存也只有30%左右，但是局限最大的是带宽，nodejs应用性能还是好啊。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250323">20250323<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250323" class="hash-link" aria-label="Direct link to 20250323" title="Direct link to 20250323" translate="no">​</a></h2>
<p>今天听到一首歌，感觉很符合我俩，但是人生总是不完美了，唉。。。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250326">20250326<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250326" class="hash-link" aria-label="Direct link to 20250326" title="Direct link to 20250326" translate="no">​</a></h2>
<p>痛，太痛了，真的差点痛死我了。以后可不能乱搞了～～</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250328">20250328<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250328" class="hash-link" aria-label="Direct link to 20250328" title="Direct link to 20250328" translate="no">​</a></h2>
<p>今天我明白了另一个点，以前我觉得模型质量可靠的时候是完全可以无监督的，但是后续发现这种逻辑是完全错误的，因为这会导致后续问题的迭代和模型本身是一定认为你是对的，是对你能力的一种增强，但是如果你错了，那么无监督模式将会导致巨大的坑点。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250430">20250430<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250430" class="hash-link" aria-label="Direct link to 20250430" title="Direct link to 20250430" translate="no">​</a></h2>
<p>在任何时候，任何情况下，个人项目的推荐必须保证最高优先级，拿多少钱办多少事情，没有说拿这白菜价操这巨大的心，天底下从来没有这样的事情，我没有任何义务去普及和提高别人的知识水平。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250506">20250506<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250506" class="hash-link" aria-label="Direct link to 20250506" title="Direct link to 20250506" translate="no">​</a></h2>
<p>忽然梦中惊起，一回头，往事历历在目。如果不出意外，可能我们会有不一样的未来，但是生活就是意外重重的，愿我们都好。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250511">20250511<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250511" class="hash-link" aria-label="Direct link to 20250511" title="Direct link to 20250511" translate="no">​</a></h2>
<p>25年注定是艰难的一年，因为两年前的心境在此时完全不受用了，而现在正是最艰难的时候，是去还是留往往在一念之间。长时间的艰苦努力，如果没有匹配的收益，那么奋斗其实毫无意义，真的毫无意义。</p>
<p>Even，你该出现了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250516">20250516<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250516" class="hash-link" aria-label="Direct link to 20250516" title="Direct link to 20250516" translate="no">​</a></h2>
<p>今天实在不想继续做项目了，于是捣鼓一些自己喜欢的东西，时间过的很快，之前一直想搞yolo的目标检测算法，今天总算差不多了，yolo确实可以的，感觉再搞搞后续直接诶导出模型给应用使用也可以。真实一个宝藏模型</p>
<p>还有remote ssh真的是个宝藏东西，之前搞来搞去的真麻烦，现在一下子给加速了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250519">20250519<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250519" class="hash-link" aria-label="Direct link to 20250519" title="Direct link to 20250519" translate="no">​</a></h2>
<p>cloudflare tunnel确实是一个很好的方案，在稳定性方面要比ngrok好一些。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250722">20250722<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250722" class="hash-link" aria-label="Direct link to 20250722" title="Direct link to 20250722" translate="no">​</a></h2>
<p>时间走的很快，往回看，一切都变了。</p>
<p>当时有两条路，我选择了这一条，但是我现在时常望向另一条路，因为我觉得这条路走到这里真的太难了，往前一步，步步受阻。</p>
<p>人总是幻想于没有选择的那一条路，我在想，我选择了另一条路，会像我期望的一样好吗，我想还是不会的，因为心根本沉稳不下来，因为那是一条更为艰巨的道路，其投入和产出的比例更是巨大的。</p>
<p>我会时常望向那块，但是现在，最重要的是做好当下事。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250724">20250724<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250724" class="hash-link" aria-label="Direct link to 20250724" title="Direct link to 20250724" translate="no">​</a></h2>
<p>今天晚上，想多了解一些大模型训练，然后不知道从什么地方开始入手，开始问ai，然后经过2个小时的提问，我获得了一个惊人的信息，1.8万亿参数的模型训练数据按照20倍计算，也就是36tb，甚至不到100tb。这个东西说明啥问题那，人类目前的知识高度压缩后，有效的知识量级是100tb这个级别。看起来浩瀚无垠的人类文明，100tb把精华都搞得明明白白。。。。。</p>
<p>另一个可怕的事情是，100tb，也就是50个2tb的机械硬盘的数据，就能训练出聪明无比，写代码比人类强大，感觉是万能的llm。。。这是可怕的一个夜晚，赶紧睡觉。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250803">20250803<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250803" class="hash-link" aria-label="Direct link to 20250803" title="Direct link to 20250803" translate="no">​</a></h2>
<p>2025年已经过去了一半，本该一个月前就写个博客进行半年度总结，但是现在才开始记录，有些慢了，但是也反应最近一个月的心态，浮躁，躁动不安。</p>
<p>上半年整体是成功的，总共开发了2个app，4个小程序，其中拾光app比较复杂，已经不是简单的app了，但是也正常上线了。而小程序给了我一些非常棒的反馈，首先就是作业批改王，我严重低估了教育类应用的流量能力，可以简单来说，只要你开发就会有人用，只是说频率不同而已。</p>
<p>其实这个本质背后有深层次的意义，就是ai的最好的落地场景就是教育，大模型对教育天然有巨大的冲击，但是因为各种限制，ai在国内教育中并没有大规模应用，所以国内教育app现在也还是拍照搜题之类的，但是本就不该这样了。</p>
<p>说到这里，就不得不提起学小帮了，本来一个月一个app，本质上7月底学小帮是要发布的，但是因为这个应用是目前开发过最复杂的应用，并且其中有各类的青少年保护法，从而其开发一直有各种困扰，甚至换句话说，其能否上线也是个未知数，因为政策要求，太复杂了，但是即使复杂，也要继续推动和上线。</p>
<p>下半年，最重要的任务就是射出两支箭，一支是教育，一支是社交，不怕做的差，只怕没有开始，从我的视角看来，我认为应用侧天然的场景就是教育和社交，只要想要做大，那么就得做这两个领域，尤其是社交，互联网的灵魂，没有社交，那么就没有社交粘性，只需要提供一个平台，适当的引导，就能获得成功，而且上限无限高，这个是令人惊艳的。</p>
<p>好像说说其他事情，但是貌似上半年发生的事情太多了，从而也不知道怎么说，不知道说什么好，让一切先暂停吧，先搞事业吧，我用一场个人旅行作为上半年故事的收尾，我迫切需要更改自身的状态，因为我对一切都提不起兴趣了，我感觉每一天没有任何不同，我需要去看看不同的风景，我要去坐坐船，去爬爬山，去感受大自然。黄山真是个好地方，空气新鲜，该看到的都看到了，一切是那么美好。</p>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/huangshan1-bddeffd86ad000eccadfb4963cd7c976.jpg" width="500">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/huangshan2-ef63d29b1bf6a8eff1b557939d5a0240.jpg" width="500">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/huangshan3-74f630bec74c169d2b89d1e7e42eb627.jpg" width="500">
<p>还有一个问题必须要讲，也就是上半年对ai核心原理的掌握程度不够，换句话说从去年年底开始，这块就停滞了，因为前途漫长，我看不到。没有计算资源，没有任何想要的东西。但是截止现在，所有的一切都进行到了非常深层次和复杂的事情，已经不是说重写一个app或者网页了，而在这种情景下，如果app层面进行实在不顺利，或许主要力量还是要集中在这里，因为这是最有前景的项目，因为我们这一代要做到的一件事情就是让ai远超人类，只有这样，我们才能实现理想社会，而这是旗帜，也是人生的意义。</p>
<p>还有一个事情，就是现阶段最重要的事情已经转向了，也就是上述逻辑的推动拥有最高优先级，任何事情不能将其阻碍，适当的推进其余事情，不要份不清主次。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20250913">20250913<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20250913" class="hash-link" aria-label="Direct link to 20250913" title="Direct link to 20250913" translate="no">​</a></h2>
<p>最近有巨大的转向了，因为android侧app根本上不了线，所以实际上所谓的黄金时代的创业，在现在来说就是扯淡，也就是说还想像10年前一样做一些有价值和意义的事情，所遭受的阻力可能是前所未有的，也就是说这片土地已经不再欢迎创业者了，这里不再是创业者的乐土。</p>
<p>因为这个情况，所以我这块极速转向ai，转向我心心念念的方向，我希望在这里稍微做一些有意义的事情，一些有价值的事情。</p>
<p>除此之外，我想聊一个很amazing的事情，我理解互联网作为中国最先进的行业，我理解其中应该是包容的，是讲道理的，但是为什么我感觉这个地方是那么的不讲道理那，为什么这里不能讲话那，为什么领导说的是错误的，但是我们还是要继续做那，还有就是有些不该做的事情，为什么我们还要做那，看起来好像为一个产品好，实际上像个弱智一样根本不懂核心，对一个花里胡哨的东西非常感兴趣，要这样做，那样做，我真的他妈佛了，唉。说到这里，和今天罗荣浩打假西贝一样，西贝老板感觉被下属惯坏了，觉得自己说啥都是对的，但是社会上可没有人是你下属啊，不过也心疼西贝员工，一看就是陪着这个沙雕搞这个搞那个，也是真的难受，但是吧，可能还真没办法，真是一个可悲的时代啊，下一个三十年，我们一起让这种可悲的事情少一些，好吗！让真实多一些，可以说真话，不说假话，我真是羡慕硅谷啊，为什么哪里可以有如此的活力，哪里为什么貌似没人任何限制，最起码，我今天遇到的一切不会存在了，唉，真实一种悲哀啊！</p>
<p>下一个一年，在沉寂和思考中进行，用实际行动来奔向ai时代，一个伟大的，将要改变一些的事物，我寄希望于此，因为他不会说谎，他能够替人坚守有些底线，人类才脆弱了，很多时候不知道为什么就跪下了，答应我，下一个三十年，别跪下，好吗！！</p>
<p>没有人不会提出馊主意，但是不应该自作聪明，然后不听从别人的意见，你知道的，很多时候，在认知不够的情况下，根本不知道在干什么，而这种情况很容易导致一些糟糕的，没有意义的事情，但是在讨论的时候需要大家广泛发表意见，要听别人讲什么，而不是啥也不听，我就这样搞，这样不行的，这样要完蛋的。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20251025">20251025<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20251025" class="hash-link" aria-label="Direct link to 20251025" title="Direct link to 20251025" translate="no">​</a></h2>
<p>世间万物什么事情伤你最深，是你在乎的事情，就像和一个人喝一杯茶，喝一杯酒，如果你的心思全部在茶和酒中，那么这个茶或许是好喝的，但是如果你的心思在身旁的人身上，那么你就会被情绪左右。世间万物那么多，但是你这一生能影响的和你真正在乎的又有多少，所以平常心，其实，你越在乎，你的行为会越发变形。
我想今天，其实已经没啥在乎的了吧，该专心为那些自己觉得尚有一线生机机会全力以赴了，至于其他，该过去的就过去吧，我从山谷走来，一旁始终随行的蝴蝶飞走了，我自由了，我无所畏惧了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20251123">20251123<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2025_blog#20251123" class="hash-link" aria-label="Direct link to 20251123" title="Direct link to 20251123" translate="no">​</a></h2>
<p>国内互联网和硅谷最大的区别，并不是技术层面的区别，至少我认为技术层面差距并不是非常大的。最大的差距是政策差距，例如在国内你想做些什么复杂的事情，你需要解决资质问题，而这套资质说白了是负责的，所以最好的方式是找个天龙人来一起解决这个问题，如果解决不了这个问题，那么就是扯淡，这是一切的基础，因为这套资质，本质上劝退了95%的人，所以国内不是没有创新，而是没有机会。</p>
<p>所以国内互联网实际上最大的壁垒并不是技术，当然技术很重要，但是借力于开源，实际上或多或少还是能够得到解决的，但是最大的壁垒，实际上是那套资质，这套资质，本质来说，一般无法解决，对于普通人来说是无法解决的，但是对于稍有背景的人来说，可能还是能够得到解决的，所以，投个好胎，比什么都重要。</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2024年度总结]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_overview</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_overview</guid>
            <pubDate>Tue, 31 Dec 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[2024年虽然平凡，但却是从零到一的关键阶段。这个过程必不可少，尽管有些单调，但在单调中蕴含着向上的力量。]]></description>
            <content:encoded><![CDATA[<p>2024年虽然平凡，但却是从零到一的关键阶段。这个过程必不可少，尽管有些单调，但在单调中蕴含着向上的力量。</p>
<p>2024年初，我继续完善2023年未完成的工作，目标是成为一名真正的全栈开发者。从2023年7月开始，我探索了Spring Cloud家族，但在JavaScript、移动端开发和跨平台开发方面仍存在很大不足。我不清楚React Native和Flutter的本质区别，以及这些区别对原生开发的影响。由于对这些技术的了解不够深入，我一直处于探索和混乱的阶段，尽管各个环节看似紧密相连，但在实际操作中却显得零散，难以形成完整的体系。</p>
<p>年初，我开始学习Android开发，从Compose入手，观看了Compose教程，并研究了许多Android示例。当时我以为自己已经入门，但实际上并非如此，因为企业开发中并不常用Compose，这套工具主要是个人开发者在使用，尤其在国内的开发体系中，使用者更是寥寥无几。鉴于Compose的现状以及为后续学习Flutter和React Native做准备，我重新学习了Activity。我阅读了官方文档，编写了无数的示例，创建了包含各种示例的项目，封装了多个库，并集成了Flutter和React Native框架的示例项目。我曾一度对此非常着迷。那段时间虽然单调，但我一直在进步。后来，我不再将大量精力投入到Android体系中，但回过头来看，那段时光是值得的，因为它拓宽了我的视野。我从更高的层次审视整个前端体系，理解了渲染引擎，并从传统的超文本标记语言中跳脱出来，探索基于Skia渲染引擎的不同实现。我了解了声明式框架的兴起，从React到其他框架，命令式仅作为底层支撑，而声明式逐渐占据主导地位。许多原有的控制逻辑被转移到框架内部，以支持开发。这大概就是我在Android学习中的全部收获吧。这个阶段结束时，半年时间已经过去了，那时我确实编写了许多示例，观看了大量视频和示例项目。现在回想起来，仿佛一切都发生在昨天。在实践方面，我参考并开发了一个类似<a href="https://github.com/Hao-yiwen/JinRiTouTiao" target="_blank" rel="noopener noreferrer">今日头条的应用</a>。</p>
<p>完成了Android的学习后，我开始着手进行应用开发。然而，我发现使用UIKit或Compose进行开发并不是最佳选择，因为成本实在太高。此外，还有HarmonyOS的存在，不可能在每个平台都使用原生开发，这对我这样的个人开发者来说非常不切实际，因为我无法独自开发三套系统，这显然不现实。因此，使用Flutter和React Native是非常必要的。由于React Native框架本身的问题，如果一个项目使用React Native开发，必然需要大量的原生逻辑支持。虽然大部分工作可以跨平台，但仍有一些工作需要原生支持。在这个时候，我将目光转向了Flutter。凭借Android学习的经验，我从Flutter文档入手，运行了大量的示例，深入学习了文档，了解了Flutter如何通过Skia和Dart引擎脱离原生渲染，对谷歌拥有这样的技术感到钦佩。在实际使用中，Flutter在许多性能方面表现出色，因为最终被编译成了.so或静态库，得益于C++的支持，性能并不逊色。这一点在我后续开发仿网易云音乐时得到了体现。Flutter确实是一个非常出色的框架，性能优异，并且由于其静态语言的特性，在后续的可维护性和性能方面也表现良好。</p>
<p>在接下来的一个月里，我开始了仿网易云音乐的开发。经过大约一个月的努力，我完成了这个项目。起初，由于对开发细节的疏忽，出现了一些性能问题，但经过一系列优化后，性能得到了显著提升。结合骨架屏的使用，整体体验还算不错。尽管网易接口的稳定性欠佳，影响了部分体验，但使用Flutter开发个人项目依然是一个很好的选择，至少不会像使用React Native那样担心性能问题。<a href="https://github.com/Hao-yiwen/netease_cloud_music_app" target="_blank" rel="noopener noreferrer">我的star最多的仿网易云音乐项目</a></p>
<p>到 Flutter 开发完毕，差不多就到了 9 月底。接下来的两个月是今年的重头戏，我开始了深入的开发思考。在之前的开发中，我主要关注前端或后端的开发，它们本质上只是对内容的呈现或对内容的增删改查。然而，如果没有内容，即使我做得再好的应用或后端服务器又有什么意义呢？那么，内容从何而来呢？如果我在 AI 时代之前完成了全栈闭环，我一定会非常悲观，因为花费了巨大代价的全栈闭环实际上并没有多大作用。然而，AI 时代改变了一切，尤其是 2024 年，一切都变了。</p>
<p>2023年，OpenAI的接口为全球各类AI创作提供了强大的驱动力，但由于种种原因，国内的个人开发者难以享受这些科技进步，尤其是在模型操作方面。然而，2024年情况发生了变化。在阿里和字节的引领下，尽管国内的模型能力尚不及GPT，但在一些简单行业中，AI的应用变得不再复杂。换句话说，国内的AI技术已经足以支持一些AI应用的落地。因此，我在2024年9月之前的努力是有价值的，我可以实现真正的项目落地，并且内容的丰富度和成本都是可控的。AIGC真正开始在各行各业中落地了。</p>
<p>经过前面的思考，我深信在这个时代，任何优秀的开发者最终都应投身于AI事业，因为它代表着理想和旗帜。AI是计算机发展的源头，从20世纪40年代的简单神经模拟，到后来的反向传播算法，再到卷积神经网络和循环神经网络，直至2018年的Transformer架构及其规模扩展，AI正逐步将不可能变为可能。我相信在未来的5到10年内，尤其是在依赖文本或编码的行业中，结合当前的Transformer和强化学习技术，将实现超越人类水平的突破。这是令人振奋的，因为没有饥饿和痛苦的时代将会过去，我们将迎来一个新的文明。然而，我也感到忧虑，考虑到国内的现状，这一切能否在国内实现？在一个权力无限大的社会中，这是否会成为权贵操控的工具，还是说国人将不再劳累，不再背井离乡？我是否可以在家乡开设一个小工作室，专注于我热爱的计算机事业？说到这里，情绪不免有些激动，因为我无法从现状中看到未来，但我知道我应该投身于此，为人类从工业社会向信息社会迈进的伟大事业贡献自己的一份力量。</p>
<p>理想是美好的，如果我每天都能从事AI事业，我一定会乐此不疲。然而，现实却是如此令人沮丧，我甚至没有一台高性能的显卡来驱动我人生中第一个迈向理想社会的模型。我的理想始终鲜明，栩栩如生，因为它存在于我的幻想中。这就是我2024年的全部生活，我的生活和事业交织在一起，因为热爱，事业成了我生活的一部分。从吴恩达的机器学习到动手学深度学习，虽然进展缓慢，但我在一步步迈向理想的AI时代。我热爱这个时代，因为它充满无限可能；我也恨这个时代，恨自己现在还太弱小。我想我会一直向前走，我想在此做出一些成就。</p>
<p>2025年，我的首要目标是搭建一个基于5090显卡的个人深度学习环境，开始我的探索之旅。深度学习领域广阔，各类应用层出不穷，而我希望能让它自由地歌唱。</p>
<p>在2024年，我还开发了一些应用程序，其中一些是利用AI辅助开发的，效果非常好。由于时间和精力有限，这些应用程序并未上架，而且仓库是私密的，无法在此分享。这就是我2024年的全部生活，虽然看似单调，但我一直在全力弥补自己在计算机知识上的不足。未来属于AI，我正在全力投入其中。</p>
<p>在这里，我想谈谈即将发生的一件事。在年末的几个月里，我利用AI辅助和自身的知识，开发了一些全栈应用。这些应用相对复杂，如果在过去，开发这些应用可能需要花费半年的时间，即使有AI辅助，也需要大约三个月。然而，现在借助Cursor的帮助，我能够在半个月内完成一个商用化的应用和小型服务器应用。因此，程序员实际上迎来了一个分水岭。如果你对某些领域有深入理解和关注，AI将极大地放大你的能力；但如果你只是将编程视为一份工作，那么你可能会被淘汰，因为AI带来了效率的极大提升。</p>
<p>最近，我开始关注Next.js。我一直认为自己应该关注这项技术，因为我的根本是前端开发，未来的工作重心可能也会回到前端。然而，我也是一名移动端开发者，因为我很少做网站，更喜欢开发应用程序。尽管我常用跨平台框架开发应用，但这并不完全算是移动端开发者。在了解Next.js后，我对Node.js和前端技术的发展感到震惊。从早期的切图仔到现在的全栈Next.js，从CSR到SSR/SSG/ISR/流式渲染，前端技术虽然只是网页开发，但相比移动端，感觉要领先一代。尽管JavaScript语言常被诟病，但由于其生态系统足够完善，社区也非常强大，因此目前依然非常有力。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="生活">生活<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_overview#%E7%94%9F%E6%B4%BB" class="hash-link" aria-label="Direct link to 生活" title="Direct link to 生活" translate="no">​</a></h2>
<p>谈完事业，我们来聊聊生活。今年，我和呆呆的感情虽然经历了一些波折，但每次争吵都没有持续超过一周，我们携手度过了完整的一年。在四月，我买下了人生中的第一辆车——比亚迪驱逐舰。这真是一辆非常出色的车，我开着它带呆呆回青岛，从白天到黑夜，从内陆到海岸，我们乐在其中，仿佛永远年轻。到了十月，呆呆也拥有了她的第一辆车，一辆出色的本田思域，它为她的生活增添了无限乐趣和便利。我们的爱情仍在继续，如果一切顺利，我想我们会像电视剧中的许多情侣一样，从相识相爱走向婚姻，目前正稳步推进。最快可能是明年，最慢也不过后年。今年唯一的遗憾是只和呆呆去了青岛，大部分时间都待在上海，主要是因为经济原因，希望明年能有所改善。</p>
<p>另一个话题是健身。与2023年良好的健身记录相比，2024年的健身天数屈指可数，跑步的日子也不超过50天。虽然完成了年初的学习任务，但在跑步计划上表现得非常糟糕，完全没有达到预期。新的一年，我打算重新拾起健身，因为根据我的经验，健身和学习是正相关的。如果只专注于学习而忽视健身，长期下来，效率会大打折扣。</p>
<p>今年我爸来上海，我带他游览了杭州、乌镇和苏州。在乌镇，我们乘船游览，感受了江南水乡的温暖与美丽。江南真是一个好地方。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="遗憾">遗憾<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_overview#%E9%81%97%E6%86%BE" class="hash-link" aria-label="Direct link to 遗憾" title="Direct link to 遗憾" translate="no">​</a></h2>
<p>一直想去看看这个世界，本来打算和呆呆一起出去旅行，但由于经济原因和没有假期，大多数时间都在家乡和青岛度过。我一直想去岳阳，亲身感受一下岳阳楼的壮丽；去海南，体验热带风情；去深圳，漫步人才公园。然而，这些计划都未能实现。希望2025年能有机会去这些地方走走看看。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="flag">FLAG<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_overview#flag" class="hash-link" aria-label="Direct link to FLAG" title="Direct link to FLAG" translate="no">​</a></h2>
<p>我很想在这里立一些flag，就像去年一样，但我发现去年立的flag中有一个很重要的没有实现。所以我决定还是不立了，因为只要心中真正立下目标，比写在纸上要有效得多。</p>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/my_car-a04ee8af08a064a3773519c6c7fa8387.png" width="50%">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/dai_car-58a69b4232cc98009981de999f2b2f5f.jpg" width="50%">]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[使用proxyman进行抓包]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/proxyman</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/proxyman</guid>
            <pubDate>Thu, 26 Sep 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[在本地进行项目开发的时候，想要对网络请求进行抓包是无可厚非的，但是web开发有浏览器可以抓包，而移动端只能用抓包工具抓。]]></description>
            <content:encoded><![CDATA[<p>在本地进行项目开发的时候，想要对网络请求进行抓包是无可厚非的，但是web开发有浏览器可以抓包，而移动端只能用抓包工具抓。</p>
<p>在这里推荐使用proxyman抓包。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="原因">原因<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/proxyman#%E5%8E%9F%E5%9B%A0" class="hash-link" aria-label="Direct link to 原因" title="Direct link to 原因" translate="no">​</a></h2>
<p>使用proxyman的外部代理，我可以做到一遍进行外网访问，还能同时进行抓包，这种场景对在ios模拟器开发app至关重要，因为并不是所有app都有网络基建。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="外部代理设置">外部代理设置<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/proxyman#%E5%A4%96%E9%83%A8%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE" class="hash-link" aria-label="Direct link to 外部代理设置" title="Direct link to 外部代理设置" translate="no">​</a></h2>
<p>不要选择自动代理，开启自动代理就会把流量直接放出去，没有任何作用，做不到代理效果。</p>
<p>选择http/https/socks，分别代理到对应的要代理的端口。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="感想">感想<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/proxyman#%E6%84%9F%E6%83%B3" class="hash-link" aria-label="Direct link to 感想" title="Direct link to 感想" translate="no">​</a></h2>
<p>这个问题困扰我很久了，如何一边代理，一边在谷歌查略资料，而不是只能抓包或者只能翻墙。。。</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2024平淡生活中的刺]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog</guid>
            <pubDate>Sun, 25 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[20240325]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240325">20240325<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#20240325" class="hash-link" aria-label="Direct link to 20240325" title="Direct link to 20240325" translate="no">​</a></h2>
<p>经过一个多月的时间，终于看完了compose基础知识篇章，大概从布局到viewModel,再从internet到Room以及work，大概对compose开发有了一个初步的了解，但是脑海还是一片糊涂，并没有将android知识连成片。</p>
<p>不积跬步无以至千里，不积小流无以成江河。</p>
<p>3月份了，情绪还是时好时坏，一方面是因为知识储备的焦虑，目前并不能在各个方面能独当一面，能够作为一个从0到1的人，另一方面，我俩的事情确实对我的情绪影响太深了，我想我们好好地，但是你提的要求或许我还是做不到。</p>
<p>我想时间确实会治愈一切，等过了这段日子，或许心里自然就解脱了，可是我确实想我们有一个未来，只是目前看起来太过于遥远罢了。</p>
<h1>20240428</h1>
<p>今天在写代码的时候照常使用chatgpt辅助开发，但是今天的chatgpt抽风极其严重，感觉都没法正常使用了，在生成xml代码的时候经常卡死。</p>
<p>不知道是老美对国人的特殊照顾，还是chatgpt的临时抽风，我想马上就能得知事实。</p>
<p>chatgpt真强大，希望老美真不要封禁啊，不然都没法好好写代码了。</p>
<p>呜呜呜~</p>
<p>后续又好了~</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2024年6月7日有感">2024年6月7日有感<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#2024%E5%B9%B46%E6%9C%887%E6%97%A5%E6%9C%89%E6%84%9F" class="hash-link" aria-label="Direct link to 2024年6月7日有感" title="Direct link to 2024年6月7日有感" translate="no">​</a></h2>
<p>马上25岁了，7年前走出家门来到北京，再到现在因为机缘巧合来到上海。各类事情萦绕身旁，还好，都走过来了。</p>
<p>除去前面的感想，来说说目前面对的情景，在经过8个月对android的学习后，目前android基本框架已经搭建完毕，虽然还没有经过很多项目的洗礼，但是基本上也把该学的点都学了和过了一遍，跟当时的预期也差不太多。</p>
<p>虽然现在目标达人APP还没有完全开发完毕，但是这块可以在后面开发。</p>
<p>在6月初的时候，在RN源码编译成功和RN多实例集成完毕后，我拿着Android App在想一件事情，为什么感觉android开发明显要比ios开发舒服的多，但是为什么ios性能会好很多那，为什么ios的表现总是让人很满意，而Android总是在什么地方怪怪的。</p>
<p>并且，我真的受够了Android有时候呆呆的不流畅。我要开发IOS，~~~</p>
<p>也就是说，目前要走大全栈了。</p>
<p>首选是Android/RN/IOS。这三个排名不分上下。</p>
<p>先花三个月基本将IOS开发基础知识全部搞完，再花4个月潜行开发Android和Ios APP.</p>
<p>到今年年底的时候要交付一班稳定的，可用性高的IOS和Android集成RN项目。(Android现已交付)，</p>
<p>明年花三个月时间搞Flutter。争取在明年4月的时候收官。</p>
<p>去年有写过一个月的SwiftUI,感觉还好，只是当时对线程和内存回收之类的实在不太熟悉，但是现在有Android基础打底，希望进度可以稍快。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240704小记">20240704小记<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#20240704%E5%B0%8F%E8%AE%B0" class="hash-link" aria-label="Direct link to 20240704小记" title="Direct link to 20240704小记" translate="no">​</a></h2>
<p>从昨晚凌晨开始，感觉心脏跳动有些困难，貌似有东西堵着一样。</p>
<p>感觉长时间的生活不规律和加班奋斗导致身体出了一些异常，可能需要一些时间来调养。</p>
<p>暂时需要一段时间再凌晨1点前睡觉。</p>
<p>~关山难越，谁渡失路之人。萍水相逢，竟是他乡客。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240722">20240722<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#20240722" class="hash-link" aria-label="Direct link to 20240722" title="Direct link to 20240722" translate="no">​</a></h2>
<p>今天和往常相同，但是也有一些不同，因为仿今日头条app终于开发完了。我也终于可以搞ai了。终于要进入ai领域了，相较于其他领域的红海，这里可谓是大有前途。</p>
<p>需要在巩固之前native开发的基础上进行ai侧的学习和研究。二者需要一个平衡，但是我想入门后情况应该会好的多。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="202408">202408<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#202408" class="hash-link" aria-label="Direct link to 202408" title="Direct link to 202408" translate="no">​</a></h2>
<p>8月是一个燥热的月份，这个月总是莫名其妙感觉到热。热的让人心慌。以前觉得时间往后推好像很多事情终究不会发生一样，但是时间到了还是会发生。</p>
<p>很多事情压在心头，无力感一直压在我的心上。而从今年春天开始，不知为什么，我也不再开始跑步，然后很多事情也就那样，慢慢的好像也没有动力了。</p>
<p>我不知道如何寻找动力，就像我是个很犹豫的人，我貌似一直没有勇气做出决定，我想带她走，但是鉴于目前的现状，我确实无力做些什么。】</p>
<p>在技术层面，8月的主线就是flutter，flutter可以说是声明式思想的极大体现，解决了native侧若干开发问题。虽然和react师出一脉。但是用flutter开发实际大型商业项目，开发难度还是可想而知的。目前仿网易云音乐项目稳步推进，有一些困难，需要克服。</p>
<p>8月最离谱的事情就是react native的tree shaking问题。解决难度极大，目前的想法是使用21年的0.64的metro tree shaking方案进行。但是该方案实际也并不有效，只是领导要执意推进此事，也找不到其他方案，就按这个做吧。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240926">20240926<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#20240926" class="hash-link" aria-label="Direct link to 20240926" title="Direct link to 20240926" translate="no">​</a></h2>
<p>再经过了近乎一年的学习后，现在对app开发可以说整体入门了，从android到flutter，当然还有react native,现在该做些事情了，最起码现在要完成之前没有完成的代码了。例如一问ai故事，例如仿网易云音乐。当然还有后端开发～～</p>
<p>与此同时，当然也要开始新的领域的一些探索了，例如ai，ai发展只有十年，至于transformer也只有7年，是时候进入这个领域了～～</p>
<p>今天最令我惊讶的是，我在去年12月份开发的应用依然能够正常运行，而且我当时还开发了对应的spring boot应用～</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20241007">20241007<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#20241007" class="hash-link" aria-label="Direct link to 20241007" title="Direct link to 20241007" translate="no">​</a></h2>
<p>国庆节还是结束了，我也应该开始新的学习篇章，和大多数人一样就是all in ai。至于为何，就是为了和当今世界最先进的开发产物对齐，这是必须的。因为传统的东西往往无法突破现有的泥潭和困局，而机会往往孕育在新的事物中。</p>
<p>这是一个难忘的国庆节，虽然还是有一些吵闹。但是呆子总算是买到了自己的第一辆车，真是替她开心啊。希望往后的日子里她越来越好。</p>
<p>这个国庆，我真的是放空自我，并没有在闲暇时分还进行一些开发工作。因为多方面知识的混杂貌似让我头脑混乱，并不能很好的做到前端的专业性，回去以后要开始继续开发了，但是这一次不能用生命搞开发了，需要早睡早起，不然其实只是度过了半个日子而已，而另一半实际上是被浪费的。</p>
<p>记得19年选专业的时候还觉得人工智能专业真是垃圾啊，一点用处没有，但是在经过了短短5年之后的今天来看，以llm为首的大模型技术正在疯狂的改造世界。</p>
<ul>
<li>开发<!-- -->
<ul>
<li>rn</li>
<li>flutter</li>
<li>android</li>
<li>web<!-- -->
<ul>
<li>nextjs</li>
<li>weapp</li>
</ul>
</li>
</ul>
</li>
<li>ai<!-- -->
<ul>
<li>大模型微调</li>
<li>机器学习理论基础</li>
<li>ai理论体系</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20241020">20241020<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#20241020" class="hash-link" aria-label="Direct link to 20241020" title="Direct link to 20241020" translate="no">​</a></h2>
<p>在今天来说最重要的已经不是专业性学习了，而是积极向上的精神和自律的生活。经过一年多长时间的艰苦修行，对专业性层面的知识已经有所了解。而现在需要换段了，因为黑夜是不那么容易就结束的，所以我们必须要拥有积极向上的精神态度和自律的生活才能走出这片黑夜，否则可能什么都是一场空。</p>
<p>20241020换段</p>
<ul>
<li>跑步</li>
<li>自律</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20241219">20241219<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_blog#20241219" class="hash-link" aria-label="Direct link to 20241219" title="Direct link to 20241219" translate="no">​</a></h2>
<p>好久没写日志了，过去半个月，做了一款在nextjs和taro小程序使用的高性能功能极其复杂的日历组件，直到今天，开发终于告一段落了，真的搞死我了，这个事情干完，我觉得我还能多活一段时间，真的太累了。</p>
<p>终于又可以开心搞ai了，嘿嘿～～</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[源码查看翻译插件]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_0712</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_0712</guid>
            <pubDate>Fri, 12 Jul 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[今天在写代码和研究的时候发现，貌似想要提升快一些确实要看源码，如果不看源码，而是嘴上谈一谈，那么确实提升太慢了。]]></description>
            <content:encoded><![CDATA[<p>今天在写代码和研究的时候发现，貌似想要提升快一些确实要看源码，如果不看源码，而是嘴上谈一谈，那么确实提升太慢了。</p>
<p>现在主流开源框架和语言都有详细的注释，所以在看代码的时候遇到问题多读读注释就好了。</p>
<p>但是在读注释的过程中难免读不懂，因为英文水平有限，所以可以用翻译软件来获取中文版本，即使困难，注释不得不读，否则提升太慢了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="idea中好的翻译软件">idea中好的翻译软件<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_0712#idea%E4%B8%AD%E5%A5%BD%E7%9A%84%E7%BF%BB%E8%AF%91%E8%BD%AF%E4%BB%B6" class="hash-link" aria-label="Direct link to idea中好的翻译软件" title="Direct link to idea中好的翻译软件" translate="no">​</a></h2>
<p><a href="https://plugins.jetbrains.com/plugin/8579-translation/actions" target="_blank" rel="noopener noreferrer">https://plugins.jetbrains.com/plugin/8579-translation/actions</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vscode中好的翻译软件">vscode中好的翻译软件<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_0712#vscode%E4%B8%AD%E5%A5%BD%E7%9A%84%E7%BF%BB%E8%AF%91%E8%BD%AF%E4%BB%B6" class="hash-link" aria-label="Direct link to vscode中好的翻译软件" title="Direct link to vscode中好的翻译软件" translate="no">​</a></h2>
<p><a href="https://marketplace.visualstudio.com/items?itemName=kitiho.chatgpt-comment-translate" target="_blank" rel="noopener noreferrer">https://marketplace.visualstudio.com/items?itemName=kitiho.chatgpt-comment-translate</a></p>
<p><a href="https://github.com/intellism/vscode-comment-translate?tab=readme-ov-file" target="_blank" rel="noopener noreferrer">https://github.com/intellism/vscode-comment-translate?tab=readme-ov-file</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vscode使用配置">vscode使用配置<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_0712#vscode%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="Direct link to vscode使用配置" title="Direct link to vscode使用配置" translate="no">​</a></h3>
<ul>
<li>打开 VS Code 设置：<!-- -->
<ul>
<li>进入 File -&gt; Preferences -&gt; Settings，或按 Ctrl + , 快捷键。</li>
<li>搜索<code>Chatgpt Translate</code></li>
</ul>
</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[rn app大小]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_app_size</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_app_size</guid>
            <pubDate>Sat, 27 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[今天晚上尝试对一个新创建的rn@0.74.0 android app打release包时发现，打完包后的体积是50mb，我心里咯噔了一下。这也太离谱了把，什么都没有做就50mb了。]]></description>
            <content:encoded><![CDATA[<p>今天晚上尝试对一个新创建的<code>rn@0.74.0</code> android app打release包时发现，打完包后的体积是50mb，我心里咯噔了一下。这也太离谱了把，什么都没有做就50mb了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0740">0.74.0<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_app_size#0740" class="hash-link" aria-label="Direct link to 0.74.0" title="Direct link to 0.74.0" translate="no">​</a></h2>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/0740_size-388e0471ca8adc3ef0bb1ada5c1651ba.png" width="500">
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>今天在学习android集成rn的时候无意发现，初始化一个0.74.0项目，直接打release包，体积竟然是50mb。我的天那~~</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0725">0.72.5<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_app_size#0725" class="hash-link" aria-label="Direct link to 0.72.5" title="Direct link to 0.72.5" translate="no">​</a></h2>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/0725_size-41fee30b4508828d3a31bb165032ba7e.png" width="500">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240428">20240428<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_app_size#20240428" class="hash-link" aria-label="Direct link to 20240428" title="Direct link to 20240428" translate="no">​</a></h2>
<p>此事已提issues，<a href="https://github.com/facebook/react-native/issues/44291#issuecomment-2079889795" target="_blank" rel="noopener noreferrer">issues链接</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240428-1">20240428<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_app_size#20240428-1" class="hash-link" aria-label="Direct link to 20240428" title="Direct link to 20240428" translate="no">​</a></h2>
<p>此事被rn团队成员恢复，android包体积并没有变大，在文件夹中体积变大原因是因为android后续格式无压缩，导致看清来体积较大。</p>
<p><a href="https://github.com/facebook/react-native/issues/44291#issuecomment-2084952099" target="_blank" rel="noopener noreferrer">issues解答</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[git管理工具fork]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/fork</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/fork</guid>
            <pubDate>Thu, 25 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[周六加班的时候同事有推荐使用fork进行代码管理，因为fork用起来不卡，而且有git cherry-picker功能。今天尝试了一下，确实还行。]]></description>
            <content:encoded><![CDATA[<p>周六加班的时候同事有推荐使用fork进行代码管理，因为fork用起来不卡，而且有<code>git cherry-picker</code>功能。今天尝试了一下，确实还行。</p>
<p>百度网盘有破解版本。</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[git cherry-pick作用和使用]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git_cherry_pick</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git_cherry_pick</guid>
            <pubDate>Thu, 25 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[cherry-pick 允许你选择一个或多个提交从其他分支拷贝到当前分支。它在以下场景中非常有用：]]></description>
            <content:encoded><![CDATA[<p>cherry-pick 允许你选择一个或多个提交从其他分支拷贝到当前分支。它在以下场景中非常有用：</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="作用">作用<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git_cherry_pick#%E4%BD%9C%E7%94%A8" class="hash-link" aria-label="Direct link to 作用" title="Direct link to 作用" translate="no">​</a></h2>
<ul>
<li>选择性合并：如果你只想将特定的提交从一个分支引入到当前分支，而不是整个分支的更改，cherry-pick 是完美的工具。</li>
<li>修复和调整：在一些复杂的分支策略中，特定的修复可能只需要应用到某些分支上。cherry-pick 可以帮助你实现这一点，而无需进行完整的分支合并。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用">使用<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git_cherry_pick#%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="Direct link to 使用" title="Direct link to 使用" translate="no">​</a></h2>
<p>使用fork应用来使用<code>git cherry-pick</code>体验极好，可以将commit从其他分支检出到自己分支。</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Medium]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/medium</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/medium</guid>
            <pubDate>Fri, 12 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[介绍]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="介绍">介绍<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/medium#%E4%BB%8B%E7%BB%8D" class="hash-link" aria-label="Direct link to 介绍" title="Direct link to 介绍" translate="no">​</a></h2>
<p>Medium是一个在线发布平台，于2012年由Twitter的共同创始人Evan Williams创建。它被设计为一个简洁的博客平台，旨在鼓励用户撰写和分享各种长度的文章。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/medium#%E8%83%8C%E6%99%AF" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景" translate="no">​</a></h2>
<p>2024年4月12日晚上，我在看一篇介绍rn新架构和旧架构的文章，我刚开始觉得写的还行，后面越看越吃惊，因为个人感觉真的写的让人通俗易懂，很多耳熟能详但是很少有文章写到这种程度，于是我选择medium作为我的一个阅读板块，并抽时间进行学习和阅读。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="入坑文章">入坑文章<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/medium#%E5%85%A5%E5%9D%91%E6%96%87%E7%AB%A0" class="hash-link" aria-label="Direct link to 入坑文章" title="Direct link to 入坑文章" translate="no">​</a></h2>
<ul>
<li><a href="https://medium.com/@under_the_hook/react-native-the-new-architecture-c4ba8ed8b452" target="_blank" rel="noopener noreferrer">rn架构演化</a></li>
</ul>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/rn_old-9d2553617403de9ed3ced1240974b9e4.webp" width="800">
<ul>
<li>旧架构<!-- -->
<ul>
<li>旧架构依赖于bridge和json异步消息队列的方式传递数据</li>
<li>因为是异步消息队列，所以js端和native互相不可知，导致维护两颗虚拟树，有巨大内存损耗</li>
<li>bridge是单线程，导致如果异步消息队列中数据量过大时候会白屏</li>
<li>因为是异步消息队列，在list中滑动会有白屏现象，因为数据异步同步</li>
<li>因为是异步消息队列，所以native侧在app启动时候需要加载全部模块，因为native和js完全不透明</li>
</ul>
</li>
</ul>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/rn_new-b611adb1c3a4c98e98a0a88e3e95e7fb.webp" width="800">
<ul>
<li>新架构<!-- -->
<ul>
<li>使用c++的jsi作为抽象层，模拟web浏览器中js直接调用c++底层逻辑</li>
<li>js和native都为互操作层，数据实时传输</li>
<li>无需维护两颗虚拟树并异步同步，减少内存损耗</li>
<li>因为js和native直接调用操作，所以应用可以懒加载所需模块</li>
<li>jsi提供了接口规范和类型安全，提高代码质量和减少了app崩溃率</li>
</ul>
</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[RN调试问题]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_debugg</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_debugg</guid>
            <pubDate>Tue, 02 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[在经过0.72.x和0.73.0版本后，在2024年4.1日在(RN0.73.6)[https://github.com/facebook/react-native/tree/v0.73.6]尝试使用新型调试工具或者hermes debugger时已经能够流畅运行了。]]></description>
            <content:encoded><![CDATA[<p>在经过0.72.x和0.73.0版本后，在2024年4.1日在(RN0.73.6)[<a href="https://github.com/facebook/react-native/tree/v0.73.6%5D%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8%E6%96%B0%E5%9E%8B%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E6%88%96%E8%80%85hermes" target="_blank" rel="noopener noreferrer">https://github.com/facebook/react-native/tree/v0.73.6]尝试使用新型调试工具或者hermes</a> debugger时已经能够流畅运行了。</p>
<p>一个不能调试的RN项目真的会恶心死人，感谢RN官方，终于对此问题进行了定位和修复，未来开发RN终于不用那么恶心了。</p>
<p>而且这次调试更新后，重新刷新页面不会导致debugger失效。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="注意事项">注意事项<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/rn_debugg#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" class="hash-link" aria-label="Direct link to 注意事项" title="Direct link to 注意事项" translate="no">​</a></h2>
<ul>
<li>如果退出此RN App,那么重新进入的时候，需要重新打开调试工具，此时Map不再是原来map，此时顺序为先在app中打开RN页面，然后打开调试工具，这个时候map就能正常链接了</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[charles使用]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/charles</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/charles</guid>
            <pubDate>Tue, 19 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[今天在开发android，在开发过程中在思考一个问题，如果是从0开始，并没有完善的基建，那么如何知晓接口返回的情况那，于是打算重新熟悉charles进行抓包]]></description>
            <content:encoded><![CDATA[<p>今天在开发android，在开发过程中在思考一个问题，如果是从0开始，并没有完善的基建，那么如何知晓接口返回的情况那，于是打算重新熟悉charles进行抓包</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装charles">安装charles<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/charles#%E5%AE%89%E8%A3%85charles" class="hash-link" aria-label="Direct link to 安装charles" title="Direct link to 安装charles" translate="no">​</a></h2>
<p><a href="https://www.charlesproxy.com/download/latest-release/" target="_blank" rel="noopener noreferrer">https://www.charlesproxy.com/download/latest-release/</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="设置代理">设置代理<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/charles#%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86" class="hash-link" aria-label="Direct link to 设置代理" title="Direct link to 设置代理" translate="no">​</a></h2>
<ul>
<li>点击<code>proxy-&gt; proxy setting</code>来创建代理端口，点击<code>enable transparent http proxying</code></li>
<li>点击<code>proxy-&gt; ssl proxy setting</code>来容许所有流量流入</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="下载根证书到android手机">下载根证书到android手机<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/charles#%E4%B8%8B%E8%BD%BD%E6%A0%B9%E8%AF%81%E4%B9%A6%E5%88%B0android%E6%89%8B%E6%9C%BA" class="hash-link" aria-label="Direct link to 下载根证书到android手机" title="Direct link to 下载根证书到android手机" translate="no">​</a></h2>
<ul>
<li>
<p>查看根证书在本地的位置，并导出证书为cer文件</p>
</li>
<li>
<p>将cer文件转化为pem文件</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:#36acaa">-inform</span><span class="token plain"> der </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> android.cer </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> android.pem</span><br></span></code></pre></div></div>
<ul>
<li>将pem文件传输到手机</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb push android.pem /sdcard/</span><br></span></code></pre></div></div>
<ul>
<li>安装证书</li>
</ul>
<p>接着就可以开始抓包了。</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2024龙年春节有感]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_spring_frial</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_spring_frial</guid>
            <pubDate>Sat, 10 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[老家]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="老家">老家<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_spring_frial#%E8%80%81%E5%AE%B6" class="hash-link" aria-label="Direct link to 老家" title="Direct link to 老家" translate="no">​</a></h2>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/tree-bc5171b837ae29a8c2c2df129f274841.jpeg" width="300">
<p>家有枣树 吾十岁栽之 今年岁已二十有四 再回首 时光如流水 往事如云烟。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="小记">小记<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_spring_frial#%E5%B0%8F%E8%AE%B0" class="hash-link" aria-label="Direct link to 小记" title="Direct link to 小记" translate="no">​</a></h2>
<p>20240211晚上输了1000， 第一次输钱1000，以此纪念。思绪万千，但化作言语，却也只是寥寥数语。</p>
<p>20240212晚上赢了960，又回本了。</p>
<p>20240213赢了1400，第一次赢大钱。</p>
<p>20240216晚上因与呆的关系产生问题，陷入深深的难过，故再回首往日走过时光，思绪万千。</p>
<p>20240218晚抵达上海，2024年春节结束。。。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="故乡山川">故乡山川<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_spring_frial#%E6%95%85%E4%B9%A1%E5%B1%B1%E5%B7%9D" class="hash-link" aria-label="Direct link to 故乡山川" title="Direct link to 故乡山川" translate="no">​</a></h2>
<p>故土难忘却 归途情更深</p>
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/2024_festfrial_1-7d435c128cd48dbe33f80efaa557ee1e.jpeg" width="500">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/2024_festfrial_2-23ce68fdf1aa30be2689627d1cd7f6a6.jpeg" width="500">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/2024_festfrial_3-fff588e04a585c156de2b23835f07203.jpeg" width="500">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/2024_festfrial_4-3d7550d009b5483f9e102b26593beecb.jpeg" width="500">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/2024_festfrial_5-ec996aab5cdc9ee51e5cff601c1a57bf.jpeg" width="500">
<img src="https://your-docusaurus-test-site.com/yiwen-blog-website/en/assets/images/2024_festfrial_6-f2336c86fef0c8f2e1c2e3cad55ad332.jpeg" width="500">]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[openai 代理]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/cloudflare</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/cloudflare</guid>
            <pubDate>Thu, 01 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[问题]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/cloudflare#%E9%97%AE%E9%A2%98" class="hash-link" aria-label="Direct link to 问题" title="Direct link to 问题" translate="no">​</a></h2>
<p>最近在开发的时候遇到一个难题，就是墙的问题，有一个场景就是我把请求发送到 openai 的时候会被墙了，然后这个时候无需要使用魔法解决，但是魔法也不是万能的，也经常会被墙，所以这个时候如果有一个问题定的解决方案是非常好的，而自己维护的无论是代理还是魔法，必然在可靠性和性能侧有一些问题，那么如何解决这个问题那？</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决">解决<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/cloudflare#%E8%A7%A3%E5%86%B3" class="hash-link" aria-label="Direct link to 解决" title="Direct link to 解决" translate="no">​</a></h2>
<ul>
<li>cloudflare</li>
</ul>
<p>cloudflare最近提供了一个AIgateway的服务，因为cloudflare在国内是有服务的，所以使用AIgateway能够做到高性能访问openai。比自己维护的无论在稳定性和性能侧面要好的多，真是一个宝藏选择。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="文档">文档<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/cloudflare#%E6%96%87%E6%A1%A3" class="hash-link" aria-label="Direct link to 文档" title="Direct link to 文档" translate="no">​</a></h2>
<p><a href="https://developers.cloudflare.com/ai-gateway/get-started/connecting-applications/" target="_blank" rel="noopener noreferrer">AI gateway</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2024展望]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview</guid>
            <pubDate>Fri, 19 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[年度感悟]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="年度感悟">年度感悟<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview#%E5%B9%B4%E5%BA%A6%E6%84%9F%E6%82%9F" class="hash-link" aria-label="Direct link to 年度感悟" title="Direct link to 年度感悟" translate="no">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="目标">目标<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview#%E7%9B%AE%E6%A0%87" class="hash-link" aria-label="Direct link to 目标" title="Direct link to 目标" translate="no">​</a></h2>
<ul>
<li>IOS开发</li>
<li><del>Android开发</del></li>
<li>一问AI故事</li>
<li>每天前进5公里</li>
<li><del>一问系列视频账号</del></li>
<li><del>每日目标app开发</del></li>
<li>英语学习</li>
<li>人工智能入门</li>
<li><del>flutter学习</del></li>
<li><del>今日头条android app</del></li>
<li>仿网易云音乐</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="一月">一月<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview#%E4%B8%80%E6%9C%88" class="hash-link" aria-label="Direct link to 一月" title="Direct link to 一月" translate="no">​</a></h3>
<ul>
<li>2024年是沉淀的一年，心无旁骛，专心研究技术，不是所有时间都是顺风的，在不顺风的时候积蓄力量更为重要。</li>
<li>当一个人知道的太多，但拥有的太少的时候，未免也是一种悲哀。</li>
<li>20240120在开发一问ai故事的时候既没有办法改造userdetails,也没有办法调试rn项目，太难了。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="二月">二月<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview#%E4%BA%8C%E6%9C%88" class="hash-link" aria-label="Direct link to 二月" title="Direct link to 二月" translate="no">​</a></h3>
<ul>
<li>过年</li>
<li>新年目标展望</li>
<li>当你不重视一件事情的时候，那么很快，她也会从你身边走过，有时候我们太用心用力往前走了，而不怎么回头瞧一瞧，殊不知我们往前走到底是为了什么</li>
<li>贫穷真的是可怕，因为它不仅仅会吸干人的骨髓，而且还会将各种不幸降临到你的身上，可能你会抱头痛哭投降，但是并没有什么用处，这一切依然会在你身上发生</li>
<li><del>曾经有一份真挚的爱情摆在我的面前，但我没有珍惜，今天时过境迁，我后悔万分，但是貌似都没有用</del></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="三月">三月<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview#%E4%B8%89%E6%9C%88" class="hash-link" aria-label="Direct link to 三月" title="Direct link to 三月" translate="no">​</a></h2>
<ul>
<li>一问AI故事</li>
<li><del>Android开发学习</del></li>
<li><del>head_first_java学习</del></li>
<li><del>买车</del>
<ul>
<li><del>驱逐舰05</del></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="六月">六月<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/2024_preview#%E5%85%AD%E6%9C%88" class="hash-link" aria-label="Direct link to 六月" title="Direct link to 六月" translate="no">​</a></h2>
<p><del>目前进展发生偏差，今年目标就是搞跨端 RN + Android + IOS</del>. - ios就不搞了</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[vscode调试]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/vs_debugger</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/vs_debugger</guid>
            <pubDate>Tue, 16 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[今天在调试项目的时候想着尝试用一下vscode debugger，本来没抱有什么期望，但是在使用后，感觉就是调试能力很强大，终于感觉vscode是个强大的ide了。]]></description>
            <content:encoded><![CDATA[<p>今天在调试项目的时候想着尝试用一下<code>vscode debugger</code>，本来没抱有什么期望，但是在使用后，感觉就是调试能力很强大，终于感觉<code>vscode</code>是个强大的<code>ide</code>了。</p>
<p>今天调试的任务是<code>npm run start</code>,然后在启动的时候有个三方包从其他地方<code>tsc</code>到<code>node_moduels</code>中，然后我再三方包中打断点调试，这个<code>launch.json</code>如下:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.2.0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"configurations"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Launch via NPM"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"node"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"request"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"launch"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"runtimeExecutable"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"npm"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"runtimeArgs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"run-script"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"start:crn"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"skipFiles"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"&lt;node_internals&gt;/**"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"cwd"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${workspaceFolder}/xtaro-demo1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 设置当前工作目录为 xtaro-demo1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"outFiles"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"${workspaceFolder}/xtaro-demo1/node_modules/**/*.js"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[docker镜像仓库迁移]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/docker_migrate</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/docker_migrate</guid>
            <pubDate>Sun, 14 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[前置条件]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="前置条件">前置条件<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/docker_migrate#%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6" class="hash-link" aria-label="Direct link to 前置条件" title="Direct link to 前置条件" translate="no">​</a></h2>
<p><a href="https://cr.console.aliyun.com/cn-shanghai/instance/repositories" target="_blank" rel="noopener noreferrer">阿里云容器仓库</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用github-action将镜像打包上传至阿里云容器仓库">使用github action将镜像打包上传至阿里云容器仓库<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/docker_migrate#%E4%BD%BF%E7%94%A8github-action%E5%B0%86%E9%95%9C%E5%83%8F%E6%89%93%E5%8C%85%E4%B8%8A%E4%BC%A0%E8%87%B3%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E4%BB%93%E5%BA%93" class="hash-link" aria-label="Direct link to 使用github action将镜像打包上传至阿里云容器仓库" title="Direct link to 使用github action将镜像打包上传至阿里云容器仓库" translate="no">​</a></h2>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Docker Build and Push to Aliyun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'v*'</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 当推送符合 'v*' 格式的标签时触发</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build-and-push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Checkout Code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Login to Aliyun Container Registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        echo "${{ secrets.ALIYUN_CONTAINER_REGISTRY_PASSWORD }}" | docker login --username ${{ secrets.ALIYUN_CONTAINER_REGISTRY_USERNAME }} --password-stdin registry.cn-shanghai.aliyuncs.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Extract Git Tag for Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo "</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">output name=version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$(git describe </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tags </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">abbrev=0)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build Docker Image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        docker build --platform linux/amd64 -t registry.cn-shanghai.aliyuncs.com/${{ secrets.ALIYUN_CONTAINER_REGISTRY_NAMESPACE }}/yiwen-blog-website:${{ steps.tag.outputs.version }} .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Push to Aliyun Container Registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        docker push registry.cn-shanghai.aliyuncs.com/${{ secrets.ALIYUN_CONTAINER_REGISTRY_NAMESPACE }}/yiwen-blog-website:${{ steps.tag.outputs.version }}</span><br></span></code></pre></div></div>
<p>说明：</p>
<ul>
<li>容器版本使用tag标签版本来动态定义，而不是写死</li>
<li>设置对应的秘钥，在代码变化的时候手动push到容器仓库</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[aws中ec2登录]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/aws_use</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/aws_use</guid>
            <pubDate>Sat, 13 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[今天因为需要购买了一台ec2服务器，但是在登录实例的时候发现始终无法登录，后面对登录进行了研究，ec2不同于国内的ecs等服务器，ec2的登录只能使用密钥对登录，而如果在创建实例的时候没有设置密钥对，那么则需要自己在服务器中设置，而不是控制面板。]]></description>
            <content:encoded><![CDATA[<p>今天因为需要购买了一台ec2服务器，但是在登录实例的时候发现始终无法登录，后面对登录进行了研究，ec2不同于国内的ecs等服务器，ec2的登录只能使用密钥对登录，而如果在创建实例的时候没有设置密钥对，那么则需要自己在服务器中设置，而不是控制面板。</p>
<p>以下是详细流程:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 本地创建密钥对</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> rsa </span><span class="token parameter variable" style="color:#36acaa">-b</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2048</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> ~/my-aws-key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 获取公钥内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ~/my-aws-key.pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 将公钥添加到 EC2 实例</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> ~/.ssh/authorized_keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 添加公钥内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 本地登录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> ~/my-aws-key ec2-user@instance-ip</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="站点搭建推荐">站点搭建推荐<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/aws_use#%E7%AB%99%E7%82%B9%E6%90%AD%E5%BB%BA%E6%8E%A8%E8%8D%90" class="hash-link" aria-label="Direct link to 站点搭建推荐" title="Direct link to 站点搭建推荐" translate="no">​</a></h2>
<p><a href="https://www.youtube.com/watch?v=G38pR9nYYL8&amp;ab_channel=%E6%99%93%E6%9F%92%E7%A7%91%E6%8A%80" target="_blank" rel="noopener noreferrer">站点搭建</a></p>
<p><a href="https://www.moeelf.com/archives/304.html" target="_blank" rel="noopener noreferrer">cloudflare解锁</a></p>
<p><a href="https://ap-northeast-1.console.aws.amazon.com/console/home?region=ap-northeast-1#" target="_blank" rel="noopener noreferrer">ec2链接</a></p>
<p><a href="https://www.youtube.com/watch?v=SpxTFes1B8U&amp;ab_channel=%E4%B8%8D%E8%89%AF%E6%9E%97" target="_blank" rel="noopener noreferrer">vary</a></p>
<p><a href="https://bulianglin.com/archives/nicename.html" target="_blank" rel="noopener noreferrer">vary文档</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[git rebase]]></title>
            <link>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git</link>
            <guid>https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git</guid>
            <pubDate>Tue, 09 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[问题]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#%E9%97%AE%E9%A2%98" class="hash-link" aria-label="Direct link to 问题" title="Direct link to 问题" translate="no">​</a></h2>
<p>在最近的开发过程中碰到一个问题，每次拉取master分支开发完成后，会有其他人已经合并到master分支，这个时候我往往是通过merge来做，但是merge导致每次提交都会多出一条提交记录，在问题追溯的时候总是不太好。所以我想着如何解决这个问题</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决办法">解决办法<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95" class="hash-link" aria-label="Direct link to 解决办法" title="Direct link to 解决办法" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">拉取最新主分支</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> fetch origin master</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">执行rebase</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> rebase origin/master</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="git-rebase介绍">git rebase介绍<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#git-rebase%E4%BB%8B%E7%BB%8D" class="hash-link" aria-label="Direct link to git rebase介绍" title="Direct link to git rebase介绍" translate="no">​</a></h2>
<ol>
<li>
<p>工作方式：rebase 会重新应用一个分支上的更改到另一个分支。它首先找到两个分支的共同祖先，然后将改动的每个提交应用于目标分支。</p>
</li>
<li>
<p>提交历史：使用 rebase 会创建一个更线性的历史。它实际上是移动了一系列的提交到新的基线（base）。这会改变这些提交的哈希值，因为Git中的提交包括父提交的哈希值。</p>
</li>
<li>
<p>冲突解决：在 rebase 过程中遇到的冲突需要在每个重新应用的提交过程中逐个解决。这与 merge 不同，merge 是在最后创建合并提交之前一次性解决所有冲突。</p>
</li>
<li>
<p>适用场景：rebase 更适用于当你想要一个干净、线性的提交历史时。它常用于整理特性分支的提交历史，使其更加整洁和有序，然后再将这个特性分支合并到主分支。</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="merge和rebase比较">Merge和Rebase比较<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#merge%E5%92%8Crebase%E6%AF%94%E8%BE%83" class="hash-link" aria-label="Direct link to Merge和Rebase比较" title="Direct link to Merge和Rebase比较" translate="no">​</a></h2>
<ol>
<li>
<p>提交历史的清晰度：merge 保留了所有分支的历史和合并点，而 rebase 则提供了一个更线性、更干净的历史。</p>
</li>
<li>
<p>历史的改变：merge 保留了原始的提交哈希值和历史，而 rebase 会改变提交的哈希值（因为提交的上下文发生了改变）。</p>
</li>
<li>
<p>冲突解决的方式：rebase 可能需要在多个提交上反复解决相同的冲突，而 merge 则是一次性解决所有冲突。</p>
</li>
<li>
<p>最佳使用时机：如果你需要频繁地从一个长期存在的分支（如 main 或 develop）中获取最新的更改，rebase 是一个很好的选择，因为它避免了多余的合并提交。而 merge 更适合在最终整合长期分支时使用，因为它保留了分支之间的合并点和关系。</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="结论">结论<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#%E7%BB%93%E8%AE%BA" class="hash-link" aria-label="Direct link to 结论" title="Direct link to 结论" translate="no">​</a></h2>
<p>merge 和 rebase 都是处理分支间差异的强大工具，选择使用哪一个取决于你的具体需求、团队规范以及你希望维护的历史类型。rebase 对于维持一个清洁、线性的历史非常有效，而 merge 则提供了一个直观、真实的开发历史视图。在协作的环境中，理解并正确使用这两种方法对于维护一个健康、可管理的代码库至关重要。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rebase冲突">Rebase冲突<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#rebase%E5%86%B2%E7%AA%81" class="hash-link" aria-label="Direct link to Rebase冲突" title="Direct link to Rebase冲突" translate="no">​</a></h2>
<p>当您使用 rebase 将您的分支（例如，特性分支）放到 master 分支的最新提交之上时，如果 master 分支的最新提交修改了与您在特性分支中修改的相同的代码部分，就会出现冲突。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="处理rebase冲突">处理rebase冲突<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#%E5%A4%84%E7%90%86rebase%E5%86%B2%E7%AA%81" class="hash-link" aria-label="Direct link to 处理rebase冲突" title="Direct link to 处理rebase冲突" translate="no">​</a></h2>
<ul>
<li>当出现冲突时，Git会暂停rebase操作。</li>
<li>此时，你需要手动解决这些冲突。</li>
<li>解决冲突后，使用git add将更改标记为已解决。</li>
<li>然后，使用git rebase --continue继续rebase过程。</li>
<li>如果你决定不继续rebase，可以使用git rebase --abort回到原始状态。</li>
<li>记住，rebase是一个强大但复杂的工具。在处理共享分支时要特别小心，因为rebase会改变历史，可能会导致其他协作者的困惑或更多的合并冲突。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题-1">问题<a href="https://your-docusaurus-test-site.com/yiwen-blog-website/en/blog/git#%E9%97%AE%E9%A2%98-1" class="hash-link" aria-label="Direct link to 问题" title="Direct link to 问题" translate="no">​</a></h2>
<p>不要在公共分支rebase</p>]]></content:encoded>
        </item>
    </channel>
</rss>