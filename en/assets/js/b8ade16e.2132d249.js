"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[97635],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>l});var t=i(96540);const a={},o=t.createContext(a);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(o.Provider,{value:n},e.children)}},36489(e,n,i){i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>p,default:()=>v,frontMatter:()=>c,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"native/ios/IntegrationRn","title":"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee","description":"\u65b0\u6587\u6863","source":"@site/docs/native/ios/IntegrationRn.md","sourceDirName":"native/ios","slug":"/native/ios/IntegrationRn","permalink":"/yiwen-blog-website/en/docs/native/ios/IntegrationRn","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/native/ios/IntegrationRn.md","tags":[],"version":"current","lastUpdatedAt":1719273600000,"frontMatter":{"title":"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee","sidebar_label":"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee","date":"2024-06-25T00:00:00.000Z","last_update":{"date":"2024-06-25T00:00:00.000Z"}},"sidebar":"nativeSidebar","previous":{"title":"\u4f7f\u7528zPosition\u63a7\u5236z\u8f74\u5c42\u7ea7","permalink":"/yiwen-blog-website/en/docs/native/ios/uikit/zposition"},"next":{"title":"IOS\u6253\u5305","permalink":"/yiwen-blog-website/en/docs/native/ios/build"}}');var a=i(74848),o=i(28453);const s=i.p+"assets/images/ios_main1-7e0b554c65f14dc914f2518166172447.png",l=i.p+"assets/images/ios_main2-bfea9b7b3fde4f868a820c05383e0ec7.png",r=i.p+"assets/images/ios_main3-ffaf1cdd96d206914cf7ec4d7f325b84.png",d=i.p+"assets/images/ios_main4-ba1010ff5e3241046ec4d635043019f2.png",c={title:"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee",sidebar_label:"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee",date:new Date("2024-06-25T00:00:00.000Z"),last_update:{date:new Date("2024-06-25T00:00:00.000Z")}},p="ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee",h={},u=[{value:"<del>\u53c2\u8003\u6587\u6863</del>",id:"\u53c2\u8003\u6587\u6863",level:2},{value:"\u4f7f\u7528npm init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee",id:"\u4f7f\u7528npm-init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee",level:2},{value:"\u6dfb\u52a0package.json",id:"\u6dfb\u52a0packagejson",level:2},{value:"\u6dfb\u52a0ReactNative",id:"\u6dfb\u52a0reactnative",level:2},{value:"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react",id:"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react",level:2},{value:"\u6dfb\u52a0metro.config.js",id:"\u6dfb\u52a0metroconfigjs",level:2},{value:"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837",id:"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837",level:2},{value:"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee",id:"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee",level:2},{value:"\u5220\u9664Main storyboard\u76f8\u5173\u914d\u7f6e",id:"\u5220\u9664main-storyboard\u76f8\u5173\u914d\u7f6e",level:2},{value:"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269",id:"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269",level:2},{value:"pod init \u521d\u59cb\u5316podfile",id:"pod-init-\u521d\u59cb\u5316podfile",level:2},{value:"\u4fee\u6539podfile",id:"\u4fee\u6539podfile",level:2},{value:"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56",id:"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56",level:2},{value:"pod install\u5b89\u88c5\u4f9d\u8d56",id:"pod-install\u5b89\u88c5\u4f9d\u8d56",level:2},{value:"\u4fee\u6539Sandbox\u914d\u7f6e\uff0c\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519",id:"\u4fee\u6539sandbox\u914d\u7f6e\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519",level:2},{value:"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b",id:"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b",level:2},{value:"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1",id:"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1",level:2}];function g(e){const n={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"ios\u9879\u76ee\u96c6\u6210reactnative\u9879\u76ee",children:"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee"})}),"\n",(0,a.jsx)(n.h1,{id:"\u8be5\u6587\u6863\u5df2\u5e9f\u5f03",children:(0,a.jsx)(n.del,{children:"\u8be5\u6587\u6863\u5df2\u5e9f\u5f03"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"/yiwen-blog-website/en/docs/native/ios/ios_integative_rn",children:"\u65b0\u6587\u6863"})}),"\n",(0,a.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u6863",children:(0,a.jsx)(n.del,{children:"\u53c2\u8003\u6587\u6863"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://reactnative.dev/docs/integration-with-existing-apps",children:"Integration with Ios swift's Apps"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4f7f\u7528npm-init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee",children:"\u4f7f\u7528npm init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee"}),"\n",(0,a.jsx)(n.h2,{id:"\u6dfb\u52a0packagejson",children:"\u6dfb\u52a0package.json"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "name": "MyReactNativeApp",\n    "version": "0.0.1",\n    "private": true,\n    "scripts": {\n        "start": "yarn react-native start"\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u6dfb\u52a0reactnative",children:"\u6dfb\u52a0ReactNative"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn add react-native\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react",children:"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"yarn add react@version_printed_above\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6dfb\u52a0metroconfigjs",children:"\u6dfb\u52a0metro.config.js"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const { getDefaultConfig, mergeConfig } = require('@react-native/metro-config');\n\n/**\n * Metro configuration\n * https://facebook.github.io/metro/docs/configuration\n *\n * @type {import('metro-config').MetroConfig}\n */\nconst config = {};\n\nmodule.exports = mergeConfig(getDefaultConfig(__dirname), config);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837",children:"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837"}),"\n",(0,a.jsx)("img",{src:d,style:{width:400}}),"\n",(0,a.jsx)(n.h2,{id:"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee",children:"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee"}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528",(0,a.jsx)(n.code,{children:"Xcode"}),"\u521b\u5efa",(0,a.jsx)(n.code,{children:"storyboard"}),"\u7c7b\u578b\u7684",(0,a.jsx)(n.code,{children:"swift"}),"\u9879\u76ee\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u5220\u9664main-storyboard\u76f8\u5173\u914d\u7f6e",children:"\u5220\u9664Main storyboard\u76f8\u5173\u914d\u7f6e"}),"\n",(0,a.jsx)("img",{src:s,style:{width:600}}),"\n",(0,a.jsx)("img",{src:l,style:{width:600}}),"\n",(0,a.jsx)(n.h2,{id:"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269",children:"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-swift",children:'import UIKit\nimport React\n\n@main\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n    var window: UIWindow?\n\n    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n        let mockData:NSDictionary = ["scores":\n          [\n              ["name":"Alex", "value":"42"],\n              ["name":"Joel", "value":"10"]\n          ]\n        ]\n\n        let jsCodeLocation = URL(string: "http://127.0.0.1:8081/index.bundle?platform=ios")!\n          let rootView = RCTRootView(\n              bundleURL: jsCodeLocation,\n              moduleName: "RNHighScores",\n              initialProperties: mockData as [NSObject : AnyObject],\n              launchOptions: nil\n          )\n          let vc = UIViewController()\n          vc.view = rootView\n        self.window = UIWindow(frame: UIScreen.main.bounds)\n        window?.backgroundColor = .white\n        window!.rootViewController = vc\n        window!.makeKeyAndVisible()\n        return true\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"pod-init-\u521d\u59cb\u5316podfile",children:"pod init \u521d\u59cb\u5316podfile"}),"\n",(0,a.jsx)(n.h2,{id:"\u4fee\u6539podfile",children:"\u4fee\u6539podfile"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ruby",children:"# Resolve react_native_pods.rb with node to allow for hoisting\nrequire Pod::Executable.execute_command('node', ['-p',\n  'require.resolve(\n    \"react-native/scripts/react_native_pods.rb\",\n    {paths: [process.argv[1]]},\n  )', __dir__]).strip\n\nplatform :ios, min_ios_version_supported\nprepare_react_native_project!\n\n# If you are using a `react-native-flipper` your iOS build will fail when `NO_FLIPPER=1` is set.\n# because `react-native-flipper` depends on (FlipperKit,...) that will be excluded\n#\n# To fix this you can also exclude `react-native-flipper` using a `react-native.config.js`\n# ```js\n# module.exports = {\n#   dependencies: {\n#     ...(process.env.NO_FLIPPER ? { 'react-native-flipper': { platforms: { ios: null } } } : {}),\n# ```\nflipper_config = ENV['NO_FLIPPER'] == \"1\" ? FlipperConfiguration.disabled : FlipperConfiguration.enabled\n\nlinkage = ENV['USE_FRAMEWORKS']\nif linkage != nil\n  Pod::UI.puts \"Configuring Pod with #{linkage}ally linked Frameworks\".green\n  use_frameworks! :linkage => linkage.to_sym\nend\n\ntarget 'rnDemo1' do\n  config = use_native_modules!\n\n  # Flags change depending on the env values.\n  flags = get_default_flags()\n\n  use_react_native!(\n    :path => config[:reactNativePath],\n    # Hermes is now enabled by default. Disable by setting this flag to false.\n    :hermes_enabled => flags[:hermes_enabled],\n    :fabric_enabled => flags[:fabric_enabled],\n    # Enables Flipper.\n    #\n    # Note that if you have use_frameworks! enabled, Flipper will not work and\n    # you should disable the next line.\n    :flipper_configuration => flipper_config,\n    # An absolute path to your application root.\n    :app_path => \"#{Pod::Config.instance.installation_root}/..\"\n  )\n\n  post_install do |installer|\n    # https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L197-L202\n    react_native_post_install(\n      installer,\n      config[:reactNativePath],\n      :mac_catalyst_enabled => false\n    )\n    # m\u7cfb\u5217mac\u5fc5\u52a0\n    __apply_Xcode_12_5_M1_post_install_workaround(installer)\n  end\nend\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56",children:"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56"}),"\n",(0,a.jsx)(n.h2,{id:"pod-install\u5b89\u88c5\u4f9d\u8d56",children:"pod install\u5b89\u88c5\u4f9d\u8d56"}),"\n",(0,a.jsx)(n.h2,{id:"\u4fee\u6539sandbox\u914d\u7f6e\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519",children:"\u4fee\u6539Sandbox\u914d\u7f6e\uff0c\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519"}),"\n",(0,a.jsx)("img",{src:r,style:{width:600}}),"\n",(0,a.jsx)(n.h2,{id:"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b",children:"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b"}),"\n",(0,a.jsx)(n.h2,{id:"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1",children:"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"react-native start\n"})})]})}function v(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}}}]);