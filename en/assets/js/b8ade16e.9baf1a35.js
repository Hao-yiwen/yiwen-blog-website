"use strict";(self.webpackChunkyiwen_blog_website=self.webpackChunkyiwen_blog_website||[]).push([[4405],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),c=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=c(e.components);return i.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},f=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(t),f=a,m=d["".concat(s,".").concat(f)]||d[f]||u[f]||o;return t?i.createElement(m,r(r({ref:n},p),{},{components:t})):i.createElement(m,r({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=f;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:a,r[1]=l;for(var c=2;c<o;c++)r[c]=t[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}f.displayName="MDXCreateElement"},9191:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>p,default:()=>v,frontMatter:()=>c,metadata:()=>d,toc:()=>f});var i=t(7462),a=(t(7294),t(3905));const o=t.p+"assets/images/ios_main1-7e0b554c65f14dc914f2518166172447.png",r=t.p+"assets/images/ios_main2-bfea9b7b3fde4f868a820c05383e0ec7.png",l=t.p+"assets/images/ios_main3-ffaf1cdd96d206914cf7ec4d7f325b84.png",s=t.p+"assets/images/ios_main4-ba1010ff5e3241046ec4d635043019f2.png",c={sidebar_position:4},p="ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee",d={unversionedId:"native/ios/IntegrationRn",id:"native/ios/IntegrationRn",title:"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee",description:"\u53c2\u8003\u6587\u6863",source:"@site/docs/native/ios/IntegrationRn.md",sourceDirName:"native/ios",slug:"/native/ios/IntegrationRn",permalink:"/yiwen-blog-website/en/docs/native/ios/IntegrationRn",draft:!1,editUrl:"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/native/ios/IntegrationRn.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"nativeSidebar",previous:{title:"@FocusState\u8bf4\u660e",permalink:"/yiwen-blog-website/en/docs/native/ios/swiftui/focusState"},next:{title:"UIKit",permalink:"/yiwen-blog-website/en/docs/category/uikit"}},u={},f=[{value:"\u53c2\u8003\u6587\u6863",id:"\u53c2\u8003\u6587\u6863",level:2},{value:"\u4f7f\u7528npm init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee",id:"\u4f7f\u7528npm-init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee",level:2},{value:"\u6dfb\u52a0package.json",id:"\u6dfb\u52a0packagejson",level:2},{value:"\u6dfb\u52a0ReactNative",id:"\u6dfb\u52a0reactnative",level:2},{value:"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react",id:"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react",level:2},{value:"\u6dfb\u52a0metro.config.js",id:"\u6dfb\u52a0metroconfigjs",level:2},{value:"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837",id:"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837",level:2},{value:"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee",id:"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee",level:2},{value:"\u5220\u9664Main storyboard\u76f8\u5173\u914d\u7f6e",id:"\u5220\u9664main-storyboard\u76f8\u5173\u914d\u7f6e",level:2},{value:"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269",id:"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269",level:2},{value:"pod init \u521d\u59cb\u5316podfile",id:"pod-init-\u521d\u59cb\u5316podfile",level:2},{value:"\u4fee\u6539podfile",id:"\u4fee\u6539podfile",level:2},{value:"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56",id:"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56",level:2},{value:"pod install\u5b89\u88c5\u4f9d\u8d56",id:"pod-install\u5b89\u88c5\u4f9d\u8d56",level:2},{value:"\u4fee\u6539Sandbox\u914d\u7f6e\uff0c\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519",id:"\u4fee\u6539sandbox\u914d\u7f6e\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519",level:2},{value:"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b",id:"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b",level:2},{value:"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1",id:"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1",level:2}],m={toc:f},g="wrapper";function v(e){let{components:n,...t}=e;return(0,a.kt)(g,(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"ios\u9879\u76ee\u96c6\u6210reactnative\u9879\u76ee"},"ios\u9879\u76ee\u96c6\u6210ReactNative\u9879\u76ee"),(0,a.kt)("h2",{id:"\u53c2\u8003\u6587\u6863"},"\u53c2\u8003\u6587\u6863"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/integration-with-existing-apps"},"Integration with Ios swift's Apps")),(0,a.kt)("h2",{id:"\u4f7f\u7528npm-init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee"},"\u4f7f\u7528npm init\u521b\u5efa\u4e00\u4e2a\u9879\u76ee"),(0,a.kt)("h2",{id:"\u6dfb\u52a0packagejson"},"\u6dfb\u52a0package.json"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "MyReactNativeApp",\n    "version": "0.0.1",\n    "private": true,\n    "scripts": {\n        "start": "yarn react-native start"\n    }\n}\n')),(0,a.kt)("h2",{id:"\u6dfb\u52a0reactnative"},"\u6dfb\u52a0ReactNative"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add react-native\n")),(0,a.kt)("h2",{id:"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react"},"\u6839\u636e\u63d0\u793a\u4fe1\u606f\u6dfb\u52a0react"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn add react@version_printed_above\n")),(0,a.kt)("h2",{id:"\u6dfb\u52a0metroconfigjs"},"\u6dfb\u52a0metro.config.js"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const { getDefaultConfig, mergeConfig } = require('@react-native/metro-config');\n\n/**\n * Metro configuration\n * https://facebook.github.io/metro/docs/configuration\n *\n * @type {import('metro-config').MetroConfig}\n */\nconst config = {};\n\nmodule.exports = mergeConfig(getDefaultConfig(__dirname), config);\n")),(0,a.kt)("h2",{id:"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837"},"\u5c06\u9879\u76ee\u7ed3\u6784\u8bbe\u7f6e\u5982\u4e0b\u6a21\u6837"),(0,a.kt)("img",{src:s,style:{width:400}}),(0,a.kt)("h2",{id:"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee"},"\u5728ios\u6587\u4ef6\u5939\u521b\u5efa\u9879\u76ee"),(0,a.kt)("p",null,"\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"Xcode"),"\u521b\u5efa",(0,a.kt)("inlineCode",{parentName:"p"},"storyboard"),"\u7c7b\u578b\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"swift"),"\u9879\u76ee\u3002"),(0,a.kt)("h2",{id:"\u5220\u9664main-storyboard\u76f8\u5173\u914d\u7f6e"},"\u5220\u9664Main storyboard\u76f8\u5173\u914d\u7f6e"),(0,a.kt)("img",{src:o,style:{width:600}}),(0,a.kt)("img",{src:r,style:{width:600}}),(0,a.kt)("h2",{id:"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269"},"\u6302\u8f7dmetro\u6253\u5305\u540e\u7684\u4ea7\u7269"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-swift"},'import UIKit\nimport React\n\n@main\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n    var window: UIWindow?\n\n    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n        let mockData:NSDictionary = ["scores":\n          [\n              ["name":"Alex", "value":"42"],\n              ["name":"Joel", "value":"10"]\n          ]\n        ]\n\n        let jsCodeLocation = URL(string: "http://127.0.0.1:8081/index.bundle?platform=ios")!\n          let rootView = RCTRootView(\n              bundleURL: jsCodeLocation,\n              moduleName: "RNHighScores",\n              initialProperties: mockData as [NSObject : AnyObject],\n              launchOptions: nil\n          )\n          let vc = UIViewController()\n          vc.view = rootView\n        self.window = UIWindow(frame: UIScreen.main.bounds)\n        window?.backgroundColor = .white\n        window!.rootViewController = vc\n        window!.makeKeyAndVisible()\n        return true\n    }\n}\n')),(0,a.kt)("h2",{id:"pod-init-\u521d\u59cb\u5316podfile"},"pod init \u521d\u59cb\u5316podfile"),(0,a.kt)("h2",{id:"\u4fee\u6539podfile"},"\u4fee\u6539podfile"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ruby"},"# Resolve react_native_pods.rb with node to allow for hoisting\nrequire Pod::Executable.execute_command('node', ['-p',\n  'require.resolve(\n    \"react-native/scripts/react_native_pods.rb\",\n    {paths: [process.argv[1]]},\n  )', __dir__]).strip\n\nplatform :ios, min_ios_version_supported\nprepare_react_native_project!\n\n# If you are using a `react-native-flipper` your iOS build will fail when `NO_FLIPPER=1` is set.\n# because `react-native-flipper` depends on (FlipperKit,...) that will be excluded\n#\n# To fix this you can also exclude `react-native-flipper` using a `react-native.config.js`\n# ```js\n# module.exports = {\n#   dependencies: {\n#     ...(process.env.NO_FLIPPER ? { 'react-native-flipper': { platforms: { ios: null } } } : {}),\n# ```\nflipper_config = ENV['NO_FLIPPER'] == \"1\" ? FlipperConfiguration.disabled : FlipperConfiguration.enabled\n\nlinkage = ENV['USE_FRAMEWORKS']\nif linkage != nil\n  Pod::UI.puts \"Configuring Pod with #{linkage}ally linked Frameworks\".green\n  use_frameworks! :linkage => linkage.to_sym\nend\n\ntarget 'rnDemo1' do\n  config = use_native_modules!\n\n  # Flags change depending on the env values.\n  flags = get_default_flags()\n\n  use_react_native!(\n    :path => config[:reactNativePath],\n    # Hermes is now enabled by default. Disable by setting this flag to false.\n    :hermes_enabled => flags[:hermes_enabled],\n    :fabric_enabled => flags[:fabric_enabled],\n    # Enables Flipper.\n    #\n    # Note that if you have use_frameworks! enabled, Flipper will not work and\n    # you should disable the next line.\n    :flipper_configuration => flipper_config,\n    # An absolute path to your application root.\n    :app_path => \"#{Pod::Config.instance.installation_root}/..\"\n  )\n\n  post_install do |installer|\n    # https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L197-L202\n    react_native_post_install(\n      installer,\n      config[:reactNativePath],\n      :mac_catalyst_enabled => false\n    )\n    # m\u7cfb\u5217mac\u5fc5\u52a0\n    __apply_Xcode_12_5_M1_post_install_workaround(installer)\n  end\nend\n")),(0,a.kt)("h2",{id:"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56"},"\u5916\u5c42\u7ed3\u6784\u4f7f\u7528yarn\u5b89\u88c5\u4f9d\u8d56"),(0,a.kt)("h2",{id:"pod-install\u5b89\u88c5\u4f9d\u8d56"},"pod install\u5b89\u88c5\u4f9d\u8d56"),(0,a.kt)("h2",{id:"\u4fee\u6539sandbox\u914d\u7f6e\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519"},"\u4fee\u6539Sandbox\u914d\u7f6e\uff0c\u5426\u5219\u8fd0\u884c\u65f6\u5019\u4f1a\u62a5\u9519"),(0,a.kt)("img",{src:l,style:{width:600}}),(0,a.kt)("h2",{id:"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b"},"\u4f7f\u7528xcode\u6253\u5305\u58f3\u5de5\u7a0b"),(0,a.kt)("h2",{id:"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1"},"\u5916\u5c42\u7ed3\u6784\u8fd0\u884cmetro\u670d\u52a1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"react-native start\n")))}v.isMDXComponent=!0}}]);