"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[12189],{28453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>r});var t=a(96540);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}},98876:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"backend/java/ali_pay","title":"\u652f\u4ed8\u5b9d\u652f\u4ed8","description":"\u6587\u6863","source":"@site/docs/backend/java/ali_pay.md","sourceDirName":"backend/java","slug":"/backend/java/ali_pay","permalink":"/yiwen-blog-website/en/docs/backend/java/ali_pay","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/backend/java/ali_pay.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"backendSidebar","previous":{"title":"\u5fae\u4fe1\u626b\u7801\u767b\u5f55","permalink":"/yiwen-blog-website/en/docs/backend/java/wechat_login"},"next":{"title":"java\u4e2d\u7684\u7c7b","permalink":"/yiwen-blog-website/en/docs/backend/java/class"}}');var i=a(74848),o=a(28453);const s={sidebar_position:9},r="\u652f\u4ed8\u5b9d\u652f\u4ed8",l={},c=[{value:"\u6587\u6863",id:"\u6587\u6863",level:2},{value:"\u8bf4\u660e",id:"\u8bf4\u660e",level:2},{value:"\u4f9d\u8d56\u8bf4\u660e",id:"\u4f9d\u8d56\u8bf4\u660e",level:2},{value:"\u793a\u4f8b\u4ee3\u7801",id:"\u793a\u4f8b\u4ee3\u7801",level:2},{value:"\u5185\u7f51\u7a7f\u900f\u5de5\u5177",id:"\u5185\u7f51\u7a7f\u900f\u5de5\u5177",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u652f\u4ed8\u5b9d\u652f\u4ed8",children:"\u652f\u4ed8\u5b9d\u652f\u4ed8"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6587\u6863",children:"\u6587\u6863"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://open.alipay.com/develop/sandbox/account",children:"\u652f\u4ed8\u5b9d\u652f\u4ed8\u6587\u6863"})}),"\n",(0,i.jsx)(n.h2,{id:"\u8bf4\u660e",children:"\u8bf4\u660e"}),"\n",(0,i.jsxs)(n.p,{children:["\u652f\u4ed8\u5b9d\u63d0\u4f9b\u4e86\u6c99\u7bb1\u652f\u4ed8\u5b9d\u4f9b\u5f00\u53d1\u8005\u5f00\u53d1,\u5728\u6d4b\u8bd5\u73af\u5883\u5f00\u53d1\u8005\u53ef\u901a\u8fc7\u6c99\u7bb1app\u8fdb\u884c\u5f00\u53d1\u8c03\u8bd5\uff0c\u4e3a\u4e86\u8fdb\u4e00\u6b65\u964d\u4f4e\u5f00\u53d1\u8005\u5f00\u53d1\u6210\u672c\uff0c\u5f00\u53d1\u8005\u5728\u6d4b\u8bd5\u65f6\u53ef\u4ee5\u6a21\u62df\u624b\u673a\u7f51\u9875\u6d4b\u8bd5\uff0c\u540c\u6837\u53ef\u6a21\u62df\u6574\u4e2a\u6d4b\u8bd5\u6d41\u7a0b\u3002\n",(0,i.jsx)(n.a,{href:"https://opendocs.alipay.com/common/07enlc",children:"\u6c99\u7bb1\u652f\u4ed8\u5b9d"})]}),"\n",(0,i.jsx)(n.h2,{id:"\u4f9d\u8d56\u8bf4\u660e",children:"\u4f9d\u8d56\u8bf4\u660e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"\x3c!-- \u652f\u4ed8\u5b9dSDK --\x3e\n<dependency>\n    <groupId>com.alipay.sdk</groupId>\n    <artifactId>alipay-sdk-java</artifactId>\n    <version>3.7.73.ALL</version>\n</dependency>\n\n\x3c!-- \u652f\u4ed8\u5b9dSDK\u4f9d\u8d56\u7684\u65e5\u5fd7 --\x3e\n<dependency>\n    <groupId>commons-logging</groupId>\n    <artifactId>commons-logging</artifactId>\n    <version>1.2</version>\n</dependency>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u793a\u4f8b\u4ee3\u7801",children:"\u793a\u4f8b\u4ee3\u7801"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@GetMapping("/requestpay")\npublic void requestpay(String payNo, HttpServletResponse httpResponse) throws IOException, AlipayApiException {\n    // \u8bf7\u6c42\u652f\u4ed8\u5b9d\u53bb\u4e0b\u5355\n    AlipayClient alipayClient = new DefaultAlipayClient(AlipayConfig.URL, APP_ID, APP_PRIVATE_KEY, AlipayConfig.FORMAT, AlipayConfig.CHARSET, ALIPAY_PUBLIC_KEY, AlipayConfig.SIGNTYPE);\n    AlipayTradeWapPayRequest alipayRequest = new AlipayTradeWapPayRequest();//\u521b\u5efaAPI\u5bf9\u5e94\u7684request\n    //        alipayRequest.setReturnUrl("http://domain.com/CallBack/return_url.jsp");\n    alipayRequest.setNotifyUrl(" https://e099-101-88-68-235.ngrok.io/orders/paynotify");//\u5728\u516c\u5171\u53c2\u6570\u4e2d\u8bbe\u7f6e\u56de\u8df3\u548c\u901a\u77e5\u5730\u5740\n    alipayRequest.setBizContent("{" +\n            "    \\"out_trade_no\\":\\"" + payNo + "\\"," +\n            "    \\"total_amount\\":" + payRecordByPayno.getTotalPrice() + "," +\n            "    \\"subject\\":\\"" + payRecordByPayno.getOrderName() + "\\"," +\n            "    \\"product_code\\":\\"QUICK_MSECURITY_PAY\\"" +\n            "  }");//\u586b\u5145\u4e1a\u52a1\u53c2\u6570\n    String form = alipayClient.pageExecute(alipayRequest).getBody(); //\u8c03\u7528SDK\u751f\u6210\u8868\u5355\n    httpResponse.setContentType("text/html;charset=" + AlipayConfig.CHARSET);\n    httpResponse.getWriter().write(form);//\u76f4\u63a5\u5c06\u5b8c\u6574\u7684\u8868\u5355html\u8f93\u51fa\u5230\u9875\u9762\n    httpResponse.getWriter().flush();\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u5185\u7f51\u7a7f\u900f\u5de5\u5177",children:"\u5185\u7f51\u7a7f\u900f\u5de5\u5177"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u626b\u7801\u767b\u5f55\u6216\u8005\u652f\u4ed8\u573a\u666f\uff0c\u9700\u8981\u7b2c\u4e09\u65b9\u670d\u52a1\u56de\u8c03\u672c\u5730\u670d\u52a1\uff0c\u6240\u4ee5\u6b64\u65f6\u9700\u8981\u5185\u7f51\u7a7f\u900f\u6765\u4f9b\u5916\u90e8\u670d\u52a1\u8c03\u7528\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"brew install ngrok/ngrok/ngrok\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);