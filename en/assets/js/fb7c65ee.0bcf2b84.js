"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[6548],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(96540);const s={},i=a.createContext(s);function o(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:n},e.children)}},93681:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"native/android/android_action_github","title":"Android\u9879\u76ee\u5728github action\u4e2d\u7684\u6253\u5305","description":"\u4eca\u5929\u5fc3\u8840\u6765\u6f6e\uff0c\u60f3\u8981\u5728github action\u4e2d\u8fdb\u884candroid\u6253\u5305\uff0c\u7136\u540e\u5c06\u6253\u5305\u4ea7\u7269\u4e0a\u4f20\u5230github \u4ed3\u5e93\u9875\u9762\u7684release\u4e2d\uff0c\u7ecf\u8fc7\u67e5\u8be2\u548c\u4fee\u8865\uff0c\u8fd9\u4e2a\u662f\u4e00\u4e2a\u53ef\u7528\u7248\u672c\u3002","source":"@site/docs/native/android/android_action_github.md","sourceDirName":"native/android","slug":"/native/android/android_action_github","permalink":"/yiwen-blog-website/en/docs/native/android/android_action_github","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/native/android/android_action_github.md","tags":[],"version":"current","frontMatter":{},"sidebar":"nativeSidebar","previous":{"title":"Android studio\u4f7f\u7528","permalink":"/yiwen-blog-website/en/docs/native/android/androidStudioUse"},"next":{"title":"gravity\u5c5e\u6027\u89e3\u91ca","permalink":"/yiwen-blog-website/en/docs/native/android/android_gravity"}}');var s=t(74848),i=t(28453);const o={},r="Android\u9879\u76ee\u5728github action\u4e2d\u7684\u6253\u5305",d={},u=[];function c(e){const n={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"android\u9879\u76ee\u5728github-action\u4e2d\u7684\u6253\u5305",children:"Android\u9879\u76ee\u5728github action\u4e2d\u7684\u6253\u5305"})}),"\n",(0,s.jsx)(n.p,{children:"\u4eca\u5929\u5fc3\u8840\u6765\u6f6e\uff0c\u60f3\u8981\u5728github action\u4e2d\u8fdb\u884candroid\u6253\u5305\uff0c\u7136\u540e\u5c06\u6253\u5305\u4ea7\u7269\u4e0a\u4f20\u5230github \u4ed3\u5e93\u9875\u9762\u7684release\u4e2d\uff0c\u7ecf\u8fc7\u67e5\u8be2\u548c\u4fee\u8865\uff0c\u8fd9\u4e2a\u662f\u4e00\u4e2a\u53ef\u7528\u7248\u672c\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"name: Android CI\n\non:\n    push:\n        tags:\n            - 'v*' # \u5f53\u63a8\u9001\u7b26\u5408 'v*' \u683c\u5f0f\u7684\u6807\u7b7e\u65f6\u89e6\u53d1\n\njobs:\n    build:\n        runs-on: ubuntu-latest\n\n        steps:\n            - uses: actions/checkout@v2\n\n            - name: Set up JDK 17\n              uses: actions/setup-java@v2\n              with:\n                  java-version: '17'\n                  distribution: 'temurin'\n\n            - name: Grant execute permission for gradlew\n              run: chmod +x ./gradlew\n\n            - name: Build Debug APK\n              run: ./gradlew assembleDebug\n\n            - name: Build Release APK\n              run: ./gradlew assembleRelease\n\n            - name: Extract Git Tag for Version\n              id: tag\n              run: echo \"::set-output name=version::$(git describe --tags --abbrev=0)\"\n\n            - name: Create Release\n              id: create_release\n              uses: actions/create-release@v1\n              env:\n                  GITHUB_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}\n              with:\n              # \u8bbe\u7f6etag_name\u548crelease_name\n                  tag_name: ${{ steps.tag.outputs.version }}\n                  release_name: ${{ steps.tag.outputs.version }}\n                  draft: false\n                  prerelease: false\n\n            - name: Upload APK to Release\n              uses: actions/upload-release-asset@v1\n              env:\n                  GITHUB_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}\n              with:\n                  upload_url: ${{ steps.create_release.outputs.upload_url }}\n                  asset_path: ./app/build/outputs/apk/debug/app-debug.apk\n                  asset_name: app-debug.apk\n                  asset_content_type: application/vnd.android.package-archive\n\n            - name: Upload Release APK to Release\n              uses: actions/upload-release-asset@v1\n              env:\n                  GITHUB_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}\n              with:\n                  upload_url: ${{ steps.create_release.outputs.upload_url }}\n                  asset_path: ./app/build/outputs/apk/release/app-release.apk\n                  asset_name: app-release.apk\n                  asset_content_type: application/vnd.android.package-archive\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);