"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[51268],{26824:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>m});const l=JSON.parse('{"id":"ai/architectures/transformer/ppo-training-guide","title":"PPO \u8fd1\u7aef\u7b56\u7565\u4f18\u5316\u8bad\u7ec3\u6307\u5357","description":"\u6458\u8981\uff1aPPO\uff08Proximal Policy Optimization\uff0c\u8fd1\u7aef\u7b56\u7565\u4f18\u5316\uff09\u662f OpenAI \u4e8e 2017 \u5e74\u63d0\u51fa\u7684\u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5\u3002\u5982\u679c\u8bf4 DPO \u662f\u73b0\u5728\u7684\\"\u5f53\u7ea2\u70b8\u5b50\u9e21\\"\uff0c\u90a3 PPO \u5c31\u662f\u6253\u9020\u4e86 ChatGPT \u5e1d\u56fd\u7684\\"\u5f00\u56fd\u5143\u52cb\\"\u3002\u76f4\u5230\u4eca\u5929\uff0c\u5c3d\u7ba1 DPO \u6d41\u884c\uff0c\u4f46\u5982\u679c\u4f60\u60f3\u8bad\u7ec3\u4e00\u4e2a\u903b\u8f91\u63a8\u7406\u80fd\u529b\u6781\u5f3a\uff08\u5982 OpenAI o1, DeepSeek-R1\uff09\u7684\u6a21\u578b\uff0cPPO \u4f9d\u7136\u662f\u7ed5\u4e0d\u8fc7\u53bb\u7684\u9ad8\u5c71\u3002","source":"@site/docs/ai/architectures/transformer/ppo-training-guide.md","sourceDirName":"ai/architectures/transformer","slug":"/ai/architectures/transformer/ppo-training-guide","permalink":"/yiwen-blog-website/docs/ai/architectures/transformer/ppo-training-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/ai/architectures/transformer/ppo-training-guide.md","tags":[{"inline":true,"label":"PPO","permalink":"/yiwen-blog-website/docs/tags/ppo"},{"inline":true,"label":"RLHF","permalink":"/yiwen-blog-website/docs/tags/rlhf"},{"inline":true,"label":"\u5f3a\u5316\u5b66\u4e60","permalink":"/yiwen-blog-website/docs/tags/\u5f3a\u5316\u5b66\u4e60"},{"inline":true,"label":"LLM\u5bf9\u9f50","permalink":"/yiwen-blog-website/docs/tags/llm\u5bf9\u9f50"},{"inline":true,"label":"\u5fae\u8c03","permalink":"/yiwen-blog-website/docs/tags/\u5fae\u8c03"},{"inline":true,"label":"DPO","permalink":"/yiwen-blog-website/docs/tags/dpo"}],"version":"current","lastUpdatedAt":1767009643000,"sidebarPosition":26,"frontMatter":{"title":"PPO \u8fd1\u7aef\u7b56\u7565\u4f18\u5316\u8bad\u7ec3\u6307\u5357","sidebar_position":26,"tags":["PPO","RLHF","\u5f3a\u5316\u5b66\u4e60","LLM\u5bf9\u9f50","\u5fae\u8c03","DPO"]},"sidebar":"aiSidebar","previous":{"title":"GRPO \u7ec4\u76f8\u5bf9\u7b56\u7565\u4f18\u5316\u8be6\u89e3","permalink":"/yiwen-blog-website/docs/ai/architectures/transformer/grpo-training-guide"},"next":{"title":"\u6ce8\u610f\u529b\u673a\u5236\u672c\u8d28","permalink":"/yiwen-blog-website/docs/ai/architectures/transformer/attention-mechanism-explained"}}');var a=n(74848),t=n(28453);const i={title:"PPO \u8fd1\u7aef\u7b56\u7565\u4f18\u5316\u8bad\u7ec3\u6307\u5357",sidebar_position:26,tags:["PPO","RLHF","\u5f3a\u5316\u5b66\u4e60","LLM\u5bf9\u9f50","\u5fae\u8c03","DPO"]},r="PPO (Proximal Policy Optimization)",c={},m=[{value:"1. \u6838\u5fc3\u76f4\u89c9\uff1a\u4e3a\u4ec0\u4e48\u8981\u53d1\u660e PPO\uff1f",id:"1-\u6838\u5fc3\u76f4\u89c9\u4e3a\u4ec0\u4e48\u8981\u53d1\u660e-ppo",level:2},{value:"2. \u6838\u5fc3\u673a\u5236\uff1aPPO \u5230\u5e95\u505a\u4e86\u4ec0\u4e48\uff1f\uff08\u8fdb\u9636\u7248\uff09",id:"2-\u6838\u5fc3\u673a\u5236ppo-\u5230\u5e95\u505a\u4e86\u4ec0\u4e48\u8fdb\u9636\u7248",level:2},{value:"2.1 \u91cd\u8981\u7684\u6bd4\u7387\uff08Ratio\uff09",id:"21-\u91cd\u8981\u7684\u6bd4\u7387ratio",level:3},{value:"2.2 \u526a\u88c1\uff08Clipping\uff09\u2014\u2014 PPO \u7684\u7075\u9b42",id:"22-\u526a\u88c1clipping-ppo-\u7684\u7075\u9b42",level:3},{value:"2.3 PPO \u7684\u76ee\u6807\u51fd\u6570",id:"23-ppo-\u7684\u76ee\u6807\u51fd\u6570",level:3},{value:"3. \u5b9e\u6218\u6d41\u7a0b\uff1aPPO \u5728 LLM \u8bad\u7ec3\u4e2d\u662f\u600e\u4e48\u8dd1\u7684\uff1f",id:"3-\u5b9e\u6218\u6d41\u7a0bppo-\u5728-llm-\u8bad\u7ec3\u4e2d\u662f\u600e\u4e48\u8dd1\u7684",level:2},{value:"3.1 \u821e\u53f0\u4e0a\u7684\u56db\u4e2a\u89d2\u8272",id:"31-\u821e\u53f0\u4e0a\u7684\u56db\u4e2a\u89d2\u8272",level:3},{value:"3.2 \u8bad\u7ec3\u5faa\u73af\uff08Step-by-Step\uff09",id:"32-\u8bad\u7ec3\u5faa\u73afstep-by-step",level:3},{value:"Step 1: \u751f\u6210 (Rollout)",id:"step-1-\u751f\u6210-rollout",level:4},{value:"Step 2: \u6253\u5206 (Evaluation)",id:"step-2-\u6253\u5206-evaluation",level:4},{value:"Step 3: \u8ba1\u7b97\u4f18\u52bf (Advantage Estimation)",id:"step-3-\u8ba1\u7b97\u4f18\u52bf-advantage-estimation",level:4},{value:"Step 4: \u66f4\u65b0 (Optimization via PPO)",id:"step-4-\u66f4\u65b0-optimization-via-ppo",level:4},{value:"4. \u6838\u5fc3\u4ee3\u7801\u5b9e\u73b0 (PyTorch)",id:"4-\u6838\u5fc3\u4ee3\u7801\u5b9e\u73b0-pytorch",level:2},{value:"5. PPO \u7684\u4f18\u7f3a\u70b9\u603b\u7ed3",id:"5-ppo-\u7684\u4f18\u7f3a\u70b9\u603b\u7ed3",level:2},{value:"5.1 PPO \u7684\u4f18\u70b9\uff08\u4e3a\u4ec0\u4e48\u5b83\u662f\u7687\u51a0\u4e0a\u7684\u660e\u73e0\uff09",id:"51-ppo-\u7684\u4f18\u70b9\u4e3a\u4ec0\u4e48\u5b83\u662f\u7687\u51a0\u4e0a\u7684\u660e\u73e0",level:3},{value:"5.2 PPO \u7684\u7f3a\u70b9\uff08\u4e3a\u4ec0\u4e48\u5927\u5bb6\u60f3\u6dd8\u6c70\u5b83\uff09",id:"52-ppo-\u7684\u7f3a\u70b9\u4e3a\u4ec0\u4e48\u5927\u5bb6\u60f3\u6dd8\u6c70\u5b83",level:3},{value:"6. PPO vs DPO \u5bf9\u6bd4",id:"6-ppo-vs-dpo-\u5bf9\u6bd4",level:2},{value:"7. \u5b9e\u6218\u5efa\u8bae",id:"7-\u5b9e\u6218\u5efa\u8bae",level:2},{value:"7.1 \u4ec0\u4e48\u65f6\u5019\u7528 PPO\uff1f",id:"71-\u4ec0\u4e48\u65f6\u5019\u7528-ppo",level:3},{value:"7.2 \u4ec0\u4e48\u65f6\u5019\u7528 DPO\uff1f",id:"72-\u4ec0\u4e48\u65f6\u5019\u7528-dpo",level:3},{value:"7.3 \u8d85\u53c2\u6570\u5efa\u8bae",id:"73-\u8d85\u53c2\u6570\u5efa\u8bae",level:3},{value:"8. \u603b\u7ed3",id:"8-\u603b\u7ed3",level:2}];function h(s){const e={annotation:"annotation",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mover:"mover",mrow:"mrow",msub:"msub",msup:"msup",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...s.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"ppo-proximal-policy-optimization",children:"PPO (Proximal Policy Optimization)"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u6458\u8981"}),'\uff1aPPO\uff08Proximal Policy Optimization\uff0c\u8fd1\u7aef\u7b56\u7565\u4f18\u5316\uff09\u662f OpenAI \u4e8e 2017 \u5e74\u63d0\u51fa\u7684\u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5\u3002\u5982\u679c\u8bf4 DPO \u662f\u73b0\u5728\u7684"\u5f53\u7ea2\u70b8\u5b50\u9e21"\uff0c\u90a3 PPO \u5c31\u662f\u6253\u9020\u4e86 ChatGPT \u5e1d\u56fd\u7684"\u5f00\u56fd\u5143\u52cb"\u3002\u76f4\u5230\u4eca\u5929\uff0c\u5c3d\u7ba1 DPO \u6d41\u884c\uff0c\u4f46\u5982\u679c\u4f60\u60f3\u8bad\u7ec3\u4e00\u4e2a\u903b\u8f91\u63a8\u7406\u80fd\u529b\u6781\u5f3a\uff08\u5982 OpenAI o1, DeepSeek-R1\uff09\u7684\u6a21\u578b\uff0cPPO \u4f9d\u7136\u662f\u7ed5\u4e0d\u8fc7\u53bb\u7684\u9ad8\u5c71\u3002']}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["\u672c\u6587\u5c06\u4ece\u4e09\u4e2a\u5c42\u9762\u6765\u8bb2\u89e3 PPO\uff1a",(0,a.jsx)(e.strong,{children:"\u5b83\u7684\u6838\u5fc3\u76f4\u89c9\uff08\u901a\u4fd7\u7248\uff09"}),"\u3001",(0,a.jsx)(e.strong,{children:"\u5b83\u7684\u6570\u5b66\u9b54\u6cd5\uff08\u8fdb\u9636\u7248\uff09"}),"\uff0c\u4ee5\u53ca",(0,a.jsx)(e.strong,{children:"\u5b83\u5728 LLM \u91cc\u7684\u5b9e\u9645\u64cd\u4f5c\uff08\u5b9e\u6218\u7248\uff09"}),"\u3002"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"1-\u6838\u5fc3\u76f4\u89c9\u4e3a\u4ec0\u4e48\u8981\u53d1\u660e-ppo",children:"1. \u6838\u5fc3\u76f4\u89c9\uff1a\u4e3a\u4ec0\u4e48\u8981\u53d1\u660e PPO\uff1f"}),"\n",(0,a.jsxs)(e.p,{children:["\u5728 PPO \u51fa\u73b0\u4e4b\u524d\uff0c\u5f3a\u5316\u5b66\u4e60\uff08RL\uff09\u4e3b\u8981\u9762\u4e34\u4e00\u4e2a\u5de8\u5927\u7684\u75db\u70b9\uff1a",(0,a.jsx)(e.strong,{children:"\u6b65\u5b50\u8fc8\u591a\u5927\u5408\u9002\uff1f"})]}),"\n",(0,a.jsx)(e.p,{children:"\u60f3\u8c61\u4f60\u5728\u8499\u7740\u773c\u775b\u8d70\u94a2\u4e1d\uff08\u8bad\u7ec3\u6a21\u578b\uff09\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u6b65\u5b50\u592a\u5c0f\uff08\u5b66\u4e60\u7387\u4f4e\uff09\uff1a"})," \u4f60\u8d70\u5f97\u592a\u6162\uff0c\u8bad\u7ec3\u51e0\u4e07\u5e74\u90fd\u4e0d\u6536\u655b\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u6b65\u5b50\u592a\u5927\uff08\u5b66\u4e60\u7387\u9ad8\uff09\uff1a"})," \u4f60\u8bd5\u56fe\u6839\u636e\u4e0a\u4e00\u6b65\u7684\u7ecf\u9a8c\u8fc8\u4e00\u5927\u6b65\uff0c\u7ed3\u679c\u76f4\u63a5\u6389\u4e0b\u60ac\u5d16\uff08\u6a21\u578b\u53c2\u6570\u5d29\u574f\uff0c\u8f93\u51fa\u4e71\u7801\uff09\uff0c\u800c\u4e14\u518d\u4e5f\u722c\u4e0d\u4e0a\u6765\u4e86\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"TRPO (PPO \u7684\u524d\u8eab)"}),' \u8bd5\u56fe\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5b83\u7528\u590d\u6742\u7684\u6570\u5b66\u7ea6\u675f\uff08\u5e93\u5c14\u8d1d\u514b-\u83b1\u5e03\u52d2\u6563\u5ea6\uff0cKL Divergence\uff09\u5212\u5b9a\u4e00\u4e2a"\u5b89\u5168\u533a\u57df"\uff0c\u544a\u8bc9\u4f60"\u6bcf\u4e00\u6b65\u53ea\u80fd\u5728\u5708\u5b50\u91cc\u52a8"\u3002\u6548\u679c\u5f88\u597d\uff0c\u4f46',(0,a.jsx)(e.strong,{children:"\u8ba1\u7b97\u91cf\u5927\u5230\u4ee4\u4eba\u53d1\u6307"}),"\u3002"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"PPO \u7684\u51fa\u73b0\uff1a"})}),"\n",(0,a.jsxs)(e.p,{children:['PPO \u7ee7\u627f\u4e86"\u5b89\u5168\u533a\u57df"\u7684\u601d\u60f3\uff0c\u4f46\u5b83\u7528\u4e86\u4e00\u4e2a\u6781\u7b80\u7684\u5de5\u7a0b\u6280\u5de7\uff08',(0,a.jsx)(e.strong,{children:"Clipping / \u88c1\u526a"}),"\uff09\u66ff\u4ee3\u4e86\u590d\u6742\u7684\u6570\u5b66\u8ba1\u7b97\u3002"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"PPO \u7684\u6f5c\u53f0\u8bcd\u662f\uff1a"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"\"\u4f60\u53ef\u4ee5\u6539\u8fdb\uff0c\u4f46\u4e0d\u8981\u6539\u5f97\u79bb\u521a\u624d\u7684\u81ea\u5df1\u592a\u8fdc\u3002\u5982\u679c\u4f60\u8fd9\u6b65\u6539\u5f97\u592a\u731b\u4e86\uff0c\u6211\u5c31\u628a\u591a\u51fa\u6765\u7684\u90e8\u5206'\u526a\u6389'\u4e0d\u7b97\uff0c\u5f3a\u884c\u8ba9\u4f60\u6162\u4e0b\u6765\u3002\""}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"2-\u6838\u5fc3\u673a\u5236ppo-\u5230\u5e95\u505a\u4e86\u4ec0\u4e48\u8fdb\u9636\u7248",children:"2. \u6838\u5fc3\u673a\u5236\uff1aPPO \u5230\u5e95\u505a\u4e86\u4ec0\u4e48\uff1f\uff08\u8fdb\u9636\u7248\uff09"}),"\n",(0,a.jsxs)(e.p,{children:["PPO \u7684\u6838\u5fc3\u662f\u4e00\u4e2a\u7279\u6b8a\u7684",(0,a.jsx)(e.strong,{children:"\u635f\u5931\u51fd\u6570\uff08Loss Function\uff09"}),"\u3002\u5b83\u7684\u9b54\u6cd5\u5728\u4e8e\u63a7\u5236**\u65b0\u7b56\u7565\uff08New Policy\uff09",(0,a.jsx)(e.strong,{children:"\u548c"}),"\u65e7\u7b56\u7565\uff08Old Policy\uff09**\u4e4b\u95f4\u7684\u5dee\u5f02\u3002"]}),"\n",(0,a.jsx)(e.h3,{id:"21-\u91cd\u8981\u7684\u6bd4\u7387ratio",children:"2.1 \u91cd\u8981\u7684\u6bd4\u7387\uff08Ratio\uff09"}),"\n",(0,a.jsx)(e.p,{children:"PPO \u4f1a\u8ba1\u7b97\u4e00\u4e2a\u6bd4\u7387\uff1a"}),"\n",(0,a.jsx)(e.span,{className:"katex-display",children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"\u03b8"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsxs)(e.mfrac,{children:[(0,a.jsx)(e.mtext,{children:"\u65b0\u7b56\u7565\u751f\u6210\u8be5\u52a8\u4f5c\u7684\u6982\u7387"}),(0,a.jsx)(e.mtext,{children:"\u65e7\u7b56\u7565\u751f\u6210\u8be5\u52a8\u4f5c\u7684\u6982\u7387"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r_t(\\theta) = \\frac{\\text{\u65b0\u7b56\u7565\u751f\u6210\u8be5\u52a8\u4f5c\u7684\u6982\u7387}}{\\text{\u65e7\u7b56\u7565\u751f\u6210\u8be5\u52a8\u4f5c\u7684\u6982\u7387}}"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0278em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"2.0463em",verticalAlign:"-0.686em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(e.span,{className:"mfrac",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,a.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"mord",children:(0,a.jsx)(e.span,{className:"mord text",children:(0,a.jsx)(e.span,{className:"mord cjk_fallback",children:"\u65e7\u7b56\u7565\u751f\u6210\u8be5\u52a8\u4f5c\u7684\u6982\u7387"})})})]}),(0,a.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"mord",children:(0,a.jsx)(e.span,{className:"mord text",children:(0,a.jsx)(e.span,{className:"mord cjk_fallback",children:"\u65b0\u7b56\u7565\u751f\u6210\u8be5\u52a8\u4f5c\u7684\u6982\u7387"})})})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.686em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u5982\u679c ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r = 1"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"})]})]})]}),"\uff0c\u8bf4\u660e\u6ca1\u53d8\u5316\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:["\u5982\u679c ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{children:">"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r > 1"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.5782em",verticalAlign:"-0.0391em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:">"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"})]})]})]}),"\uff0c\u8bf4\u660e\u65b0\u7b56\u7565\u89c9\u5f97\u8fd9\u4e2a\u52a8\u4f5c\u6bd4\u65e7\u7b56\u7565\u66f4\u597d\uff08\u66f4\u503e\u5411\u4e8e\u505a\u8fd9\u4e2a\u52a8\u4f5c\uff09\u3002"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"22-\u526a\u88c1clipping-ppo-\u7684\u7075\u9b42",children:"2.2 \u526a\u88c1\uff08Clipping\uff09\u2014\u2014 PPO \u7684\u7075\u9b42"}),"\n",(0,a.jsxs)(e.p,{children:["\u5728\u66f4\u65b0\u6a21\u578b\u53c2\u6570\u65f6\uff0cPPO \u4f1a\u770b\u8fd9\u4e2a ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"r"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"})]})})]})," \u503c\u3002\u5b83\u8bbe\u5b9a\u4e86\u4e00\u4e2a\u8303\u56f4\uff0c\u901a\u5e38\u662f ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"\u2212"}),(0,a.jsx)(e.mi,{children:"\u03f5"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mi,{children:"\u03f5"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[1-\\epsilon, 1+\\epsilon]"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})]})]}),"\uff08\u6bd4\u5982 ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"\u03f5"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\epsilon"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"})]})})]})," \u662f 0.2\uff0c\u8303\u56f4\u5c31\u662f 0.8 \u5230 1.2\uff09\u3002"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u60c5\u51b5 A\uff1a"})," \u6a21\u578b\u505a\u4e86\u4e00\u4e2a\u52a8\u4f5c\uff0c\u5f97\u5230\u4e86",(0,a.jsx)(e.strong,{children:"\u6b63\u5411\u5956\u52b1"}),"\uff08\u505a\u5f97\u597d\uff09\u3002"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u6a21\u578b\u60f3\u5927\u5e45\u63d0\u5347\u8fd9\u4e2a\u52a8\u4f5c\u7684\u6982\u7387\uff08\u6bd4\u5982 ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"r"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"})]})})]})," \u53d8\u6210\u4e86 1.5\uff09\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"PPO \u8bf4\uff1a"}),' "\u6162\u7740\uff01\u4e0a\u9650\u5c31\u662f 1.2\u3002\u8d85\u8fc7 1.2 \u7684\u90e8\u5206\u6211\u4e0d\u8ba4\uff0c\u54ea\u6015\u4f60\u8fd9\u4e00\u6b65\u8d70\u5f97\u518d\u597d\uff0c\u6211\u4e5f\u53ea\u6309 1.2 \u7684\u5e45\u5ea6\u7ed9\u4f60\u5956\u52b1\u3002"']}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u76ee\u7684\uff1a"})," \u9632\u6b62\u6a21\u578b\u56e0\u4e3a\u4e00\u6b21\u5076\u7136\u7684\u6210\u529f\u5c31\u8fc7\u5ea6\u81ea\u4fe1\uff0c\u5f7b\u5e95\u6539\u53d8\u7b56\u7565\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u60c5\u51b5 B\uff1a"})," \u6a21\u578b\u505a\u4e86\u4e00\u4e2a\u52a8\u4f5c\uff0c\u5f97\u5230\u4e86",(0,a.jsx)(e.strong,{children:"\u8d1f\u5411\u5956\u52b1"}),"\uff08\u505a\u9519\u4e86\uff09\u3002"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u6a21\u578b\u60f3\u5927\u5e45\u964d\u4f4e\u8fd9\u4e2a\u52a8\u4f5c\u7684\u6982\u7387\uff08\u6bd4\u5982 ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"r"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"})]})})]})," \u53d8\u6210\u4e86 0.5\uff09\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"PPO \u8bf4\uff1a"}),' "\u6162\u7740\uff01\u4e0b\u9650\u662f 0.8\u3002\u522b\u56e0\u4e3a\u4e00\u6b21\u5931\u8d25\u5c31\u5413\u5f97\u5f7b\u5e95\u4e0d\u6562\u52a8\u4e86\u3002"']}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u76ee\u7684\uff1a"})," \u9632\u6b62\u6a21\u578b\u56e0\u4e3a\u4e00\u6b21\u5931\u8d25\u5c31\u5f7b\u5e95\u5e9f\u6389\u67d0\u4e2a\u80fd\u529b\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:'\u901a\u8fc7\u8fd9\u79cd\u7b80\u5355\u7c97\u66b4\u7684**"\u622a\u65ad"**\uff0cPPO \u4fdd\u8bc1\u4e86\u6a21\u578b\u7684\u6bcf\u4e00\u6b21\u66f4\u65b0\u90fd\u5728\u4e00\u4e2a"\u53ef\u63a7\u3001\u5e73\u7a33"\u7684\u8303\u56f4\u5185\uff08Proximal / \u8fd1\u7aef\uff09\u3002'}),"\n",(0,a.jsx)(e.h3,{id:"23-ppo-\u7684\u76ee\u6807\u51fd\u6570",children:"2.3 PPO \u7684\u76ee\u6807\u51fd\u6570"}),"\n",(0,a.jsx)(e.p,{children:"PPO \u7684 Clipped \u76ee\u6807\u51fd\u6570\uff1a"}),"\n",(0,a.jsx)(e.span,{className:"katex-display",children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mi,{children:"L"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"C"}),(0,a.jsx)(e.mi,{children:"L"}),(0,a.jsx)(e.mi,{children:"I"}),(0,a.jsx)(e.mi,{children:"P"})]})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"\u03b8"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{mathvariant:"double-struck",children:"E"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{fence:"true",children:"["}),(0,a.jsx)(e.mi,{children:"min"}),(0,a.jsx)(e.mo,{children:"\u2061"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{fence:"true",children:"("}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"\u03b8"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsxs)(e.mover,{accent:"true",children:[(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsx)(e.mo,{children:"^"})]}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mtext,{children:"clip"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"\u03b8"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"\u2212"}),(0,a.jsx)(e.mi,{children:"\u03f5"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mi,{children:"\u03f5"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsxs)(e.mover,{accent:"true",children:[(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsx)(e.mo,{children:"^"})]}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{fence:"true",children:")"})]}),(0,a.jsx)(e.mo,{fence:"true",children:"]"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"L^{CLIP}(\\theta) = \\mathbb{E}_t \\left[ \\min \\left( r_t(\\theta) \\hat{A}_t, \\text{clip}(r_t(\\theta), 1-\\epsilon, 1+\\epsilon) \\hat{A}_t \\right) \\right]"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1.1413em",verticalAlign:"-0.25em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"L"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8913em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"L"}),(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07847em"},children:"I"}),(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"P"})]})})]})})})})})]}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1.8em",verticalAlign:"-0.65em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathbb",children:"E"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"minner",children:[(0,a.jsx)(e.span,{className:"mopen delimcenter",style:{top:"0em"},children:(0,a.jsx)(e.span,{className:"delimsizing size2",children:"["})}),(0,a.jsx)(e.span,{className:"mop",children:"min"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"minner",children:[(0,a.jsx)(e.span,{className:"mopen delimcenter",style:{top:"0em"},children:(0,a.jsx)(e.span,{className:"delimsizing size2",children:"("})}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0278em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord accent",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsxs)(e.span,{className:"vlist",style:{height:"0.9468em"},children:[(0,a.jsxs)(e.span,{style:{top:"-3em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"})]}),(0,a.jsxs)(e.span,{style:{top:"-3.2523em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"accent-body",style:{left:"-0.1111em"},children:(0,a.jsx)(e.span,{className:"mord",children:"^"})})]})]})})})}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord text",children:(0,a.jsx)(e.span,{className:"mord",children:"clip"})}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0278em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord accent",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsxs)(e.span,{className:"vlist",style:{height:"0.9468em"},children:[(0,a.jsxs)(e.span,{style:{top:"-3em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"})]}),(0,a.jsxs)(e.span,{style:{top:"-3.2523em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"accent-body",style:{left:"-0.1111em"},children:(0,a.jsx)(e.span,{className:"mord",children:"^"})})]})]})})})}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mclose delimcenter",style:{top:"0em"},children:(0,a.jsx)(e.span,{className:"delimsizing size2",children:")"})})]}),(0,a.jsx)(e.span,{className:"mclose delimcenter",style:{top:"0em"},children:(0,a.jsx)(e.span,{className:"delimsizing size2",children:"]"})})]})]})]})]})}),"\n",(0,a.jsx)(e.p,{children:"\u5176\u4e2d\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"\u03b8"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsxs)(e.mfrac,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"\u03c0"}),(0,a.jsx)(e.mi,{children:"\u03b8"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"\u03c0"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"\u03b8"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"o"}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mi,{children:"d"})]})]})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"t"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r_t(\\theta) = \\frac{\\pi_\\theta(a_t|s_t)}{\\pi_{\\theta_{old}}(a_t|s_t)}"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0278em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1.6357em",verticalAlign:"-0.6257em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(e.span,{className:"mfrac",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.01em"},children:[(0,a.jsxs)(e.span,{style:{top:"-2.655em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"\u03c0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3448em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.3488em",marginLeft:"-0.0359em",marginRight:"0.0714em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"\u03b8"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3448em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.3448em",marginLeft:"-0.0278em",marginRight:"0.1em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.6944em"}}),(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"o"}),(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})]})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3496em"},children:(0,a.jsx)(e.span,{})})})]})})]})})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.401em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mopen mtight",children:"("}),(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"a"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2963em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.357em",marginLeft:"0em",marginRight:"0.0714em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.143em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mord mtight",children:"\u2223"}),(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"s"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2963em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.357em",marginLeft:"0em",marginRight:"0.0714em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.143em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mclose mtight",children:")"})]})})]}),(0,a.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(e.span,{style:{top:"-3.485em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"\u03c0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3448em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.3488em",marginLeft:"-0.0359em",marginRight:"0.0714em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"\u03b8"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.1512em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mopen mtight",children:"("}),(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"a"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2963em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.357em",marginLeft:"0em",marginRight:"0.0714em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.143em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mord mtight",children:"\u2223"}),(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"s"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2963em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.357em",marginLeft:"0em",marginRight:"0.0714em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.143em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mclose mtight",children:")"})]})})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.6257em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})]})]})," \u662f\u65b0\u65e7\u7b56\u7565\u7684\u6982\u7387\u6bd4"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsxs)(e.msub,{children:[(0,a.jsxs)(e.mover,{accent:"true",children:[(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsx)(e.mo,{children:"^"})]}),(0,a.jsx)(e.mi,{children:"t"})]})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\hat{A}_t"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1.0968em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord accent",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsxs)(e.span,{className:"vlist",style:{height:"0.9468em"},children:[(0,a.jsxs)(e.span,{style:{top:"-3em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"})]}),(0,a.jsxs)(e.span,{style:{top:"-3.2523em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"accent-body",style:{left:"-0.1111em"},children:(0,a.jsx)(e.span,{className:"mord",children:"^"})})]})]})})})}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]})]})})]})," \u662f\u4f18\u52bf\u51fd\u6570\u4f30\u8ba1\uff08Advantage Estimation\uff09"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"\u03f5"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\epsilon"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"})]})})]})," \u662f\u88c1\u526a\u53c2\u6570\uff08\u901a\u5e38 0.1~0.2\uff09"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"3-\u5b9e\u6218\u6d41\u7a0bppo-\u5728-llm-\u8bad\u7ec3\u4e2d\u662f\u600e\u4e48\u8dd1\u7684",children:"3. \u5b9e\u6218\u6d41\u7a0b\uff1aPPO \u5728 LLM \u8bad\u7ec3\u4e2d\u662f\u600e\u4e48\u8dd1\u7684\uff1f"}),"\n",(0,a.jsxs)(e.p,{children:["\u8fd9\u662f\u5927\u5bb6\u6700\u5173\u5fc3\u7684\u90e8\u5206\uff1a",(0,a.jsx)(e.strong,{children:"ChatGPT \u662f\u600e\u4e48\u7528 PPO \u7ec3\u51fa\u6765\u7684\uff1f"})]}),"\n",(0,a.jsxs)(e.p,{children:["\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a ",(0,a.jsx)(e.strong,{children:"RLHF\uff08Reinforcement Learning from Human Feedback\uff09"}),"\u3002\u5728 PPO \u9636\u6bb5\uff0c\u4f60\u7684\u663e\u5361\u91cc\u901a\u5e38\u9700\u8981\u540c\u65f6\u52a0\u8f7d ",(0,a.jsx)(e.strong,{children:"4 \u4e2a\u6a21\u578b"}),"\uff08\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48 PPO \u663e\u5b58\u6d88\u8017\u5de8\u5927\u7684\u539f\u56e0\uff09\u3002"]}),"\n",(0,a.jsx)(e.h3,{id:"31-\u821e\u53f0\u4e0a\u7684\u56db\u4e2a\u89d2\u8272",children:"3.1 \u821e\u53f0\u4e0a\u7684\u56db\u4e2a\u89d2\u8272"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    RLHF-PPO \u56db\u6a21\u578b\u67b6\u6784                           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                          \u2502\n\u2502  \u2502    Actor     \u2502    \u2502   Critic     \u2502                          \u2502\n\u2502  \u2502  (\u7b56\u7565\u6a21\u578b)   \u2502    \u2502  (\u4ef7\u503c\u6a21\u578b)   \u2502                          \u2502\n\u2502  \u2502   \u53ef\u8bad\u7ec3 \u2713   \u2502    \u2502   \u53ef\u8bad\u7ec3 \u2713   \u2502                          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                          \u2502\n\u2502         \u2502                   \u2502                                   \u2502\n\u2502         \u25bc                   \u25bc                                   \u2502\n\u2502     \u751f\u6210\u56de\u7b54              \u4f30\u8ba1\u5956\u52b1                                \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                          \u2502\n\u2502  \u2502   Reward     \u2502    \u2502  Reference   \u2502                          \u2502\n\u2502  \u2502  (\u5956\u52b1\u6a21\u578b)   \u2502    \u2502  (\u53c2\u8003\u6a21\u578b)   \u2502                          \u2502\n\u2502  \u2502   \u51bb\u7ed3 \u2717     \u2502    \u2502   \u51bb\u7ed3 \u2717     \u2502                          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                          \u2502\n\u2502         \u2502                   \u2502                                   \u2502\n\u2502         \u25bc                   \u25bc                                   \u2502\n\u2502     \u6253\u5206\u8bc4\u4ef7              KL \u60e9\u7f5a                                \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Actor (\u6f14\u5458/\u7b56\u7565\u6a21\u578b)\uff1a"})," \u6211\u4eec\u8981\u8bad\u7ec3\u7684\u90a3\u4e2a LLM\uff08\u6bd4\u5982 Llama-3-8B\uff09\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Ref (\u53c2\u8003\u6a21\u578b)\uff1a"})," \u539f\u59cb\u7684 LLM\uff0c\u5b8c\u5168\u51bb\u7ed3\u53c2\u6570\u4e0d\u52a8\u3002\u7528\u6765\u505a\u5bf9\u6bd4\uff0c\u9632\u6b62 Actor \u7ec3\u50bb\u4e86\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Critic (\u8bc4\u8bba\u5bb6/\u4ef7\u503c\u6a21\u578b)\uff1a"})," \u9884\u6d4b\u5f53\u524d\u72b6\u6001\u672a\u6765\u80fd\u5f97\u591a\u5c11\u5206\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Reward (\u5956\u52b1\u6a21\u578b/\u88c1\u5224)\uff1a"})," \u66ff\u4eba\u7c7b\u6253\u5206\uff0c\u544a\u8bc9 Actor \u8fd9\u53e5\u8bdd\u8bf4\u5f97\u597d\u4e0d\u597d\u3002"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"32-\u8bad\u7ec3\u5faa\u73afstep-by-step",children:"3.2 \u8bad\u7ec3\u5faa\u73af\uff08Step-by-Step\uff09"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    PPO \u8bad\u7ec3\u5faa\u73af\u6d41\u7a0b                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Step 1: Rollout (\u751f\u6210)                                   \u2502  \u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502  \u2502\n\u2502  \u2502 \u2502 Prompt \u2502 \u2500\u2500\u2500\u25b6 \u2502 Actor  \u2502 \u2500\u2500\u2500\u25b6 \u2502Response\u2502              \u2502  \u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                          \u25bc                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Step 2: Evaluation (\u6253\u5206)                                \u2502  \u2502\n\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  \u2502\n\u2502  \u2502 \u2502 Reward \u2502 \u2500\u2500\u25b6 Score \u2500\u2500\u2500\u2500\u2500\u2500\u25b6 \u2502 Final = Score - KL\u60e9\u7f5a \u2502 \u2502  \u2502\n\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                          \u25bc                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Step 3: Advantage Estimation (\u8ba1\u7b97\u4f18\u52bf)                  \u2502  \u2502\n\u2502  \u2502 Critic \u5bf9\u6bd4 "\u5b9e\u9645\u5f97\u5206" vs "\u9884\u671f\u5f97\u5206"                      \u2502  \u2502\n\u2502  \u2502 Advantage = \u5b9e\u9645 - \u9884\u671f (\u6b63\u503c=\u8d85\u5e38\u53d1\u6325)                   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                          \u25bc                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Step 4: Optimization (\u66f4\u65b0)                              \u2502  \u2502\n\u2502  \u2502 \u4f7f\u7528 PPO Clipping \u66f4\u65b0 Actor \u548c Critic                   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,a.jsx)(e.h4,{id:"step-1-\u751f\u6210-rollout",children:"Step 1: \u751f\u6210 (Rollout)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u7ed9 Actor \u4e00\u4e2a\u95ee\u9898\uff08Prompt\uff09\u3002"}),"\n",(0,a.jsx)(e.li,{children:"Actor \u751f\u6210\u4e00\u4e2a\u56de\u7b54\u3002"}),"\n",(0,a.jsx)(e.li,{children:"Ref \u6a21\u578b\u4e5f\u770b\u4e00\u773c\u8fd9\u4e2a\u56de\u7b54\uff0c\u8ba1\u7b97\u4e00\u4e2a\u6982\u7387\u3002"}),"\n"]}),"\n",(0,a.jsx)(e.h4,{id:"step-2-\u6253\u5206-evaluation",children:"Step 2: \u6253\u5206 (Evaluation)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Reward \u6a21\u578b"}),"\u7ed9\u56de\u7b54\u6253\u4e00\u4e2a\u5206\uff08\u6bd4\u5982 +10 \u5206\uff09\u3002"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"KL \u60e9\u7f5a (\u5173\u952e)\uff1a"})," PPO \u4f1a\u8ba1\u7b97 Actor \u751f\u6210\u7684\u5b57\u548c Ref \u751f\u6210\u7684\u5b57\u5dee\u522b\u5927\u4e0d\u5927\u3002\u5982\u679c\u5dee\u522b\u592a\u5927\uff08Actor \u5f00\u59cb\u80e1\u8a00\u4e71\u8bed\uff09\uff0c\u5c31\u6263\u5206\u3002"]}),"\n",(0,a.jsx)(e.li,{children:"\u6700\u7ec8\u5f97\u5206 = Reward\u5206\u6570 - KL\u60e9\u7f5a\u3002"}),"\n"]}),"\n",(0,a.jsx)(e.h4,{id:"step-3-\u8ba1\u7b97\u4f18\u52bf-advantage-estimation",children:"Step 3: \u8ba1\u7b97\u4f18\u52bf (Advantage Estimation)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:'Critic \u6a21\u578b\u767b\u573a\u3002\u5b83\u4f1a\u5bf9\u6bd4"\u5b9e\u9645\u5f97\u5206"\u548c"\u5b83\u9884\u671f\u7684\u5f97\u5206"\u3002'}),"\n",(0,a.jsx)(e.li,{children:'\u5982\u679c\u5b9e\u9645\u5f97\u5206 > \u9884\u671f\u5f97\u5206\uff0c\u8bf4\u660e\u8fd9\u662f\u4e00\u4e2a"\u8d85\u5e38\u53d1\u6325"\u7684\u597d\u52a8\u4f5c\uff0cAdvantage \u662f\u6b63\u7684\u3002'}),"\n"]}),"\n",(0,a.jsx)(e.h4,{id:"step-4-\u66f4\u65b0-optimization-via-ppo",children:"Step 4: \u66f4\u65b0 (Optimization via PPO)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u5229\u7528\u8ba1\u7b97\u51fa\u7684 Advantage\uff0c\u4f7f\u7528 PPO \u7684",(0,a.jsx)(e.strong,{children:"\u526a\u88c1\u673a\u5236"}),"\u6765\u66f4\u65b0 Actor \u7684\u53c2\u6570\u3002"]}),"\n",(0,a.jsx)(e.li,{children:"\u540c\u65f6\u66f4\u65b0 Critic \u7684\u53c2\u6570\uff0c\u8ba9\u5b83\u4e0b\u6b21\u9884\u6d4b\u5f97\u66f4\u51c6\u3002"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"4-\u6838\u5fc3\u4ee3\u7801\u5b9e\u73b0-pytorch",children:"4. \u6838\u5fc3\u4ee3\u7801\u5b9e\u73b0 (PyTorch)"}),"\n",(0,a.jsx)(e.p,{children:"\u4ee5\u4e0b\u662f PPO Loss \u7684\u6838\u5fc3 PyTorch \u5b9e\u73b0\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'import torch\nimport torch.nn.functional as F\n\ndef ppo_loss(\n    old_log_probs,      # \u65e7\u7b56\u7565\u7684 log \u6982\u7387\n    new_log_probs,      # \u65b0\u7b56\u7565\u7684 log \u6982\u7387\n    advantages,         # \u4f18\u52bf\u51fd\u6570\n    clip_epsilon=0.2    # \u88c1\u526a\u53c2\u6570\n):\n    """\n    PPO \u7684\u6838\u5fc3 Loss \u8ba1\u7b97\n\n    \u53c2\u6570\u8bf4\u660e:\n    old_log_probs: \u65e7\u7b56\u7565\uff08rollout\u65f6\uff09\u7684 log \u6982\u7387\n    new_log_probs: \u65b0\u7b56\u7565\uff08\u5f53\u524d\u53c2\u6570\uff09\u7684 log \u6982\u7387\n    advantages: \u4f18\u52bf\u51fd\u6570\u503c\uff0c\u6b63\u503c\u8868\u793a\u597d\u52a8\u4f5c\uff0c\u8d1f\u503c\u8868\u793a\u574f\u52a8\u4f5c\n    clip_epsilon: \u88c1\u526a\u8303\u56f4\uff0c\u901a\u5e38 0.1~0.2\n    """\n    # 1. \u8ba1\u7b97\u6982\u7387\u6bd4 r(\u03b8) = \u03c0_new / \u03c0_old\n    ratio = torch.exp(new_log_probs - old_log_probs)\n\n    # 2. \u672a\u88c1\u526a\u7684\u76ee\u6807 (Surrogate 1)\n    surr1 = ratio * advantages\n\n    # 3. \u88c1\u526a\u540e\u7684\u76ee\u6807 (Surrogate 2)\n    surr2 = torch.clamp(ratio, 1 - clip_epsilon, 1 + clip_epsilon) * advantages\n\n    # 4. PPO Loss\uff1a\u53d6\u4e24\u8005\u6700\u5c0f\u503c\uff08\u4fdd\u5b88\u7b56\u7565\uff09\n    # \u4e3a\u4ec0\u4e48\u53d6 min\uff1f\n    # - \u5982\u679c advantage > 0\uff08\u597d\u52a8\u4f5c\uff09\uff0c\u6211\u4eec\u5e0c\u671b ratio \u589e\u5927\uff0c\u4f46\u4e0d\u8981\u8d85\u8fc7 1+\u03b5\n    # - \u5982\u679c advantage < 0\uff08\u574f\u52a8\u4f5c\uff09\uff0c\u6211\u4eec\u5e0c\u671b ratio \u51cf\u5c0f\uff0c\u4f46\u4e0d\u8981\u4f4e\u4e8e 1-\u03b5\n    policy_loss = -torch.min(surr1, surr2).mean()\n\n    return policy_loss\n\n\ndef compute_kl_penalty(log_probs_policy, log_probs_ref, kl_coef=0.1):\n    """\n    \u8ba1\u7b97 KL \u6563\u5ea6\u60e9\u7f5a\uff0c\u9632\u6b62\u6a21\u578b\u504f\u79bb\u53c2\u8003\u6a21\u578b\u592a\u8fdc\n\n    KL(\u03c0_ref || \u03c0_policy) \u2248 \u03a3 \u03c0_ref * (log \u03c0_ref - log \u03c0_policy)\n    """\n    kl_div = torch.exp(log_probs_ref) * (log_probs_ref - log_probs_policy)\n    return kl_coef * kl_div.sum(dim=-1).mean()\n\n\ndef compute_advantages(rewards, values, gamma=0.99, lam=0.95):\n    """\n    \u4f7f\u7528 GAE (Generalized Advantage Estimation) \u8ba1\u7b97\u4f18\u52bf\u51fd\u6570\n\n    \u53c2\u6570\u8bf4\u660e:\n    rewards: \u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u5956\u52b1\n    values: Critic \u6a21\u578b\u9884\u6d4b\u7684\u4ef7\u503c\n    gamma: \u6298\u6263\u56e0\u5b50\n    lam: GAE \u7684 \u03bb \u53c2\u6570\n    """\n    advantages = []\n    gae = 0\n\n    # \u4ece\u540e\u5f80\u524d\u8ba1\u7b97\n    for t in reversed(range(len(rewards))):\n        if t == len(rewards) - 1:\n            next_value = 0\n        else:\n            next_value = values[t + 1]\n\n        # TD \u8bef\u5dee\n        delta = rewards[t] + gamma * next_value - values[t]\n        # GAE\n        gae = delta + gamma * lam * gae\n        advantages.insert(0, gae)\n\n    return torch.tensor(advantages)\n\n\n# ==========================================\n# \u5b8c\u6574\u7684 PPO \u8bad\u7ec3\u6b65\u9aa4\u793a\u4f8b\n# ==========================================\ndef ppo_train_step(\n    actor_model,\n    critic_model,\n    ref_model,\n    reward_model,\n    prompts,\n    optimizer_actor,\n    optimizer_critic,\n    clip_epsilon=0.2,\n    kl_coef=0.1\n):\n    """\n    PPO \u7684\u4e00\u4e2a\u5b8c\u6574\u8bad\u7ec3\u6b65\u9aa4\n    """\n    # Step 1: Rollout - \u4f7f\u7528\u5f53\u524d Actor \u751f\u6210\u56de\u7b54\n    with torch.no_grad():\n        responses, old_log_probs = actor_model.generate_with_log_probs(prompts)\n        ref_log_probs = ref_model.get_log_probs(prompts, responses)\n\n    # Step 2: \u8ba1\u7b97\u5956\u52b1\n    with torch.no_grad():\n        rewards = reward_model.score(prompts, responses)\n        # \u6dfb\u52a0 KL \u60e9\u7f5a\n        kl_penalty = kl_coef * (old_log_probs - ref_log_probs)\n        final_rewards = rewards - kl_penalty\n\n    # Step 3: \u8ba1\u7b97\u4f18\u52bf\u51fd\u6570\n    with torch.no_grad():\n        values = critic_model(prompts, responses)\n        advantages = compute_advantages(final_rewards, values)\n        advantages = (advantages - advantages.mean()) / (advantages.std() + 1e-8)\n\n    # Step 4: PPO \u66f4\u65b0\n    # 4.1 \u66f4\u65b0 Actor\n    new_log_probs = actor_model.get_log_probs(prompts, responses)\n    actor_loss = ppo_loss(old_log_probs, new_log_probs, advantages, clip_epsilon)\n\n    optimizer_actor.zero_grad()\n    actor_loss.backward()\n    optimizer_actor.step()\n\n    # 4.2 \u66f4\u65b0 Critic\n    new_values = critic_model(prompts, responses)\n    critic_loss = F.mse_loss(new_values, final_rewards)\n\n    optimizer_critic.zero_grad()\n    critic_loss.backward()\n    optimizer_critic.step()\n\n    return {\n        "actor_loss": actor_loss.item(),\n        "critic_loss": critic_loss.item(),\n        "mean_reward": rewards.mean().item(),\n        "mean_kl": kl_penalty.mean().item()\n    }\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"5-ppo-\u7684\u4f18\u7f3a\u70b9\u603b\u7ed3",children:"5. PPO \u7684\u4f18\u7f3a\u70b9\u603b\u7ed3"}),"\n",(0,a.jsx)(e.p,{children:"\u4e3a\u4ec0\u4e48\u73b0\u5728 DPO \u706b\u4e86\uff0c\u4f46 DeepSeek \u548c OpenAI \u8fd8\u662f\u79bb\u4e0d\u5f00 PPO\uff1f"}),"\n",(0,a.jsx)(e.h3,{id:"51-ppo-\u7684\u4f18\u70b9\u4e3a\u4ec0\u4e48\u5b83\u662f\u7687\u51a0\u4e0a\u7684\u660e\u73e0",children:"5.1 PPO \u7684\u4f18\u70b9\uff08\u4e3a\u4ec0\u4e48\u5b83\u662f\u7687\u51a0\u4e0a\u7684\u660e\u73e0\uff09"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u4f18\u70b9"}),(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u4e0a\u9650\u6781\u9ad8\uff08\u63a2\u7d22\u80fd\u529b\uff09"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"PPO \u662f**\u5728\u7ebf\uff08Online\uff09**\u7b97\u6cd5\u3002\u6a21\u578b\u662f\u5728\u5b9e\u65f6\u751f\u6210\u7684\u8fc7\u7a0b\u4e2d\u5b66\u4e60\u7684\u3002\u5b83\u6709\u673a\u4f1a\u5c1d\u8bd5\u51fa\u6570\u636e\u96c6\u4e2d\u4e0d\u5b58\u5728\u7684\u89e3\u6cd5"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u9632\u6b62\u5d29\u574f"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u7531\u4e8e\u6709 Trust Region\uff08\u4fe1\u4efb\u57df/\u88c1\u526a\uff09\uff0c\u5b83\u6781\u5176\u7a33\u5b9a\uff0c\u4e0d\u5bb9\u6613\u5728\u8bad\u7ec3\u540e\u671f\u53d1\u751f\u6a21\u578b\u80fd\u529b\u9aa4\u964d\uff08Catastrophic Forgetting\uff09"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u9002\u5408\u590d\u6742\u63a8\u7406"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5bf9\u4e8e\u6570\u5b66\u3001\u4ee3\u7801\u7b49\u9700\u8981\u591a\u6b65\u63a8\u7406\u7684\u4efb\u52a1\uff0cPPO \u80fd\u8ba9\u6a21\u578b\u81ea\u6211\u63a2\u7d22\u6700\u4f18\u8def\u5f84"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u63a2\u7d22\u80fd\u529b\u4e3e\u4f8b\uff1a"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"\u6559\u6a21\u578b\u505a\u6570\u5b66\u9898\u3002DPO \u53ea\u80fd\u5b66\u4f60\u7ed9\u5b83\u7684\u89e3\u9898\u6b65\u9aa4\uff1bPPO \u53ef\u4ee5\u5728\u5c1d\u8bd5\u4e2d\u53d1\u73b0\u4e00\u79cd\u4f60\u6ca1\u6559\u8fc7\u4f46\u66f4\u7b80\u4fbf\u7684\u89e3\u6cd5\uff0c\u53ea\u8981 Reward Model \u5224\u5b9a\u7b54\u6848\u6b63\u786e\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"52-ppo-\u7684\u7f3a\u70b9\u4e3a\u4ec0\u4e48\u5927\u5bb6\u60f3\u6dd8\u6c70\u5b83",children:"5.2 PPO \u7684\u7f3a\u70b9\uff08\u4e3a\u4ec0\u4e48\u5927\u5bb6\u60f3\u6dd8\u6c70\u5b83\uff09"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u7f3a\u70b9"}),(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u5de5\u7a0b\u5669\u68a6"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u8fd9\u4e00\u5957\u6d41\u7a0b\u6d89\u53ca\u5230 4 \u4e2a\u6a21\u578b\u7684\u534f\u540c\uff0c\u6570\u636e\u6d41\u6781\u5176\u590d\u6742\u3002\u4ee3\u7801\u5b9e\u73b0\u975e\u5e38\u96be\uff0c\u5f88\u5bb9\u6613\u5199\u51fa Bug \u4f46\u4e0d\u62a5\u9519\uff0c\u53ea\u662f\u6548\u679c\u4e0d\u597d"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u8d85\u53c2\u654f\u611f"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5b66\u4e60\u7387\u3001KL \u7cfb\u6570\u3001Clip \u8303\u56f4\u2026\u2026\u6709\u51e0\u5341\u4e2a\u53c2\u6570\u8981\u8c03\u3002\u8c03\u9519\u4e00\u4e2a\uff0c\u6a21\u578b\u5c31\u5e9f\u4e86"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u6162\u4e14\u8d35"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u76f8\u6bd4 DPO\uff0cPPO \u7684\u91c7\u6837\u6548\u7387\u4f4e\uff0c\u8bad\u7ec3\u65f6\u95f4\u957f\uff0c\u663e\u5b58\u5360\u7528\u5927"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u663e\u5b58\u7206\u70b8"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"4 \u4e2a\u6a21\u578b\u540c\u65f6\u52a0\u8f7d\uff0c7B \u6a21\u578b\u9700\u8981 80GB+ \u663e\u5b58"})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"6-ppo-vs-dpo-\u5bf9\u6bd4",children:"6. PPO vs DPO \u5bf9\u6bd4"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u7279\u6027"}),(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"PPO"}),(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"DPO"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u8bad\u7ec3\u65b9\u5f0f"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5728\u7ebf\uff08Online\uff09"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u79bb\u7ebf\uff08Offline\uff09"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u6a21\u578b\u6570\u91cf"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"4 \u4e2a\uff08Actor, Critic, Reward, Ref\uff09"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"2 \u4e2a\uff08Policy, Ref\uff09"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u662f\u5426\u9700\u8981\u751f\u6210"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f\uff08Rollout/Sampling\uff09"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5426\uff08\u76f4\u63a5\u7528\u73b0\u6210\u6570\u636e\uff09"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u8bad\u7ec3\u901f\u5ea6"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u6162"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5feb\uff08\u901a\u5e38\u662f PPO \u7684\u51e0\u500d\uff09"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u663e\u5b58\u5360\u7528"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u6781\u5927"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u8f83\u5c0f"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u8d85\u53c2\u654f\u611f\u5ea6"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u6781\u9ad8"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u8f83\u4f4e"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u63a2\u7d22\u80fd\u529b"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5f3a\uff08\u53ef\u53d1\u73b0\u65b0\u89e3\u6cd5\uff09"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5f31\uff08\u53ea\u80fd\u5b66\u6570\u636e\u4e2d\u7684\u89e3\u6cd5\uff09"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.strong,{children:"\u9002\u7528\u573a\u666f"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u590d\u6742\u63a8\u7406\uff08\u6570\u5b66\u3001\u4ee3\u7801\uff09"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u504f\u597d\u5bf9\u9f50\uff08\u804a\u5929\u3001\u5b89\u5168\uff09"})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"7-\u5b9e\u6218\u5efa\u8bae",children:"7. \u5b9e\u6218\u5efa\u8bae"}),"\n",(0,a.jsx)(e.h3,{id:"71-\u4ec0\u4e48\u65f6\u5019\u7528-ppo",children:"7.1 \u4ec0\u4e48\u65f6\u5019\u7528 PPO\uff1f"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u4f60\u60f3\u8bad\u7ec3\u6a21\u578b\u8fdb\u884c",(0,a.jsx)(e.strong,{children:"\u590d\u6742\u7684\u903b\u8f91\u63a8\u7406"}),"\uff08\u6570\u5b66\u3001\u4ee3\u7801\u3001\u79d1\u7814\uff09"]}),"\n",(0,a.jsxs)(e.li,{children:["\u9700\u8981\u6a21\u578b",(0,a.jsx)(e.strong,{children:"\u81ea\u6211\u63a2\u7d22"}),"\u51fa\u6700\u4f18\u8def\u5f84\uff08\u5982 OpenAI o1/o3, DeepSeek R1\uff09"]}),"\n",(0,a.jsx)(e.li,{children:"\u4f60\u6709\u5145\u8db3\u7684\u7b97\u529b\u8d44\u6e90"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"72-\u4ec0\u4e48\u65f6\u5019\u7528-dpo",children:"7.2 \u4ec0\u4e48\u65f6\u5019\u7528 DPO\uff1f"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u4f60\u53ea\u662f\u60f3\u8ba9\u6a21\u578b",(0,a.jsx)(e.strong,{children:"\u8bf4\u8bdd\u597d\u542c\u3001\u7b26\u5408\u4eba\u7c7b\u504f\u597d"}),"\uff08\u5199\u6587\u6848\u3001\u804a\u5929\uff09"]}),"\n",(0,a.jsx)(e.li,{children:"\u7b97\u529b\u6709\u9650"}),"\n",(0,a.jsx)(e.li,{children:"\u60f3\u8981\u5feb\u901f\u8fed\u4ee3"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"73-\u8d85\u53c2\u6570\u5efa\u8bae",children:"7.3 \u8d85\u53c2\u6570\u5efa\u8bae"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u53c2\u6570"}),(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u63a8\u8350\u503c"}),(0,a.jsx)(e.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.code,{children:"clip_epsilon"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"0.1 ~ 0.2"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u592a\u5927\u4f1a\u4e0d\u7a33\u5b9a\uff0c\u592a\u5c0f\u4f1a\u6536\u655b\u6162"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.code,{children:"kl_coef"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"0.01 ~ 0.1"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u63a7\u5236 KL \u60e9\u7f5a\u5f3a\u5ea6"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.code,{children:"gamma"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"0.99"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u6298\u6263\u56e0\u5b50"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{style:{textAlign:"left"},children:[(0,a.jsx)(e.code,{children:"lam"})," (GAE)"]}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"0.95"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"GAE \u7684 \u03bb \u53c2\u6570"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.code,{children:"learning_rate"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"1e-6 ~ 5e-5"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"Actor \u5b66\u4e60\u7387\uff0c\u901a\u5e38\u6bd4 SFT \u66f4\u5c0f"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{style:{textAlign:"left"},children:(0,a.jsx)(e.code,{children:"batch_size"})}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u5c3d\u91cf\u5927"}),(0,a.jsx)(e.td,{style:{textAlign:"left"},children:"\u63d0\u9ad8\u8bad\u7ec3\u7a33\u5b9a\u6027"})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"8-\u603b\u7ed3",children:"8. \u603b\u7ed3"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:'PPO \u5c31\u50cf\u4e00\u4f4d\u4e25\u8c28\u7684"\u592a\u6781\u5927\u5e08"\u3002'}),' \u5b83\u8bb2\u7a76"\u4ee5\u6162\u6253\u5feb"\uff0c\u6bcf\u4e00\u6b65\u90fd\u8d70\u5f97\u5f88\u7a33\uff08Clipping\uff09\uff0c\u4e0d\u6c42\u4e00\u6b65\u767b\u5929\uff0c\u4f46\u6c42\u6b65\u6b65\u4e3a\u8425\u3002']}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    LLM \u8bad\u7ec3\u65b9\u6cd5\u9009\u62e9\u6307\u5357                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502                      \u4f60\u7684\u9700\u6c42\u662f\u4ec0\u4e48\uff1f                      \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                          \u2502                                      \u2502\n\u2502          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                     \u2502\n\u2502          \u25bc                               \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\n\u2502  \u2502  \u504f\u597d\u5bf9\u9f50     \u2502               \u2502  \u590d\u6742\u63a8\u7406     \u2502               \u2502\n\u2502  \u2502  \u804a\u5929/\u5b89\u5168    \u2502               \u2502  \u6570\u5b66/\u4ee3\u7801    \u2502               \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2502          \u2502                               \u2502                      \u2502\n\u2502          \u25bc                               \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\n\u2502  \u2502     DPO      \u2502               \u2502     PPO      \u2502               \u2502\n\u2502  \u2502   \u5feb\u901f\u7b80\u5355    \u2502               \u2502  \u4e0a\u9650\u66f4\u9ad8     \u2502               \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\u5982\u679c\u4f60\u53ea\u662f\u60f3\u8ba9\u6a21\u578b",(0,a.jsx)(e.strong,{children:"\u8bf4\u8bdd\u597d\u542c\u3001\u7b26\u5408\u4eba\u7c7b\u504f\u597d"}),"\uff08\u5199\u6587\u6848\u3001\u804a\u5929\uff09\uff0c",(0,a.jsx)(e.strong,{children:"DPO"}),' \u8fd9\u79cd"\u901f\u6210\u73ed"\u5df2\u7ecf\u8db3\u591f\u597d\u4e86\uff0c\u751a\u81f3\u66f4\u597d\u3002']}),"\n",(0,a.jsxs)(e.li,{children:["\u5982\u679c\u4f60\u60f3\u8bad\u7ec3\u6a21\u578b\u8fdb\u884c",(0,a.jsx)(e.strong,{children:"\u590d\u6742\u7684\u903b\u8f91\u63a8\u7406"}),"\uff08\u6570\u5b66\u3001\u4ee3\u7801\u3001\u79d1\u7814\uff09\uff0c\u9700\u8981\u6a21\u578b\u81ea\u6211\u63a2\u7d22\u51fa\u6700\u4f18\u8def\u5f84\uff08\u5982 OpenAI o1/o3, DeepSeek R1\uff09\uff0c\u90a3\u4e48 ",(0,a.jsx)(e.strong,{children:"PPO\uff08\u53ca\u5176\u53d8\u4f53 GRPO\uff09"})," \u4f9d\u7136\u662f\u76ee\u524d\u552f\u4e00\u901a\u5411\u771f\u7406\u7684\u9053\u8def\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["\u5728 2024 \u5e74\u53ca\u4ee5\u540e\uff0c",(0,a.jsx)(e.strong,{children:"SFT + DPO/PPO"})," \u51e0\u4e4e\u662f\u5b9a\u5236\u5927\u6a21\u578b\u7684\u6807\u51c6\u6d41\u7a0b\u3002SFT \u5960\u5b9a\u57fa\u7840\uff0c\u5bf9\u9f50\u65b9\u6cd5\uff08DPO \u6216 PPO\uff09\u9526\u4e0a\u6dfb\u82b1\u3002"]})]})}function d(s={}){const{wrapper:e}={...(0,t.R)(),...s.components};return e?(0,a.jsx)(e,{...s,children:(0,a.jsx)(h,{...s})}):h(s)}},28453:(s,e,n)=>{n.d(e,{R:()=>i,x:()=>r});var l=n(96540);const a={},t=l.createContext(a);function i(s){const e=l.useContext(t);return l.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function r(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(a):s.components||a:i(s.components),l.createElement(t.Provider,{value:e},s.children)}}}]);