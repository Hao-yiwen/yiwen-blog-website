"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[34610],{489(e){e.exports=JSON.parse('{"permalink":"/yiwen-blog-website/blog/docker_migrate","editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/blog/docker_migrate.md","source":"@site/blog/docker_migrate.md","title":"docker\u955c\u50cf\u4ed3\u5e93\u8fc1\u79fb","description":"\u524d\u7f6e\u6761\u4ef6","date":"2024-01-14T00:00:00.000Z","tags":[],"readingTime":0.82,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"docker\u955c\u50cf\u4ed3\u5e93\u8fc1\u79fb","date":"2024-01-14T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"vscode\u8c03\u8bd5","permalink":"/yiwen-blog-website/blog/vs_debugger"},"nextItem":{"title":"aws\u4e2dec2\u767b\u5f55","permalink":"/yiwen-blog-website/blog/aws_use"}}')},6726(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var s=t(489),i=t(74848),o=t(28453);const r={title:"docker\u955c\u50cf\u4ed3\u5e93\u8fc1\u79fb",date:new Date("2024-01-14T00:00:00.000Z")},a="docker\u955c\u50cf\u4ed3\u5e93\u8fc1\u79fb",c={authorsImageUrls:[]},l=[{value:"\u524d\u7f6e\u6761\u4ef6",id:"\u524d\u7f6e\u6761\u4ef6",level:2},{value:"\u4f7f\u7528github action\u5c06\u955c\u50cf\u6253\u5305\u4e0a\u4f20\u81f3\u963f\u91cc\u4e91\u5bb9\u5668\u4ed3\u5e93",id:"\u4f7f\u7528github-action\u5c06\u955c\u50cf\u6253\u5305\u4e0a\u4f20\u81f3\u963f\u91cc\u4e91\u5bb9\u5668\u4ed3\u5e93",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"\u524d\u7f6e\u6761\u4ef6",children:"\u524d\u7f6e\u6761\u4ef6"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://cr.console.aliyun.com/cn-shanghai/instance/repositories",children:"\u963f\u91cc\u4e91\u5bb9\u5668\u4ed3\u5e93"})}),"\n",(0,i.jsx)(n.h2,{id:"\u4f7f\u7528github-action\u5c06\u955c\u50cf\u6253\u5305\u4e0a\u4f20\u81f3\u963f\u91cc\u4e91\u5bb9\u5668\u4ed3\u5e93",children:"\u4f7f\u7528github action\u5c06\u955c\u50cf\u6253\u5305\u4e0a\u4f20\u81f3\u963f\u91cc\u4e91\u5bb9\u5668\u4ed3\u5e93"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Docker Build and Push to Aliyun\n\non:\n  push:\n    tags:\n      - 'v*'  # \u5f53\u63a8\u9001\u7b26\u5408 'v*' \u683c\u5f0f\u7684\u6807\u7b7e\u65f6\u89e6\u53d1\n\njobs:\n  build-and-push:\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout Code\n      uses: actions/checkout@v2\n\n    - name: Login to Aliyun Container Registry\n      run: |\n        echo \"${{ secrets.ALIYUN_CONTAINER_REGISTRY_PASSWORD }}\" | docker login --username ${{ secrets.ALIYUN_CONTAINER_REGISTRY_USERNAME }} --password-stdin registry.cn-shanghai.aliyuncs.com\n\n    - name: Extract Git Tag for Version\n      id: tag\n      run: echo \"::set-output name=version::$(git describe --tags --abbrev=0)\"\n\n    - name: Build Docker Image\n      run: |\n        docker build --platform linux/amd64 -t registry.cn-shanghai.aliyuncs.com/${{ secrets.ALIYUN_CONTAINER_REGISTRY_NAMESPACE }}/yiwen-blog-website:${{ steps.tag.outputs.version }} .\n\n    - name: Push to Aliyun Container Registry\n      run: |\n        docker push registry.cn-shanghai.aliyuncs.com/${{ secrets.ALIYUN_CONTAINER_REGISTRY_NAMESPACE }}/yiwen-blog-website:${{ steps.tag.outputs.version }}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5bb9\u5668\u7248\u672c\u4f7f\u7528tag\u6807\u7b7e\u7248\u672c\u6765\u52a8\u6001\u5b9a\u4e49\uff0c\u800c\u4e0d\u662f\u5199\u6b7b"}),"\n",(0,i.jsx)(n.li,{children:"\u8bbe\u7f6e\u5bf9\u5e94\u7684\u79d8\u94a5\uff0c\u5728\u4ee3\u7801\u53d8\u5316\u7684\u65f6\u5019\u624b\u52a8push\u5230\u5bb9\u5668\u4ed3\u5e93"}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);