"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[76892],{17458:(s,n,e)=>{e.r(n),e.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>t,metadata:()=>l,toc:()=>h});const l=JSON.parse('{"id":"ai/weight-init-vs-batch-norm","title":"\u6743\u91cd\u521d\u59cb\u5316 vs Batch Normalization","description":"\u8fd9\u4e24\u4e2a\u6280\u672f\u90fd\u6d89\u53ca\\"\u5f52\u4e00\u5316\\"\uff0c\u4f46\u4f5c\u7528\u5b8c\u5168\u4e0d\u540c\u3002","source":"@site/docs/ai/weight-init-vs-batch-norm.md","sourceDirName":"ai","slug":"/ai/weight-init-vs-batch-norm","permalink":"/yiwen-blog-website/docs/ai/weight-init-vs-batch-norm","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/ai/weight-init-vs-batch-norm.md","tags":[],"version":"current","lastUpdatedAt":1736640000000,"frontMatter":{"title":"\u6743\u91cd\u521d\u59cb\u5316 vs Batch Normalization","sidebar_label":"\u6743\u91cd\u521d\u59cb\u5316 vs BN","date":"2025-01-12T00:00:00.000Z","last_update":{"date":"2025-01-12T00:00:00.000Z"}},"sidebar":"aiSidebar","previous":{"title":"Transformer\u57fa\u7840\u67b6\u6784","permalink":"/yiwen-blog-website/docs/ai/transformer"},"next":{"title":"\u6743\u91cd\u8870\u51cf(Weight Decay)\u7b80\u4ecb","permalink":"/yiwen-blog-website/docs/ai/weight_decy"}}');var i=e(74848),a=e(28453);const t={title:"\u6743\u91cd\u521d\u59cb\u5316 vs Batch Normalization",sidebar_label:"\u6743\u91cd\u521d\u59cb\u5316 vs BN",date:new Date("2025-01-12T00:00:00.000Z"),last_update:{date:new Date("2025-01-12T00:00:00.000Z")}},r="\u6743\u91cd\u521d\u59cb\u5316 vs Batch Normalization",c={},h=[{value:"\u6838\u5fc3\u533a\u522b\u5bf9\u6bd4",id:"\u6838\u5fc3\u533a\u522b\u5bf9\u6bd4",level:2},{value:"\u8be6\u7ec6\u5bf9\u6bd4",id:"\u8be6\u7ec6\u5bf9\u6bd4",level:2},{value:"1. \u6743\u91cd\u521d\u59cb\u5316\uff08\u4e00\u6b21\u6027\uff09",id:"1-\u6743\u91cd\u521d\u59cb\u5316\u4e00\u6b21\u6027",level:3},{value:"2. Batch Normalization\uff08\u6301\u7eed\uff09",id:"2-batch-normalization\u6301\u7eed",level:3},{value:"\u5f62\u8c61\u6bd4\u55bb",id:"\u5f62\u8c61\u6bd4\u55bb",level:2},{value:"\u80fd\u5426\u4e92\u76f8\u66ff\u4ee3\uff1f",id:"\u80fd\u5426\u4e92\u76f8\u66ff\u4ee3",level:2},{value:"\u274c \u4e0d\u80fd\uff01\u5e94\u8be5\u914d\u5408\u4f7f\u7528",id:"-\u4e0d\u80fd\u5e94\u8be5\u914d\u5408\u4f7f\u7528",level:3},{value:"\u6b63\u786e\u7528\u6cd5\uff1a\u4e24\u8005\u7ed3\u5408",id:"\u6b63\u786e\u7528\u6cd5\u4e24\u8005\u7ed3\u5408",level:2},{value:"\u8bad\u7ec3\u6d41\u7a0b\u65f6\u95f4\u7ebf",id:"\u8bad\u7ec3\u6d41\u7a0b\u65f6\u95f4\u7ebf",level:2},{value:"\u6027\u80fd\u5bf9\u6bd4\u5b9e\u9a8c",id:"\u6027\u80fd\u5bf9\u6bd4\u5b9e\u9a8c",level:2},{value:"\u5e38\u89c1\u8bef\u533a",id:"\u5e38\u89c1\u8bef\u533a",level:2},{value:"\u274c \u8bef\u533a 1\uff1a\u6709 BN \u5c31\u4e0d\u9700\u8981\u521d\u59cb\u5316",id:"-\u8bef\u533a-1\u6709-bn-\u5c31\u4e0d\u9700\u8981\u521d\u59cb\u5316",level:3},{value:"\u274c \u8bef\u533a 2\uff1aBN \u548c\u6743\u91cd\u521d\u59cb\u5316\u505a\u540c\u4e00\u4ef6\u4e8b",id:"-\u8bef\u533a-2bn-\u548c\u6743\u91cd\u521d\u59cb\u5316\u505a\u540c\u4e00\u4ef6\u4e8b",level:3},{value:"\u274c \u8bef\u533a 3\uff1a\u7528 BN \u540e\u53ef\u4ee5\u968f\u4fbf\u521d\u59cb\u5316",id:"-\u8bef\u533a-3\u7528-bn-\u540e\u53ef\u4ee5\u968f\u4fbf\u521d\u59cb\u5316",level:3},{value:"\u5c0f\u7ed3",id:"\u5c0f\u7ed3",level:2},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function d(s){const n={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mover:"mover",mrow:"mrow",msqrt:"msqrt",msup:"msup",p:"p",path:"path",pre:"pre",semantics:"semantics",span:"span",strong:"strong",svg:"svg",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u6743\u91cd\u521d\u59cb\u5316-vs-batch-normalization",children:"\u6743\u91cd\u521d\u59cb\u5316 vs Batch Normalization"})}),"\n",(0,i.jsx)(n.p,{children:'\u8fd9\u4e24\u4e2a\u6280\u672f\u90fd\u6d89\u53ca"\u5f52\u4e00\u5316"\uff0c\u4f46\u4f5c\u7528\u5b8c\u5168\u4e0d\u540c\u3002'}),"\n",(0,i.jsx)(n.h2,{id:"\u6838\u5fc3\u533a\u522b\u5bf9\u6bd4",children:"\u6838\u5fc3\u533a\u522b\u5bf9\u6bd4"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7ef4\u5ea6"}),(0,i.jsx)(n.th,{children:"\u6743\u91cd\u521d\u59cb\u5316"}),(0,i.jsx)(n.th,{children:"Batch Normalization"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u4f5c\u7528\u5bf9\u8c61"})}),(0,i.jsx)(n.td,{children:"\u6743\u91cd\u53c2\u6570"}),(0,i.jsx)(n.td,{children:"\u6fc0\u6d3b\u503c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u6267\u884c\u65f6\u673a"})}),(0,i.jsxs)(n.td,{children:["\u8bad\u7ec3\u524d",(0,i.jsx)(n.strong,{children:"\u4e00\u6b21\u6027"})]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u6bcf\u6b21\u524d\u5411\u4f20\u64ad"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u662f\u5426\u662f\u5c42"})}),(0,i.jsx)(n.td,{children:"\u274c \u521d\u59cb\u5316\u7b56\u7565"}),(0,i.jsx)(n.td,{children:"\u2705 \u7f51\u7edc\u5c42"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u662f\u5426\u53ef\u5b66\u4e60"})}),(0,i.jsx)(n.td,{children:"\u521d\u59cb\u5316\u540e\u901a\u8fc7\u68af\u5ea6\u66f4\u65b0"}),(0,i.jsx)(n.td,{children:"\u6709\u53ef\u5b66\u4e60\u53c2\u6570 \u03b3, \u03b2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u76ee\u6807"})}),(0,i.jsx)(n.td,{children:"\u597d\u7684\u8d77\u70b9"}),(0,i.jsx)(n.td,{children:"\u6301\u7eed\u7a33\u5b9a\u5206\u5e03"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u8be6\u7ec6\u5bf9\u6bd4",children:"\u8be6\u7ec6\u5bf9\u6bd4"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u6743\u91cd\u521d\u59cb\u5316\u4e00\u6b21\u6027",children:"1. \u6743\u91cd\u521d\u59cb\u5316\uff08\u4e00\u6b21\u6027\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# \u53ea\u5728\u6784\u5efa\u7f51\u7edc\u65f6\u6267\u884c\u4e00\u6b21\ndef init_weights(m):\n    if isinstance(m, nn.Conv2d):\n        nn.init.kaiming_normal_(m.weight, nonlinearity='relu')\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f5c\u7528"}),"\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6839\u636e\u8f93\u5165/\u8f93\u51fa\u795e\u7ecf\u5143\u6570\u91cf\u8bbe\u5b9a\u6743\u91cd\u521d\u59cb\u503c"}),"\n",(0,i.jsx)(n.li,{children:"\u8ba9\u521d\u59cb\u7684\u6fc0\u6d3b\u503c\u548c\u68af\u5ea6\u4fdd\u6301\u5408\u9002\u5c3a\u5ea6"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'\u53ea\u7ba1"\u5f00\u5c40"'}),"\uff0c\u4e4b\u540e\u6743\u91cd\u81ea\u7531\u66f4\u65b0"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5e38\u7528\u65b9\u6cd5"}),"\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Xavier"}),"\uff1a\u9002\u7528\u4e8e Sigmoid/Tanh"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kaiming/He"}),"\uff1a\u9002\u7528\u4e8e ReLU"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-batch-normalization\u6301\u7eed",children:"2. Batch Normalization\uff08\u6301\u7eed\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# \u7f51\u7edc\u7ed3\u6784\u7684\u4e00\u90e8\u5206\uff0c\u6bcf\u6b21\u524d\u5411\u4f20\u64ad\u90fd\u6267\u884c\nx = self.conv(x)       # \u5377\u79ef\nx = self.bn(x)         # BN \u5f52\u4e00\u5316\u6fc0\u6d3b\u503c\nx = F.relu(x)          # \u6fc0\u6d3b\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f5c\u7528"}),"\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5bf9\u6bcf\u4e2a batch \u7684\u6fc0\u6d3b\u503c\u8fdb\u884c\u5f52\u4e00\u5316"}),"\n",(0,i.jsxs)(n.li,{children:["\u516c\u5f0f\uff1a",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsxs)(n.mover,{accent:"true",children:[(0,i.jsx)(n.mi,{children:"x"}),(0,i.jsx)(n.mo,{children:"^"})]}),(0,i.jsx)(n.mo,{children:"="}),(0,i.jsxs)(n.mfrac,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"x"}),(0,i.jsx)(n.mo,{children:"\u2212"}),(0,i.jsx)(n.mi,{children:"\u03bc"})]}),(0,i.jsx)(n.msqrt,{children:(0,i.jsxs)(n.mrow,{children:[(0,i.jsxs)(n.msup,{children:[(0,i.jsx)(n.mi,{children:"\u03c3"}),(0,i.jsx)(n.mn,{children:"2"})]}),(0,i.jsx)(n.mo,{children:"+"}),(0,i.jsx)(n.mi,{children:"\u03f5"})]})})]})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\hat{x} = \\frac{x - \\mu}{\\sqrt{\\sigma^2 + \\epsilon}}"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.6944em"}}),(0,i.jsx)(n.span,{className:"mord accent",children:(0,i.jsx)(n.span,{className:"vlist-t",children:(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsxs)(n.span,{className:"vlist",style:{height:"0.6944em"},children:[(0,i.jsxs)(n.span,{style:{top:"-3em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"x"})]}),(0,i.jsxs)(n.span,{style:{top:"-3em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,i.jsx)(n.span,{className:"mord",children:"^"})})]})]})})})}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(n.span,{className:"mrel",children:"="}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1.3924em",verticalAlign:"-0.538em"}}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mopen nulldelimiter"}),(0,i.jsx)(n.span,{className:"mfrac",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsxs)(n.span,{className:"vlist",style:{height:"0.8544em"},children:[(0,i.jsxs)(n.span,{style:{top:"-2.5445em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:(0,i.jsx)(n.span,{className:"mord sqrt mtight",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsxs)(n.span,{className:"vlist",style:{height:"0.9221em"},children:[(0,i.jsxs)(n.span,{className:"svg-align",style:{top:"-3em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsxs)(n.span,{className:"mord mtight",style:{paddingLeft:"0.833em"},children:[(0,i.jsxs)(n.span,{className:"mord mtight",children:[(0,i.jsx)(n.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"\u03c3"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsx)(n.span,{className:"vlist-t",children:(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.7463em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.786em",marginRight:"0.0714em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.5em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size3 size1 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,i.jsx)(n.span,{className:"mbin mtight",children:"+"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"\u03f5"})]})]}),(0,i.jsxs)(n.span,{style:{top:"-2.8821em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"hide-tail mtight",style:{minWidth:"0.853em",height:"1.08em"},children:(0,i.jsx)(n.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:(0,i.jsx)(n.path,{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"})})})]})]}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.1179em"},children:(0,i.jsx)(n.span,{})})})]})})})})]}),(0,i.jsxs)(n.span,{style:{top:"-3.23em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,i.jsxs)(n.span,{style:{top:"-3.4461em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(n.span,{className:"mord mtight",children:[(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"x"}),(0,i.jsx)(n.span,{className:"mbin mtight",children:"\u2212"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"\u03bc"})]})})]})]}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.538em"},children:(0,i.jsx)(n.span,{})})})]})}),(0,i.jsx)(n.span,{className:"mclose nulldelimiter"})]})]})]})]}),"\uff0c\u7136\u540e ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"y"}),(0,i.jsx)(n.mo,{children:"="}),(0,i.jsx)(n.mi,{children:"\u03b3"}),(0,i.jsxs)(n.mover,{accent:"true",children:[(0,i.jsx)(n.mi,{children:"x"}),(0,i.jsx)(n.mo,{children:"^"})]}),(0,i.jsx)(n.mo,{children:"+"}),(0,i.jsx)(n.mi,{children:"\u03b2"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"y = \\gamma \\hat{x} + \\beta"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(n.span,{className:"mrel",children:"="}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.05556em"},children:"\u03b3"}),(0,i.jsx)(n.span,{className:"mord accent",children:(0,i.jsx)(n.span,{className:"vlist-t",children:(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsxs)(n.span,{className:"vlist",style:{height:"0.6944em"},children:[(0,i.jsxs)(n.span,{style:{top:"-3em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"x"})]}),(0,i.jsxs)(n.span,{style:{top:"-3em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(n.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,i.jsx)(n.span,{className:"mord",children:"^"})})]})]})})})}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"+"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.05278em"},children:"\u03b2"})]})]})]})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6301\u7eed\u76d1\u63a7"}),"\u6574\u4e2a\u8bad\u7ec3\u8fc7\u7a0b\u7684\u6fc0\u6d3b\u503c\u5206\u5e03"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5f62\u8c61\u6bd4\u55bb",children:"\u5f62\u8c61\u6bd4\u55bb"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6743\u91cd\u521d\u59cb\u5316"}),"\uff1a\u8d5b\u8f66\u7684",(0,i.jsx)(n.strong,{children:"\u8d77\u8dd1\u4f4d\u7f6e"})," - \u786e\u4fdd\u4e0d\u4f1a\u4e00\u5f00\u59cb\u5c31\u51fa\u95ee\u9898\uff0c\u53ea\u5f71\u54cd\u8d77\u8dd1\u90a3\u4e00\u523b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch Normalization"}),"\uff1a\u8d5b\u8f66\u7684",(0,i.jsx)(n.strong,{children:"\u7a33\u5b9a\u7cfb\u7edf"})," - \u5168\u7a0b\u76d1\u63a7\u5e76\u8c03\u6574\uff0c\u786e\u4fdd\u6574\u4e2a\u8fc7\u7a0b\u5e73\u7a33"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u80fd\u5426\u4e92\u76f8\u66ff\u4ee3",children:"\u80fd\u5426\u4e92\u76f8\u66ff\u4ee3\uff1f"}),"\n",(0,i.jsx)(n.h3,{id:"-\u4e0d\u80fd\u5e94\u8be5\u914d\u5408\u4f7f\u7528",children:"\u274c \u4e0d\u80fd\uff01\u5e94\u8be5\u914d\u5408\u4f7f\u7528"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u5373\u4f7f\u6709 BN\uff0c\u4e5f\u9700\u8981\u6743\u91cd\u521d\u59cb\u5316"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6781\u7aef\u521d\u59cb\u6743\u91cd\uff08\u5982\u5168 0 \u6216\u8fc7\u5927\uff09\u4f1a\u5bfc\u81f4\u7b2c\u4e00\u6b21\u524d\u5411\u4f20\u64ad\u5c31\u5931\u8d25"}),"\n",(0,i.jsx)(n.li,{children:"\u597d\u7684\u521d\u59cb\u5316\u8ba9 BN \u66f4\u5feb\u53d1\u6325\u4f5c\u7528"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u5373\u4f7f\u6709\u597d\u7684\u521d\u59cb\u5316\uff0cBN \u4ecd\u6709\u4ef7\u503c"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8bad\u7ec3\u4e2d\u6fc0\u6d3b\u503c\u5206\u5e03\u4f1a\u6f02\u79fb\uff0cBN \u6301\u7eed\u7a33\u5b9a"}),"\n",(0,i.jsx)(n.li,{children:"BN \u7684\u989d\u5916\u597d\u5904\uff1a\u66f4\u5927\u5b66\u4e60\u7387\u3001\u6b63\u5219\u5316\u6548\u679c\u3001\u52a0\u901f\u6536\u655b"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6b63\u786e\u7528\u6cd5\u4e24\u8005\u7ed3\u5408",children:"\u6b63\u786e\u7528\u6cd5\uff1a\u4e24\u8005\u7ed3\u5408"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'class ModernNet(nn.Module):\n    def __init__(self):\n        super().__init__()\n        self.conv1 = nn.Conv2d(3, 64, 3, padding=1, bias=False)\n        self.bn1 = nn.BatchNorm2d(64)      # \u6dfb\u52a0 BN\n\n        self.conv2 = nn.Conv2d(64, 128, 3, padding=1, bias=False)\n        self.bn2 = nn.BatchNorm2d(128)\n\n        self._init_weights()  # \u521d\u59cb\u5316\u6743\u91cd\n\n    def _init_weights(self):\n        """\u4e00\u6b21\u6027\u6743\u91cd\u521d\u59cb\u5316"""\n        for m in self.modules():\n            if isinstance(m, nn.Conv2d):\n                nn.init.kaiming_normal_(m.weight, mode=\'fan_out\', nonlinearity=\'relu\')\n            elif isinstance(m, nn.BatchNorm2d):\n                nn.init.constant_(m.weight, 1)  # \u03b3 = 1\n                nn.init.constant_(m.bias, 0)    # \u03b2 = 0\n\n    def forward(self, x):\n        """BN \u6bcf\u6b21\u524d\u5411\u4f20\u64ad\u90fd\u6267\u884c"""\n        x = self.conv1(x)    # \u4f7f\u7528\u521d\u59cb\u5316\u7684\u6743\u91cd\uff08\u4f1a\u4e0d\u65ad\u66f4\u65b0\uff09\n        x = self.bn1(x)      # BN \u5f52\u4e00\u5316\uff08\u6bcf\u6b21\u6267\u884c\uff09\n        x = F.relu(x)\n\n        x = self.conv2(x)\n        x = self.bn2(x)\n        x = F.relu(x)\n        return x\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u8bad\u7ec3\u6d41\u7a0b\u65f6\u95f4\u7ebf",children:"\u8bad\u7ec3\u6d41\u7a0b\u65f6\u95f4\u7ebf"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u8bad\u7ec3\u524d:\n\u251c\u2500 \u6743\u91cd\u521d\u59cb\u5316 \u2713\uff08Kaiming\uff0c\u4e00\u6b21\u6027\uff09\n\u2514\u2500 BN \u53c2\u6570\u521d\u59cb\u5316 \u2713\uff08\u03b3=1, \u03b2=0\uff09\n\n\u7b2c 1 \u4e2a batch:\n\u251c\u2500 Conv: \u4f7f\u7528\u521d\u59cb\u6743\u91cd W\u2080\n\u251c\u2500 BN: \u5f52\u4e00\u5316\u6fc0\u6d3b\u503c\n\u2514\u2500 \u53cd\u5411\u4f20\u64ad: \u66f4\u65b0\u6743\u91cd W\u2080\u2192W\u2081 \u548c BN \u53c2\u6570\n\n\u7b2c 2 \u4e2a batch:\n\u251c\u2500 Conv: \u4f7f\u7528\u66f4\u65b0\u540e\u7684\u6743\u91cd W\u2081\uff08\u4e0d\u662f\u521d\u59cb\u503c\u4e86\uff09\n\u251c\u2500 BN: \u518d\u6b21\u5f52\u4e00\u5316\uff08\u65b0 batch \u7edf\u8ba1\u91cf\uff09\n\u2514\u2500 \u7ee7\u7eed\u66f4\u65b0...\n\n\u7b2c N \u4e2a batch:\n\u251c\u2500 Conv: \u6743\u91cd W\u2099\uff08\u5df2\u548c\u521d\u59cb\u503c\u5dee\u5f88\u5927\uff09\n\u2514\u2500 BN: \u4ecd\u5728\u5f52\u4e00\u5316\uff08\u4fdd\u6301\u5206\u5e03\u7a33\u5b9a\uff09\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6027\u80fd\u5bf9\u6bd4\u5b9e\u9a8c",children:"\u6027\u80fd\u5bf9\u6bd4\u5b9e\u9a8c"}),"\n",(0,i.jsx)(n.p,{children:"\u8bad\u7ec3 ResNet-18 (CIFAR-10)\uff1a"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u914d\u7f6e"}),(0,i.jsx)(n.th,{children:"\u9996 epoch Loss"}),(0,i.jsx)(n.th,{children:"10 epoch \u51c6\u786e\u7387"}),(0,i.jsx)(n.th,{children:"\u6700\u7ec8\u51c6\u786e\u7387"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u65e0\u521d\u59cb\u5316 + \u65e0 BN"}),(0,i.jsx)(n.td,{children:"2.30"}),(0,i.jsx)(n.td,{children:"45%"}),(0,i.jsx)(n.td,{children:"70%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u6709\u521d\u59cb\u5316 + \u65e0 BN"}),(0,i.jsx)(n.td,{children:"1.95"}),(0,i.jsx)(n.td,{children:"60%"}),(0,i.jsx)(n.td,{children:"82%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u65e0\u521d\u59cb\u5316 + \u6709 BN"}),(0,i.jsx)(n.td,{children:"2.10"}),(0,i.jsx)(n.td,{children:"55%"}),(0,i.jsx)(n.td,{children:"78%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u6709\u521d\u59cb\u5316 + \u6709 BN"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"1.65"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"72%"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"92%"})," \u2713"]})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u7ed3\u8bba\uff1a\u4e24\u8005\u7ed3\u5408\u6548\u679c\u6700\u597d\uff01"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u89c1\u8bef\u533a",children:"\u5e38\u89c1\u8bef\u533a"}),"\n",(0,i.jsx)(n.h3,{id:"-\u8bef\u533a-1\u6709-bn-\u5c31\u4e0d\u9700\u8981\u521d\u59cb\u5316",children:"\u274c \u8bef\u533a 1\uff1a\u6709 BN \u5c31\u4e0d\u9700\u8981\u521d\u59cb\u5316"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u771f\u76f8"}),"\uff1aBN \u964d\u4f4e\u4e86\u654f\u611f\u6027\uff0c\u4f46\u6781\u5dee\u7684\u521d\u59cb\u5316\u4ecd\u4f1a\u5931\u8d25"]}),"\n",(0,i.jsx)(n.h3,{id:"-\u8bef\u533a-2bn-\u548c\u6743\u91cd\u521d\u59cb\u5316\u505a\u540c\u4e00\u4ef6\u4e8b",children:"\u274c \u8bef\u533a 2\uff1aBN \u548c\u6743\u91cd\u521d\u59cb\u5316\u505a\u540c\u4e00\u4ef6\u4e8b"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u771f\u76f8"}),"\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u6743\u91cd\u521d\u59cb\u5316\uff1a\u4f5c\u7528\u4e8e",(0,i.jsx)(n.strong,{children:"\u53c2\u6570\u7a7a\u95f4"}),"\uff0c\u53ea\u5f71\u54cd\u8d77\u70b9"]}),"\n",(0,i.jsxs)(n.li,{children:["BN\uff1a\u4f5c\u7528\u4e8e",(0,i.jsx)(n.strong,{children:"\u6fc0\u6d3b\u503c\u7a7a\u95f4"}),"\uff0c\u6301\u7eed\u5f71\u54cd\u5168\u7a0b"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-\u8bef\u533a-3\u7528-bn-\u540e\u53ef\u4ee5\u968f\u4fbf\u521d\u59cb\u5316",children:"\u274c \u8bef\u533a 3\uff1a\u7528 BN \u540e\u53ef\u4ee5\u968f\u4fbf\u521d\u59cb\u5316"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u771f\u76f8"}),"\uff1a\u4ecd\u5efa\u8bae\u9075\u5faa\u6700\u4f73\u5b9e\u8df5"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ReLU \u2192 Kaiming \u521d\u59cb\u5316"}),"\n",(0,i.jsx)(n.li,{children:"Sigmoid/Tanh \u2192 Xavier \u521d\u59cb\u5316"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5c0f\u7ed3",children:"\u5c0f\u7ed3"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6743\u91cd\u521d\u59cb\u5316"}),"\uff1a\u597d\u7684\u8d77\u70b9\uff0c\u9632\u6b62\u4e00\u5f00\u59cb\u5c31\u5931\u8d25"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch Normalization"}),"\uff1a\u6301\u7eed\u4f18\u5316\uff0c\u7a33\u5b9a\u8bad\u7ec3\u8fc7\u7a0b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u4e24\u8005",(0,i.jsx)(n.strong,{children:"\u4e92\u8865\u800c\u975e\u66ff\u4ee3"}),"\uff0c\u5e94\u8be5\u540c\u65f6\u4f7f\u7528"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6700\u4f73\u5b9e\u8df5\uff1a\u6b63\u786e\u521d\u59cb\u5316\u6743\u91cd + \u5408\u7406\u4f7f\u7528 BN = \u7a33\u5b9a\u5feb\u901f\u7684\u8bad\u7ec3\uff01"})}),"\n",(0,i.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"http://proceedings.mlr.press/v9/glorot10a.html",children:"Xavier \u521d\u59cb\u5316\u8bba\u6587"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://arxiv.org/abs/1502.01852",children:"Kaiming \u521d\u59cb\u5316\u8bba\u6587"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://arxiv.org/abs/1502.03167",children:"Batch Normalization \u8bba\u6587"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://zh-v2.d2l.ai/chapter_convolutional-modern/batch-norm.html",children:"\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60 - \u6279\u91cf\u5f52\u4e00\u5316"})}),"\n"]})]})}function m(s={}){const{wrapper:n}={...(0,a.R)(),...s.components};return n?(0,i.jsx)(n,{...s,children:(0,i.jsx)(d,{...s})}):d(s)}},28453:(s,n,e)=>{e.d(n,{R:()=>t,x:()=>r});var l=e(96540);const i={},a=l.createContext(i);function t(s){const n=l.useContext(a);return l.useMemo(function(){return"function"==typeof s?s(n):{...n,...s}},[n,s])}function r(s){let n;return n=s.disableParentContext?"function"==typeof s.components?s.components(i):s.components||i:t(s.components),l.createElement(a.Provider,{value:n},s.children)}}}]);