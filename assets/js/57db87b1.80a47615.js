"use strict";(self.webpackChunkyiwen_blog_website=self.webpackChunkyiwen_blog_website||[]).push([[1471],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),m=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=m(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=m(n),u=r,g=d["".concat(l,".").concat(u)]||d[u]||p[u]||i;return n?o.createElement(g,a(a({ref:t},c),{},{components:n})):o.createElement(g,a({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,a[1]=s;for(var m=2;m<i;m++)a[m]=n[m];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8065:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>m});var o=n(87462),r=(n(67294),n(3905));const i={sidebar_position:1},a="Docusaurus \u6dfb\u52a0\u8bc4\u8bba",s={permalink:"/yiwen-blog-website/blog/giscus",editUrl:"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/blog/giscus.md",source:"@site/blog/giscus.md",title:"Docusaurus \u6dfb\u52a0\u8bc4\u8bba",description:"\u524d\u7f6e\u6761\u4ef6",date:"2024-05-31T13:45:37.000Z",formattedDate:"2024\u5e745\u670831\u65e5",tags:[],readingTime:2.69,hasTruncateMarker:!1,authors:[],frontMatter:{sidebar_position:1},prevItem:{title:"git\u7ba1\u7406\u5de5\u5177fork",permalink:"/yiwen-blog-website/blog/fork"},nextItem:{title:"git rebase",permalink:"/yiwen-blog-website/blog/git"}},l={authorsImageUrls:[]},m=[{value:"\u524d\u7f6e\u6761\u4ef6",id:"\u524d\u7f6e\u6761\u4ef6",level:2},{value:"\u5f00\u901a giscus",id:"\u5f00\u901a-giscus",level:2},{value:"\u5c01\u88c5 Comment",id:"\u5c01\u88c5-comment",level:2},{value:"Swizzling Docusaurus",id:"swizzling-docusaurus",level:2},{value:"Swizzling \u6587\u6863\u9875\u9762",id:"swizzling-\u6587\u6863\u9875\u9762",level:3},{value:"Swizzling \u535a\u5ba2\u9875\u9762",id:"swizzling-\u535a\u5ba2\u9875\u9762",level:3}],c={toc:m},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u524d\u7f6e\u6761\u4ef6"},"\u524d\u7f6e\u6761\u4ef6"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"Docusaurus"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"2.4.1")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"@giscus/react"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"2.3.0"))),(0,r.kt)("h2",{id:"\u5f00\u901a-giscus"},"\u5f00\u901a giscus"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://giscus.app/"},"giscus\u5b98\u7f51")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},"\u516c\u5171\u4ed3\u5e93"),(0,r.kt)("li",{parentName:"ol"},"\u5f00\u542f",(0,r.kt)("inlineCode",{parentName:"li"},"discussions")),(0,r.kt)("li",{parentName:"ol"},"\u4e0b\u8f7d",(0,r.kt)("inlineCode",{parentName:"li"},"giscus app")))),(0,r.kt)("h2",{id:"\u5c01\u88c5-comment"},"\u5c01\u88c5 Comment"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5b89\u88c5 ",(0,r.kt)("inlineCode",{parentName:"li"},"@giscus/react"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm i @giscus/react\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u5c01\u88c5 Comment")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="Comment.tsx"',title:'"Comment.tsx"'},'import React from \'react\';\nimport Giscus from \'@giscus/react\';\n\nexport const Comment = () => {\n    return (\n        <div style={{ paddingTop: 50 }}>\n            <Giscus\n                id="comments"\n                // highlight-warn-start\n                // \u8fd9\u90e8\u5206\u586b\u5199\u4f60\u81ea\u5df1\u7684\n                repo="3Alan/site"\n                repoId=""\n                category="Announcements"\n                categoryId=""\n                // highlight-warn-end\n                mapping="title"\n                strict="1"\n                term="Welcome to @giscus/react component!"\n                reactionsEnabled="1"\n                emitMetadata="0"\n                inputPosition="bottom"\n                theme="dark_dimmed"\n                lang="zh-CN"\n                loading="lazy"\n            />\n        </div>\n    );\n};\n\nexport default Comment;\n')),(0,r.kt)("h2",{id:"swizzling-docusaurus"},"Swizzling Docusaurus"),(0,r.kt)("h3",{id:"swizzling-\u6587\u6863\u9875\u9762"},"Swizzling \u6587\u6863\u9875\u9762"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run swizzle @docusaurus/theme-classic DocItem/Layout -- --eject --typescript\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/theme/DocItem/Layout/index.tsx"',title:'"src/theme/DocItem/Layout/index.tsx"'},"import React from 'react';\nimport clsx from 'clsx';\nimport { useWindowSize } from '@docusaurus/theme-common';\n// @ts-ignore\nimport { useDoc } from '@docusaurus/theme-common/internal';\nimport DocItemPaginator from '@theme/DocItem/Paginator';\nimport DocVersionBanner from '@theme/DocVersionBanner';\nimport DocVersionBadge from '@theme/DocVersionBadge';\nimport DocItemFooter from '@theme/DocItem/Footer';\nimport DocItemTOCMobile from '@theme/DocItem/TOC/Mobile';\nimport DocItemTOCDesktop from '@theme/DocItem/TOC/Desktop';\nimport DocItemContent from '@theme/DocItem/Content';\nimport DocBreadcrumbs from '@theme/DocBreadcrumbs';\nimport type { Props } from '@theme/DocItem/Layout';\n\nimport styles from './styles.module.css';\n// highlight-add-line\nimport Comment from '../../../components/comment';\n/**\n * Decide if the toc should be rendered, on mobile or desktop viewports\n */\nfunction useDocTOC() {\n    const { frontMatter, toc } = useDoc();\n    const windowSize = useWindowSize();\n\n    const hidden = frontMatter.hide_table_of_contents;\n    const canRender = !hidden && toc.length > 0;\n\n    const mobile = canRender ? <DocItemTOCMobile /> : undefined;\n\n    const desktop =\n        canRender && (windowSize === 'desktop' || windowSize === 'ssr') ? (\n            <DocItemTOCDesktop />\n        ) : undefined;\n\n    return {\n        hidden,\n        mobile,\n        desktop,\n    };\n}\n\nexport default function DocItemLayout({ children }: Props): JSX.Element {\n    const docTOC = useDocTOC();\n    return (\n        <div className=\"row\">\n            <div className={clsx('col', !docTOC.hidden && styles.docItemCol)}>\n                <DocVersionBanner />\n                <div className={styles.docItemContainer}>\n                    <article>\n                        <DocBreadcrumbs />\n                        <DocVersionBadge />\n                        {docTOC.mobile}\n                        <DocItemContent>{children}</DocItemContent>\n                        <DocItemFooter />\n                    </article>\n                    <DocItemPaginator />\n                </div>\n                // highlight-add-line\n                <Comment />\n            </div>\n            {docTOC.desktop && (\n                <div className=\"col col--3\">{docTOC.desktop}</div>\n            )}\n        </div>\n    );\n}\n")),(0,r.kt)("h3",{id:"swizzling-\u535a\u5ba2\u9875\u9762"},"Swizzling \u535a\u5ba2\u9875\u9762"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run swizzle @docusaurus/theme-classic BlogPostPage -- --eject --typescript\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/theme/BlogPostPage/index.tsx"',title:'"src/theme/BlogPostPage/index.tsx"'},"import React, { type ReactNode } from 'react';\nimport clsx from 'clsx';\nimport {\n    HtmlClassNameProvider,\n    ThemeClassNames,\n} from '@docusaurus/theme-common';\n\nimport {\n    BlogPostProvider,\n    useBlogPost,\n    // @ts-ignore\n} from '@docusaurus/theme-common/internal';\nimport BlogLayout from '@theme/BlogLayout';\nimport BlogPostItem from '@theme/BlogPostItem';\nimport BlogPostPaginator from '@theme/BlogPostPaginator';\nimport BlogPostPageMetadata from '@theme/BlogPostPage/Metadata';\nimport TOC from '@theme/TOC';\nimport type { Props } from '@theme/BlogPostPage';\nimport type { BlogSidebar } from '@docusaurus/plugin-content-blog';\n// highlight-add-line\nimport Comment from '../../components/comment';\n\nfunction BlogPostPageContent({\n    sidebar,\n    children,\n}: {\n    sidebar: BlogSidebar;\n    children: ReactNode;\n}): JSX.Element {\n    const { metadata, toc } = useBlogPost();\n    const { nextItem, prevItem, frontMatter } = metadata;\n    const {\n        hide_table_of_contents: hideTableOfContents,\n        toc_min_heading_level: tocMinHeadingLevel,\n        toc_max_heading_level: tocMaxHeadingLevel,\n    } = frontMatter;\n    return (\n        <BlogLayout\n            sidebar={sidebar}\n            toc={\n                !hideTableOfContents && toc.length > 0 ? (\n                    <TOC\n                        toc={toc}\n                        minHeadingLevel={tocMinHeadingLevel}\n                        maxHeadingLevel={tocMaxHeadingLevel}\n                    />\n                ) : undefined\n            }\n        >\n            <BlogPostItem>{children}</BlogPostItem>\n            {(nextItem || prevItem) && (\n                <BlogPostPaginator nextItem={nextItem} prevItem={prevItem} />\n            )}\n            // highlight-add-line\n            <Comment />\n        </BlogLayout>\n    );\n}\n\nexport default function BlogPostPage(props: Props): JSX.Element {\n    const BlogPostContent = props.content;\n    return (\n        <BlogPostProvider content={props.content} isBlogPostPage>\n            <HtmlClassNameProvider\n                className={clsx(\n                    ThemeClassNames.wrapper.blogPages,\n                    ThemeClassNames.page.blogPostPage\n                )}\n            >\n                <BlogPostPageMetadata />\n                <BlogPostPageContent sidebar={props.sidebar}>\n                    <BlogPostContent />\n                </BlogPostPageContent>\n            </HtmlClassNameProvider>\n        </BlogPostProvider>\n    );\n}\n")))}p.isMDXComponent=!0}}]);