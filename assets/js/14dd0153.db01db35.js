"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[18537],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var o=t(96540);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}},36294:e=>{e.exports=JSON.parse('{"permalink":"/yiwen-blog-website/blog/giscus","editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/blog/giscus.md","source":"@site/blog/giscus.md","title":"Docusaurus \u6dfb\u52a0\u8bc4\u8bba","description":"\u524d\u7f6e\u6761\u4ef6","date":"2025-10-27T16:44:13.000Z","tags":[],"readingTime":2.52,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":1},"unlisted":false,"prevItem":{"title":"git\u7ba1\u7406\u5de5\u5177fork","permalink":"/yiwen-blog-website/blog/fork"},"nextItem":{"title":"git rebase","permalink":"/yiwen-blog-website/blog/git"}}')},90202:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>a});var o=t(36294),s=t(74848),i=t(28453);const r={sidebar_position:1},c="Docusaurus \u6dfb\u52a0\u8bc4\u8bba",l={authorsImageUrls:[]},a=[{value:"\u524d\u7f6e\u6761\u4ef6",id:"\u524d\u7f6e\u6761\u4ef6",level:2},{value:"\u5f00\u901a giscus",id:"\u5f00\u901a-giscus",level:2},{value:"\u5c01\u88c5 Comment",id:"\u5c01\u88c5-comment",level:2},{value:"Swizzling Docusaurus",id:"swizzling-docusaurus",level:2},{value:"Swizzling \u6587\u6863\u9875\u9762",id:"swizzling-\u6587\u6863\u9875\u9762",level:3},{value:"Swizzling \u535a\u5ba2\u9875\u9762",id:"swizzling-\u535a\u5ba2\u9875\u9762",level:3}];function m(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u524d\u7f6e\u6761\u4ef6",children:"\u524d\u7f6e\u6761\u4ef6"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Docusaurus"}),": ",(0,s.jsx)(n.code,{children:"2.4.1"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@giscus/react"}),": ",(0,s.jsx)(n.code,{children:"2.3.0"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5f00\u901a-giscus",children:"\u5f00\u901a giscus"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://giscus.app/",children:"giscus\u5b98\u7f51"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u516c\u5171\u4ed3\u5e93"}),"\n",(0,s.jsxs)(n.li,{children:["\u5f00\u542f",(0,s.jsx)(n.code,{children:"discussions"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u4e0b\u8f7d",(0,s.jsx)(n.code,{children:"giscus app"})]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u5c01\u88c5-comment",children:"\u5c01\u88c5 Comment"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5b89\u88c5 ",(0,s.jsx)(n.code,{children:"@giscus/react"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm i @giscus/react\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"\u5c01\u88c5 Comment"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="Comment.tsx"',children:'import React from \'react\';\nimport Giscus from \'@giscus/react\';\n\nexport const Comment = () => {\n    return (\n        <div style={{ paddingTop: 50 }}>\n            <Giscus\n                id="comments"\n                // highlight-warn-start\n                // \u8fd9\u90e8\u5206\u586b\u5199\u4f60\u81ea\u5df1\u7684\n                repo="3Alan/site"\n                repoId=""\n                category="Announcements"\n                categoryId=""\n                // highlight-warn-end\n                mapping="title"\n                strict="1"\n                term="Welcome to @giscus/react component!"\n                reactionsEnabled="1"\n                emitMetadata="0"\n                inputPosition="bottom"\n                theme="dark_dimmed"\n                lang="zh-CN"\n                loading="lazy"\n            />\n        </div>\n    );\n};\n\nexport default Comment;\n'})}),"\n",(0,s.jsx)(n.h2,{id:"swizzling-docusaurus",children:"Swizzling Docusaurus"}),"\n",(0,s.jsx)(n.h3,{id:"swizzling-\u6587\u6863\u9875\u9762",children:"Swizzling \u6587\u6863\u9875\u9762"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn run swizzle @docusaurus/theme-classic DocItem/Layout -- --eject --typescript\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="src/theme/DocItem/Layout/index.tsx"',children:"import React from 'react';\nimport clsx from 'clsx';\nimport { useWindowSize } from '@docusaurus/theme-common';\n// @ts-ignore\nimport { useDoc } from '@docusaurus/theme-common/internal';\nimport DocItemPaginator from '@theme/DocItem/Paginator';\nimport DocVersionBanner from '@theme/DocVersionBanner';\nimport DocVersionBadge from '@theme/DocVersionBadge';\nimport DocItemFooter from '@theme/DocItem/Footer';\nimport DocItemTOCMobile from '@theme/DocItem/TOC/Mobile';\nimport DocItemTOCDesktop from '@theme/DocItem/TOC/Desktop';\nimport DocItemContent from '@theme/DocItem/Content';\nimport DocBreadcrumbs from '@theme/DocBreadcrumbs';\nimport type { Props } from '@theme/DocItem/Layout';\n\nimport styles from './styles.module.css';\n// highlight-add-line\nimport Comment from '../../../components/comment';\n/**\n * Decide if the toc should be rendered, on mobile or desktop viewports\n */\nfunction useDocTOC() {\n    const { frontMatter, toc } = useDoc();\n    const windowSize = useWindowSize();\n\n    const hidden = frontMatter.hide_table_of_contents;\n    const canRender = !hidden && toc.length > 0;\n\n    const mobile = canRender ? <DocItemTOCMobile /> : undefined;\n\n    const desktop =\n        canRender && (windowSize === 'desktop' || windowSize === 'ssr') ? (\n            <DocItemTOCDesktop />\n        ) : undefined;\n\n    return {\n        hidden,\n        mobile,\n        desktop,\n    };\n}\n\nexport default function DocItemLayout({ children }: Props): JSX.Element {\n    const docTOC = useDocTOC();\n    return (\n        <div className=\"row\">\n            <div className={clsx('col', !docTOC.hidden && styles.docItemCol)}>\n                <DocVersionBanner />\n                <div className={styles.docItemContainer}>\n                    <article>\n                        <DocBreadcrumbs />\n                        <DocVersionBadge />\n                        {docTOC.mobile}\n                        <DocItemContent>{children}</DocItemContent>\n                        <DocItemFooter />\n                    </article>\n                    <DocItemPaginator />\n                </div>\n                // highlight-add-line\n                <Comment />\n            </div>\n            {docTOC.desktop && (\n                <div className=\"col col--3\">{docTOC.desktop}</div>\n            )}\n        </div>\n    );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"swizzling-\u535a\u5ba2\u9875\u9762",children:"Swizzling \u535a\u5ba2\u9875\u9762"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn run swizzle @docusaurus/theme-classic BlogPostPage -- --eject --typescript\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="src/theme/BlogPostPage/index.tsx"',children:"import React, { type ReactNode } from 'react';\nimport clsx from 'clsx';\nimport {\n    HtmlClassNameProvider,\n    ThemeClassNames,\n} from '@docusaurus/theme-common';\n\nimport {\n    BlogPostProvider,\n    useBlogPost,\n    // @ts-ignore\n} from '@docusaurus/theme-common/internal';\nimport BlogLayout from '@theme/BlogLayout';\nimport BlogPostItem from '@theme/BlogPostItem';\nimport BlogPostPaginator from '@theme/BlogPostPaginator';\nimport BlogPostPageMetadata from '@theme/BlogPostPage/Metadata';\nimport TOC from '@theme/TOC';\nimport type { Props } from '@theme/BlogPostPage';\nimport type { BlogSidebar } from '@docusaurus/plugin-content-blog';\n// highlight-add-line\nimport Comment from '../../components/comment';\n\nfunction BlogPostPageContent({\n    sidebar,\n    children,\n}: {\n    sidebar: BlogSidebar;\n    children: ReactNode;\n}): JSX.Element {\n    const { metadata, toc } = useBlogPost();\n    const { nextItem, prevItem, frontMatter } = metadata;\n    const {\n        hide_table_of_contents: hideTableOfContents,\n        toc_min_heading_level: tocMinHeadingLevel,\n        toc_max_heading_level: tocMaxHeadingLevel,\n    } = frontMatter;\n    return (\n        <BlogLayout\n            sidebar={sidebar}\n            toc={\n                !hideTableOfContents && toc.length > 0 ? (\n                    <TOC\n                        toc={toc}\n                        minHeadingLevel={tocMinHeadingLevel}\n                        maxHeadingLevel={tocMaxHeadingLevel}\n                    />\n                ) : undefined\n            }\n        >\n            <BlogPostItem>{children}</BlogPostItem>\n            {(nextItem || prevItem) && (\n                <BlogPostPaginator nextItem={nextItem} prevItem={prevItem} />\n            )}\n            // highlight-add-line\n            <Comment />\n        </BlogLayout>\n    );\n}\n\nexport default function BlogPostPage(props: Props): JSX.Element {\n    const BlogPostContent = props.content;\n    return (\n        <BlogPostProvider content={props.content} isBlogPostPage>\n            <HtmlClassNameProvider\n                className={clsx(\n                    ThemeClassNames.wrapper.blogPages,\n                    ThemeClassNames.page.blogPostPage\n                )}\n            >\n                <BlogPostPageMetadata />\n                <BlogPostPageContent sidebar={props.sidebar}>\n                    <BlogPostContent />\n                </BlogPostPageContent>\n            </HtmlClassNameProvider>\n        </BlogPostProvider>\n    );\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}}}]);