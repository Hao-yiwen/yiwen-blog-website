"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[75117],{7284:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"web/Nextjs/next_docker","title":"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898","description":"\u4ecb\u7ecd","source":"@site/docs/web/Nextjs/next_docker.md","sourceDirName":"web/Nextjs","slug":"/web/Nextjs/next_docker","permalink":"/yiwen-blog-website/docs/web/Nextjs/next_docker","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/web/Nextjs/next_docker.md","tags":[],"version":"current","lastUpdatedAt":1719273600000,"frontMatter":{"title":"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898","sidebar_label":"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898","date":"2024-06-25T00:00:00.000Z","last_update":{"date":"2024-06-25T00:00:00.000Z"}},"sidebar":"webSidebar","previous":{"title":"Nextjs","permalink":"/yiwen-blog-website/docs/web/Nextjs/intro"},"next":{"title":"Rollup","permalink":"/yiwen-blog-website/docs/web/Rollup/intro"}}');var r=n(74848),o=n(28453);const a={title:"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898",sidebar_label:"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898",date:new Date("2024-06-25T00:00:00.000Z"),last_update:{date:new Date("2024-06-25T00:00:00.000Z")}},i="\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898",d={},c=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"\u4f7f\u7528-nginx-\u6620\u5c04-next-\u8d44\u6e90\u7684\u95ee\u9898",children:"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898"})}),"\n",(0,r.jsx)(t.h2,{id:"\u4ecb\u7ecd",children:"\u4ecb\u7ecd"}),"\n",(0,r.jsxs)(t.p,{children:["nextjs \u5982\u679c\u8fd8\u7528\u56fe\u7247\u8d44\u6e90\uff0c\u6846\u67b6\u81ea\u8eab\u4f1a\u5bf9\u56fe\u7247\u8d44\u6e90\u8fdb\u884c\u4f18\u5316\uff0c\u4f18\u5316\u540e\u7684\u8d44\u6e90\u8def\u5f84\u4e0d\u518d\u662f\u539f\u6765\u7684\u8def\u5f84\uff0c\u800c\u662f",(0,r.jsx)(t.code,{children:"/_next/image"}),"\uff0c\u5982\u679c\u4f7f\u7528nginx\u90e8\u7f72\u65f6\u5019\u53ea\u7ed9",(0,r.jsx)(t.code,{children:"/"}),"\u8def\u5f84\u505a\u6620\u5c04\u4f1a\u5bfc\u81f4\u56fe\u7247\u65e0\u6cd5\u52a0\u8f7d\u95ee\u9898\uff0c\u5728\u751f\u4ea7\u90e8\u7f72\u65f6\u5019\u9700\u8981\u6ce8\u610f\u8fd9\u4e2a\u95ee\u9898\u3002"]}),"\n",(0,r.jsx)(t.h2,{id:"\u89e3\u51b3\u65b9\u6848",children:"\u89e3\u51b3\u65b9\u6848"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"server {\n    listen 80;\n    listen [::]:80;\n    server_name _; # \u66ff\u6362\u4e3a\u60a8\u7684\u57df\u540d\n\n    location /_next/image {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n\n    location / {\n        proxy_pass http://localhost:3000; # \u4ee3\u7406\u5230 Next.js \u5e94\u7528\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n"})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var s=n(96540);const r={},o=s.createContext(r);function a(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);