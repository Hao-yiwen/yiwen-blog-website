"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[36515],{12888(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"backend/go/makefile-tutorial","title":"Makefile \u8be6\u89e3","description":"\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u6bcf\u5929\u90fd\u8981\u91cd\u590d\u65e0\u6570\u6b21\u7410\u788e\u7684\u547d\u4ee4\uff1a\u7f16\u8bd1\u4ee3\u7801\u3001\u8fd0\u884c\u6d4b\u8bd5\u3001\u683c\u5f0f\u5316\u98ce\u683c\u3001\u751f\u6210\u6587\u6863\u2026\u2026\u5982\u679c\u6bcf\u6b21\u90fd\u624b\u52a8\u8f93\u5165\u957f\u957f\u7684\u547d\u4ee4\uff0c\u4e0d\u4ec5\u6548\u7387\u4f4e\uff0c\u8fd8\u5bb9\u6613\u51fa\u9519\u3002","source":"@site/docs/backend/go/makefile-tutorial.md","sourceDirName":"backend/go","slug":"/backend/go/makefile-tutorial","permalink":"/yiwen-blog-website/docs/backend/go/makefile-tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/backend/go/makefile-tutorial.md","tags":[],"version":"current","lastUpdatedAt":1771999934000,"sidebarPosition":20,"frontMatter":{"title":"Makefile \u8be6\u89e3","sidebar_label":"Makefile \u8be6\u89e3","sidebar_position":20},"sidebar":"backendSidebar","previous":{"title":"ASCII/Unicode/UTF-8\u7f16\u7801\u8fdb\u5316\u53f2","permalink":"/yiwen-blog-website/docs/backend/go/ascii-unicode-utf8"},"next":{"title":"Wire \u4f9d\u8d56\u6ce8\u5165\u6307\u5357","permalink":"/yiwen-blog-website/docs/backend/go/wire-dependency-injection"}}');var d=l(74848),s=l(28453);const c={title:"Makefile \u8be6\u89e3",sidebar_label:"Makefile \u8be6\u89e3",sidebar_position:20},r="\u7a0b\u5e8f\u5458\u7684\u81ea\u52a8\u5316\u5229\u5668\uff1aMakefile \u8be6\u89e3\uff08\u4ee5 Go \u9879\u76ee\u4e3a\u4f8b\uff09",o={},a=[{value:"\u4e00\u3001\u4ec0\u4e48\u662f Makefile\uff1f",id:"\u4e00\u4ec0\u4e48\u662f-makefile",level:2},{value:"\u6838\u5fc3\u8bed\u6cd5\u7ed3\u6784",id:"\u6838\u5fc3\u8bed\u6cd5\u7ed3\u6784",level:3},{value:"\u4e8c\u3001\u5b9e\u6218\u62c6\u89e3\uff1aGo \u9879\u76ee Makefile \u5206\u6790",id:"\u4e8c\u5b9e\u6218\u62c6\u89e3go-\u9879\u76ee-makefile-\u5206\u6790",level:2},{value:"1. \u53d8\u91cf\u5b9a\u4e49\uff1a\u4e00\u6b21\u4fee\u6539\uff0c\u5168\u5c40\u751f\u6548",id:"1-\u53d8\u91cf\u5b9a\u4e49\u4e00\u6b21\u4fee\u6539\u5168\u5c40\u751f\u6548",level:3},{value:"2. .PHONY\uff1a\u4f2a\u76ee\u6807\u58f0\u660e",id:"2-phony\u4f2a\u76ee\u6807\u58f0\u660e",level:3},{value:"3. \u547d\u4ee4\u56de\u663e\u4e0e\u6291\u5236 (@)",id:"3-\u547d\u4ee4\u56de\u663e\u4e0e\u6291\u5236-",level:3},{value:"4. \u73af\u5883\u53d8\u91cf\u6ce8\u5165\uff1a\u591a\u73af\u5883\u7ba1\u7406",id:"4-\u73af\u5883\u53d8\u91cf\u6ce8\u5165\u591a\u73af\u5883\u7ba1\u7406",level:3},{value:"5. \u903b\u8f91\u63a7\u5236\u4e0e\u81ea\u52a8\u5316\u5b89\u88c5",id:"5-\u903b\u8f91\u63a7\u5236\u4e0e\u81ea\u52a8\u5316\u5b89\u88c5",level:3},{value:"6. \u7ec4\u5408\u547d\u4ee4\uff1a\u4e00\u952e\u5b8c\u6210\u590d\u6742\u6d41\u7a0b",id:"6-\u7ec4\u5408\u547d\u4ee4\u4e00\u952e\u5b8c\u6210\u590d\u6742\u6d41\u7a0b",level:3},{value:"7. \u81ea\u6587\u6863\u5316\uff1aHelp \u547d\u4ee4",id:"7-\u81ea\u6587\u6863\u5316help-\u547d\u4ee4",level:3},{value:"\u4e09\u3001\u5b8c\u6574\u793a\u4f8b\uff1aGo Web \u9879\u76ee Makefile",id:"\u4e09\u5b8c\u6574\u793a\u4f8bgo-web-\u9879\u76ee-makefile",level:2},{value:"\u56db\u3001\u4e3a\u4ec0\u4e48 Go \u9879\u76ee\u63a8\u8350\u4f7f\u7528 Makefile\uff1f",id:"\u56db\u4e3a\u4ec0\u4e48-go-\u9879\u76ee\u63a8\u8350\u4f7f\u7528-makefile",level:2},{value:"1. \u7edf\u4e00\u5165\u53e3 (Unified Interface)",id:"1-\u7edf\u4e00\u5165\u53e3-unified-interface",level:3},{value:"2. \u56fa\u5316\u6d41\u7a0b (Standardization)",id:"2-\u56fa\u5316\u6d41\u7a0b-standardization",level:3},{value:"3. \u8bb0\u5fc6\u51cf\u8d1f (Memory Offloading)",id:"3-\u8bb0\u5fc6\u51cf\u8d1f-memory-offloading",level:3},{value:"4. \u8de8\u5e73\u53f0\u517c\u5bb9",id:"4-\u8de8\u5e73\u53f0\u517c\u5bb9",level:3},{value:"\u4e94\u3001\u603b\u7ed3",id:"\u4e94\u603b\u7ed3",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"\u7a0b\u5e8f\u5458\u7684\u81ea\u52a8\u5316\u5229\u5668makefile-\u8be6\u89e3\u4ee5-go-\u9879\u76ee\u4e3a\u4f8b",children:"\u7a0b\u5e8f\u5458\u7684\u81ea\u52a8\u5316\u5229\u5668\uff1aMakefile \u8be6\u89e3\uff08\u4ee5 Go \u9879\u76ee\u4e3a\u4f8b\uff09"})}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u6bcf\u5929\u90fd\u8981\u91cd\u590d\u65e0\u6570\u6b21\u7410\u788e\u7684\u547d\u4ee4\uff1a\u7f16\u8bd1\u4ee3\u7801\u3001\u8fd0\u884c\u6d4b\u8bd5\u3001\u683c\u5f0f\u5316\u98ce\u683c\u3001\u751f\u6210\u6587\u6863\u2026\u2026\u5982\u679c\u6bcf\u6b21\u90fd\u624b\u52a8\u8f93\u5165\u957f\u957f\u7684\u547d\u4ee4\uff0c\u4e0d\u4ec5\u6548\u7387\u4f4e\uff0c\u8fd8\u5bb9\u6613\u51fa\u9519\u3002"}),"\n",(0,d.jsx)(n.p,{children:'Makefile \u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u751f\u7684\u3002\u5b83\u6700\u65e9\u662f Unix \u7cfb\u7edf\u4e0b\u7684\u6784\u5efa\u5de5\u5177\uff0c\u4f46\u5982\u4eca\u5b83\u5df2\u7ecf\u6f14\u53d8\u6210\u4e86\u4e00\u4e2a\u901a\u7528\u7684**"\u4efb\u52a1\u7ba1\u7406\u795e\u5668"**\u3002'}),"\n",(0,d.jsx)(n.p,{children:"\u672c\u6587\u5c06\u5e26\u4f60\u4e86\u89e3 Makefile \u7684\u6838\u5fc3\u539f\u7406\uff0c\u5e76\u4f7f\u7528\u4e00\u4e2a\u771f\u5b9e\u7684 Go Web \u9879\u76ee\uff08Gin \u6846\u67b6\uff09\u7684 Makefile \u4f5c\u4e3a\u6848\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u7528\u5b83\u6765\u7ba1\u7406\u9879\u76ee\u7684\u5168\u751f\u547d\u5468\u671f\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u4e00\u4ec0\u4e48\u662f-makefile",children:"\u4e00\u3001\u4ec0\u4e48\u662f Makefile\uff1f"}),"\n",(0,d.jsxs)(n.p,{children:["\u7b80\u5355\u6765\u8bf4\uff0cMakefile \u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7684**\u89c4\u5219\uff08Rules\uff09**\u6765\u6307\u5b9a\u6587\u4ef6\u8be5\u5982\u4f55\u7f16\u8bd1\uff0c\u6216\u8005\u547d\u4ee4\u8be5\u5982\u4f55\u6267\u884c\u3002",(0,d.jsx)(n.code,{children:"make"})," \u547d\u4ee4\u4f1a\u8bfb\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 Makefile \u6587\u4ef6\uff0c\u5e76\u6839\u636e\u4f60\u7684\u6307\u4ee4\u6267\u884c\u76f8\u5e94\u7684\u4efb\u52a1\u3002"]}),"\n",(0,d.jsx)(n.p,{children:'\u5b83\u5c31\u50cf\u662f\u9879\u76ee\u7684**"\u63a7\u5236\u53f0"\u6216"\u5feb\u6377\u952e\u5217\u8868"**\u3002'}),"\n",(0,d.jsx)(n.h3,{id:"\u6838\u5fc3\u8bed\u6cd5\u7ed3\u6784",children:"\u6838\u5fc3\u8bed\u6cd5\u7ed3\u6784"}),"\n",(0,d.jsxs)(n.p,{children:["Makefile \u7684\u6838\u5fc3\u7531 ",(0,d.jsx)(n.strong,{children:"\u89c4\u5219\uff08Rule\uff09"})," \u7ec4\u6210\uff0c\u5176\u57fa\u672c\u683c\u5f0f\u5982\u4e0b\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"target: prerequisites\n    command\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Target (\u76ee\u6807)"}),"\uff1a\u4f60\u8981\u505a\u7684\u4e8b\u60c5\uff08\u6bd4\u5982 ",(0,d.jsx)(n.code,{children:"build"}),"\u3001",(0,d.jsx)(n.code,{children:"clean"}),"\uff09\uff0c\u6216\u8005\u8981\u751f\u6210\u7684\u6587\u4ef6\u540d\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Prerequisites (\u524d\u7f6e\u6761\u4ef6)"}),"\uff1a\u6267\u884c\u547d\u4ee4\u524d\u9700\u8981\u6ee1\u8db3\u7684\u6761\u4ef6\uff08\u6bd4\u5982\u4f9d\u8d56\u7684\u5176\u4ed6\u6587\u4ef6\uff09\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Command (\u547d\u4ee4)"}),"\uff1a\u5177\u4f53\u6267\u884c\u7684 Shell \u547d\u4ee4\u3002",(0,d.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a\u547d\u4ee4\u524d\u5fc5\u987b\u4f7f\u7528 Tab \u952e\u7f29\u8fdb\uff0c\u4e0d\u80fd\u7528\u7a7a\u683c\uff01"})]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u4e8c\u5b9e\u6218\u62c6\u89e3go-\u9879\u76ee-makefile-\u5206\u6790",children:"\u4e8c\u3001\u5b9e\u6218\u62c6\u89e3\uff1aGo \u9879\u76ee Makefile \u5206\u6790"}),"\n",(0,d.jsxs)(n.p,{children:["\u8ba9\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"simple-gin"})," \u9879\u76ee\u7684 Makefile\uff0c\u6765\u5b66\u4e60 Makefile \u7684\u5173\u952e\u7279\u6027\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"1-\u53d8\u91cf\u5b9a\u4e49\u4e00\u6b21\u4fee\u6539\u5168\u5c40\u751f\u6548",children:"1. \u53d8\u91cf\u5b9a\u4e49\uff1a\u4e00\u6b21\u4fee\u6539\uff0c\u5168\u5c40\u751f\u6548"}),"\n",(0,d.jsx)(n.p,{children:"\u5728 Makefile \u5f00\u5934\uff0c\u6211\u4eec\u901a\u5e38\u5b9a\u4e49\u53d8\u91cf\u3002\u8fd9\u4f7f\u5f97\u811a\u672c\u66f4\u5177\u901a\u7528\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"# \u53d8\u91cf\u5b9a\u4e49\nAPP_NAME := simple-gin\nBUILD_DIR := bin\nMAIN_FILE := ./cmd/simple-gin\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:":="})," \u8d4b\u503c\u7b26\uff1a\u8fd9\u662f\u6700\u5e38\u7528\u7684\u8d4b\u503c\u65b9\u5f0f\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u4f18\u52bf"}),"\uff1a\u5982\u679c\u4f60\u4ee5\u540e\u60f3\u6539\u9879\u76ee\u540d\u53eb ",(0,d.jsx)(n.code,{children:"super-api"}),"\uff0c\u6216\u8005\u60f3\u628a\u7f16\u8bd1\u4ea7\u7269\u653e\u5230 ",(0,d.jsx)(n.code,{children:"dist"})," \u76ee\u5f55\uff0c\u53ea\u9700\u8981\u6539\u8fd9\u91cc\u7684\u4e00\u884c\u4ee3\u7801\uff0c\u4e0b\u9762\u6240\u6709\u7528\u5230 ",(0,d.jsx)(n.code,{children:"$(APP_NAME)"})," \u7684\u5730\u65b9\u90fd\u4f1a\u81ea\u52a8\u66f4\u65b0\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"2-phony\u4f2a\u76ee\u6807\u58f0\u660e",children:"2. .PHONY\uff1a\u4f2a\u76ee\u6807\u58f0\u660e"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:".PHONY: all build run test clean help\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u6982\u5ff5"}),"\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMake \u8ba4\u4e3a target \u662f\u4e00\u4e2a\u6587\u4ef6\u3002\u5982\u679c\u4f60\u7684\u76ee\u5f55\u4e0b\u521a\u597d\u6709\u4e00\u4e2a\u53eb ",(0,d.jsx)(n.code,{children:"clean"})," \u7684\u6587\u4ef6\uff0c\u4f60\u8fd0\u884c ",(0,d.jsx)(n.code,{children:"make clean"})," \u65f6\uff0cMake \u4f1a\u4ee5\u4e3a\u6587\u4ef6\u5df2\u5b58\u5728\u4e14\u65e0\u9700\u66f4\u65b0\uff0c\u4ece\u800c\u4e0d\u6267\u884c\u547d\u4ee4\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u4f5c\u7528"}),"\uff1a",(0,d.jsx)(n.code,{children:".PHONY"}),' \u544a\u8bc9 Make\uff0c"clean\u3001build \u8fd9\u4e9b\u4e0d\u662f\u6587\u4ef6\u540d\uff0c\u800c\u662f\u64cd\u4f5c\u6307\u4ee4\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u540c\u540d\u6587\u4ef6\uff0c\u8bf7\u52a1\u5fc5\u6267\u884c\u547d\u4ee4"\u3002']}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"3-\u547d\u4ee4\u56de\u663e\u4e0e\u6291\u5236-",children:"3. \u547d\u4ee4\u56de\u663e\u4e0e\u6291\u5236 (@)"}),"\n",(0,d.jsxs)(n.p,{children:["\u89c2\u5bdf ",(0,d.jsx)(n.code,{children:"build"})," \u76ee\u6807\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:'build:\n    @echo ">>> \u7f16\u8bd1\u9879\u76ee..."\n    @mkdir -p $(BUILD_DIR)\n    go build -o $(BUILD_DIR)/$(APP_NAME) $(MAIN_FILE)\n'})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u9ed8\u8ba4\u884c\u4e3a"}),"\uff1aMake \u4f1a\u5728\u7ec8\u7aef\u6253\u5370\u51fa\u5b83\u6b63\u5728\u6267\u884c\u7684\u6bcf\u4e00\u884c\u547d\u4ee4\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsxs)(n.strong,{children:[(0,d.jsx)(n.code,{children:"@"})," \u7684\u4f5c\u7528"]}),"\uff1a\u5728\u547d\u4ee4\u524d\u52a0 ",(0,d.jsx)(n.code,{children:"@"}),"\uff08\u5982 ",(0,d.jsx)(n.code,{children:"@echo"}),"\uff09\uff0cMake \u5c31\u53ea\u4f1a\u6267\u884c\u547d\u4ee4\uff0c\u4e0d\u4f1a\u628a\u547d\u4ee4\u672c\u8eab\u6253\u5370\u51fa\u6765\u3002\u8fd9\u8ba9\u8f93\u51fa\u7ed3\u679c\u66f4\u52a0\u6e05\u723d\uff0c\u53ea\u663e\u793a\u5f00\u53d1\u8005\u5173\u5fc3\u7684 Log\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"4-\u73af\u5883\u53d8\u91cf\u6ce8\u5165\u591a\u73af\u5883\u7ba1\u7406",children:"4. \u73af\u5883\u53d8\u91cf\u6ce8\u5165\uff1a\u591a\u73af\u5883\u7ba1\u7406"}),"\n",(0,d.jsx)(n.p,{children:"Go \u5f00\u53d1\u5e38\u9700\u8981\u533a\u5206\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\u73af\u5883\u3002Makefile \u53ef\u4ee5\u5e2e\u6211\u4eec\u5728\u8fd0\u884c\u524d\u6ce8\u5165\u73af\u5883\u53d8\u91cf\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"## run-prod: \u751f\u4ea7\u73af\u5883\u8fd0\u884c\uff08\u5173\u95ed Swagger\uff09\nrun-prod:\n    APP_ENV=prod go run $(MAIN_FILE)\n\n## run-test: \u6d4b\u8bd5\u73af\u5883\u8fd0\u884c\nrun-test:\n    APP_ENV=test go run $(MAIN_FILE)\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u539f\u7406"}),"\uff1a\u5728 ",(0,d.jsx)(n.code,{children:"go run"})," \u4e4b\u524d\u8bbe\u7f6e ",(0,d.jsx)(n.code,{children:"APP_ENV=prod"}),"\uff0c\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u4ec5\u5bf9\u5f53\u524d\u547d\u4ee4\u6709\u6548\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u4f18\u52bf"}),"\uff1a\u5f00\u53d1\u8005\u4e0d\u9700\u8981\u8bb0\u4f4f\u590d\u6742\u7684 flag\uff0c\u53ea\u9700\u8981\u8f93\u5165 ",(0,d.jsx)(n.code,{children:"make run-prod"}),"\uff0c\u65e2\u5b89\u5168\u53c8\u65b9\u4fbf\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"5-\u903b\u8f91\u63a7\u5236\u4e0e\u81ea\u52a8\u5316\u5b89\u88c5",children:"5. \u903b\u8f91\u63a7\u5236\u4e0e\u81ea\u52a8\u5316\u5b89\u88c5"}),"\n",(0,d.jsx)(n.p,{children:"Makefile \u652f\u6301 Shell \u811a\u672c\u903b\u8f91\uff0c\u8fd9\u5728\u5de5\u5177\u68c0\u67e5\u4e2d\u975e\u5e38\u6709\u7528\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:'## docs: \u751f\u6210 Swagger \u6587\u6863\ndocs:\n    @echo ">>> \u751f\u6210 Swagger \u6587\u6863..."\n    @which swag > /dev/null || (echo "\u5b89\u88c5 swag..." && go install github.com/swaggo/swag/cmd/swag@latest)\n    swag init -g cmd/simple-gin/main.go -o $(DOCS_DIR)\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u89e3\u6790"}),"\uff1a",(0,d.jsx)(n.code,{children:"which swag > /dev/null || ..."})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u8fd9\u662f\u4e00\u6bb5 Shell \u903b\u8f91\u3002\u5b83\u5148\u68c0\u67e5\u7cfb\u7edf\u91cc\u6709\u6ca1\u6709 ",(0,d.jsx)(n.code,{children:"swag"})," \u547d\u4ee4\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c\u6ca1\u627e\u5230\uff08",(0,d.jsx)(n.code,{children:"||"}),"\uff09\uff0c\u5b83\u4f1a\u81ea\u52a8\u6267\u884c\u62ec\u53f7\u91cc\u7684\u547d\u4ee4\u53bb\u5b89\u88c5 ",(0,d.jsx)(n.code,{children:"swag"}),"\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u4ef7\u503c"}),"\uff1a\u65b0\u540c\u4e8b\u5165\u804c\uff0c\u4e0d\u9700\u8981\u770b\u7e41\u7410\u7684\u6587\u6863\u53bb\u4e00\u4e2a\u4e2a\u5b89\u88c5\u5de5\u5177\uff0c\u76f4\u63a5\u8fd0\u884c ",(0,d.jsx)(n.code,{children:"make docs"}),"\uff0c\u73af\u5883\u81ea\u52a8\u914d\u597d\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"6-\u7ec4\u5408\u547d\u4ee4\u4e00\u952e\u5b8c\u6210\u590d\u6742\u6d41\u7a0b",children:"6. \u7ec4\u5408\u547d\u4ee4\uff1a\u4e00\u952e\u5b8c\u6210\u590d\u6742\u6d41\u7a0b"}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u628a\u591a\u4e2a Target \u7ec4\u5408\u6210\u4e00\u4e2a\u65b0\u7684 Target\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"# \u9ed8\u8ba4\u76ee\u6807\nall: deps docs build\n\n## dev: \u5f00\u53d1\u6a21\u5f0f\uff08\u751f\u6210\u6587\u6863 + \u8fd0\u884c\uff09\ndev: docs run\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u5f53\u4f60\u8f93\u5165 ",(0,d.jsx)(n.code,{children:"make dev"})," \u65f6\uff0c\u5b83\u4f1a\u5148\u6267\u884c ",(0,d.jsx)(n.code,{children:"docs"}),"\uff08\u751f\u6210\u6587\u6863\uff09\uff0c\u6210\u529f\u540e\u518d\u6267\u884c ",(0,d.jsx)(n.code,{children:"run"}),"\uff08\u542f\u52a8\u670d\u52a1\uff09\u3002\u8fd9\u4fdd\u8bc1\u4e86\u6bcf\u6b21\u8fd0\u884c\u7684\u4ee3\u7801\u548c\u6587\u6863\u90fd\u662f\u6700\u65b0\u7684\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"7-\u81ea\u6587\u6863\u5316help-\u547d\u4ee4",children:"7. \u81ea\u6587\u6863\u5316\uff1aHelp \u547d\u4ee4"}),"\n",(0,d.jsxs)(n.p,{children:["Makefile \u968f\u7740\u9879\u76ee\u53d8\u5927\u4f1a\u53d8\u5f97\u590d\u6742\uff0c\u63d0\u4f9b\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"help"})," \u547d\u4ee4\u662f\u6700\u4f73\u5b9e\u8df5\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:'help:\n    @echo "Simple Gin - \u53ef\u7528\u547d\u4ee4:"\n    @echo "  make build          - \u7f16\u8bd1\u9879\u76ee\u5230 bin/"\n    @echo "  make test           - \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5"\n    ...\n'})}),"\n",(0,d.jsxs)(n.p,{children:["\u8fd9\u6837\uff0c\u4efb\u4f55\u4eba\u62ff\u5230\u9879\u76ee\uff0c\u53ea\u9700\u6572\u5165 ",(0,d.jsx)(n.code,{children:"make help"}),"\uff0c\u5c31\u80fd\u7acb\u523b\u77e5\u9053\u8be5\u5982\u4f55\u64cd\u4f5c\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"\u4e09\u5b8c\u6574\u793a\u4f8bgo-web-\u9879\u76ee-makefile",children:"\u4e09\u3001\u5b8c\u6574\u793a\u4f8b\uff1aGo Web \u9879\u76ee Makefile"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:'# \u53d8\u91cf\u5b9a\u4e49\nAPP_NAME := simple-gin\nBUILD_DIR := bin\nMAIN_FILE := ./cmd/simple-gin\nDOCS_DIR := docs\n\n# \u4f2a\u76ee\u6807\u58f0\u660e\n.PHONY: all build run run-dev run-prod run-test test test-cover clean deps docs lint fmt help\n\n# \u9ed8\u8ba4\u76ee\u6807\nall: deps docs build\n\n## build: \u7f16\u8bd1\u9879\u76ee\nbuild:\n\t@echo ">>> \u7f16\u8bd1\u9879\u76ee..."\n\t@mkdir -p $(BUILD_DIR)\n\tgo build -o $(BUILD_DIR)/$(APP_NAME) $(MAIN_FILE)\n\n## run: \u8fd0\u884c\u9879\u76ee\uff08\u5f00\u53d1\u73af\u5883\uff09\nrun:\n\t@echo ">>> \u8fd0\u884c\u9879\u76ee..."\n\tgo run $(MAIN_FILE)\n\n## run-dev: \u5f00\u53d1\u73af\u5883\u8fd0\u884c\uff08\u542f\u7528 Swagger\uff09\nrun-dev:\n\tAPP_ENV=dev go run $(MAIN_FILE)\n\n## run-prod: \u751f\u4ea7\u73af\u5883\u8fd0\u884c\uff08\u5173\u95ed Swagger\uff09\nrun-prod:\n\tAPP_ENV=prod go run $(MAIN_FILE)\n\n## run-test: \u6d4b\u8bd5\u73af\u5883\u8fd0\u884c\nrun-test:\n\tAPP_ENV=test go run $(MAIN_FILE)\n\n## test: \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\ntest:\n\t@echo ">>> \u8fd0\u884c\u6d4b\u8bd5..."\n\tgo test -v ./...\n\n## test-cover: \u8fd0\u884c\u6d4b\u8bd5\u5e76\u751f\u6210\u8986\u76d6\u7387\u62a5\u544a\ntest-cover:\n\t@echo ">>> \u8fd0\u884c\u6d4b\u8bd5\u5e76\u751f\u6210\u8986\u76d6\u7387..."\n\tgo test -coverprofile=coverage.out ./...\n\tgo tool cover -html=coverage.out -o coverage.html\n\t@echo "\u8986\u76d6\u7387\u62a5\u544a\u5df2\u751f\u6210: coverage.html"\n\n## clean: \u6e05\u7406\u7f16\u8bd1\u4ea7\u7269\nclean:\n\t@echo ">>> \u6e05\u7406..."\n\t@rm -rf $(BUILD_DIR)\n\t@rm -f coverage.out coverage.html\n\n## deps: \u5b89\u88c5\u4f9d\u8d56\ndeps:\n\t@echo ">>> \u5b89\u88c5\u4f9d\u8d56..."\n\tgo mod download\n\tgo mod tidy\n\n## docs: \u751f\u6210 Swagger \u6587\u6863\ndocs:\n\t@echo ">>> \u751f\u6210 Swagger \u6587\u6863..."\n\t@which swag > /dev/null || (echo "\u5b89\u88c5 swag..." && go install github.com/swaggo/swag/cmd/swag@latest)\n\tswag init -g cmd/simple-gin/main.go -o $(DOCS_DIR)\n\n## lint: \u4ee3\u7801\u68c0\u67e5\nlint:\n\t@echo ">>> \u4ee3\u7801\u68c0\u67e5..."\n\t@which golangci-lint > /dev/null || (echo "\u5b89\u88c5 golangci-lint..." && go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest)\n\tgolangci-lint run ./...\n\n## fmt: \u683c\u5f0f\u5316\u4ee3\u7801\nfmt:\n\t@echo ">>> \u683c\u5f0f\u5316\u4ee3\u7801..."\n\tgo fmt ./...\n\tgoimports -w .\n\n## dev: \u5f00\u53d1\u6a21\u5f0f\uff08\u751f\u6210\u6587\u6863 + \u8fd0\u884c\uff09\ndev: docs run\n\n## help: \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\nhelp:\n\t@echo "Simple Gin - \u53ef\u7528\u547d\u4ee4:"\n\t@echo ""\n\t@echo "  make build          - \u7f16\u8bd1\u9879\u76ee\u5230 bin/"\n\t@echo "  make run            - \u8fd0\u884c\u9879\u76ee\uff08\u5f00\u53d1\u73af\u5883\uff09"\n\t@echo "  make run-dev        - \u5f00\u53d1\u73af\u5883\u8fd0\u884c\uff08\u542f\u7528 Swagger\uff09"\n\t@echo "  make run-prod       - \u751f\u4ea7\u73af\u5883\u8fd0\u884c\uff08\u5173\u95ed Swagger\uff09"\n\t@echo "  make run-test       - \u6d4b\u8bd5\u73af\u5883\u8fd0\u884c"\n\t@echo "  make test           - \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5"\n\t@echo "  make test-cover     - \u8fd0\u884c\u6d4b\u8bd5\u5e76\u751f\u6210\u8986\u76d6\u7387\u62a5\u544a"\n\t@echo "  make clean          - \u6e05\u7406\u7f16\u8bd1\u4ea7\u7269"\n\t@echo "  make deps           - \u5b89\u88c5\u4f9d\u8d56"\n\t@echo "  make docs           - \u751f\u6210 Swagger \u6587\u6863"\n\t@echo "  make lint           - \u4ee3\u7801\u68c0\u67e5"\n\t@echo "  make fmt            - \u683c\u5f0f\u5316\u4ee3\u7801"\n\t@echo "  make dev            - \u5f00\u53d1\u6a21\u5f0f\uff08\u751f\u6210\u6587\u6863 + \u8fd0\u884c\uff09"\n\t@echo "  make help           - \u663e\u793a\u6b64\u5e2e\u52a9\u4fe1\u606f"\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u56db\u4e3a\u4ec0\u4e48-go-\u9879\u76ee\u63a8\u8350\u4f7f\u7528-makefile",children:"\u56db\u3001\u4e3a\u4ec0\u4e48 Go \u9879\u76ee\u63a8\u8350\u4f7f\u7528 Makefile\uff1f"}),"\n",(0,d.jsx)(n.p,{children:"\u867d\u7136 Go \u81ea\u8eab\u7684\u5de5\u5177\u94fe\uff08go tool\uff09\u5df2\u7ecf\u975e\u5e38\u5f3a\u5927\uff0c\u4f46 Makefile \u4f9d\u7136\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\uff0c\u539f\u56e0\u5982\u4e0b\uff1a"}),"\n",(0,d.jsx)(n.h3,{id:"1-\u7edf\u4e00\u5165\u53e3-unified-interface",children:"1. \u7edf\u4e00\u5165\u53e3 (Unified Interface)"}),"\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u7ba1\u4f60\u662f\u7528 Go, Python \u8fd8\u662f C++\uff0c",(0,d.jsx)(n.code,{children:"make build"})," \u7684\u542b\u4e49\u662f\u901a\u7528\u7684\u3002\u5b83\u62b9\u5e73\u4e86\u8bed\u8a00\u6784\u5efa\u5de5\u5177\u7684\u5dee\u5f02\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"2-\u56fa\u5316\u6d41\u7a0b-standardization",children:"2. \u56fa\u5316\u6d41\u7a0b (Standardization)"}),"\n",(0,d.jsxs)(n.p,{children:['\u56e2\u961f\u89c4\u5b9a"\u63d0\u4ea4\u4ee3\u7801\u524d\u5fc5\u987b\u683c\u5f0f\u5316\u548c Lint"\u3002\u5982\u679c\u9760\u53e3\u5934\u89c4\u5b9a\uff0c\u603b\u6709\u4eba\u5fd8\u3002\u4f46\u5982\u679c\u89c4\u5b9a"\u63d0\u4ea4\u524d\u5fc5\u987b\u8dd1\u901a ',(0,d.jsx)(n.code,{children:"make lint"}),'"\uff0c\u6d41\u7a0b\u5c31\u88ab\u56fa\u5316\u5728\u4e86\u4ee3\u7801\u4e2d\u3002']}),"\n",(0,d.jsx)(n.h3,{id:"3-\u8bb0\u5fc6\u51cf\u8d1f-memory-offloading",children:"3. \u8bb0\u5fc6\u51cf\u8d1f (Memory Offloading)"}),"\n",(0,d.jsx)(n.p,{children:"\u8bd5\u6bd4\u8f83\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u624b\u52a8\u8f93\u5165\uff1a",(0,d.jsx)(n.code,{children:"go test -coverprofile=coverage.out ./... && go tool cover -html=coverage.out -o coverage.html"})]}),"\n",(0,d.jsxs)(n.li,{children:["Makefile\uff1a",(0,d.jsx)(n.code,{children:"make test-cover"})]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u663e\u7136\u540e\u8005\u66f4\u5bb9\u6613\u8bb0\u5fc6\u4e14\u4e0d\u6613\u51fa\u9519\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"4-\u8de8\u5e73\u53f0\u517c\u5bb9",children:"4. \u8de8\u5e73\u53f0\u517c\u5bb9"}),"\n",(0,d.jsx)(n.p,{children:"\u867d\u7136 Windows \u5bf9 Make \u7684\u652f\u6301\u4e0d\u5982 Linux/Mac \u539f\u751f\u53cb\u597d\uff0c\u4f46\u5728 WSL\u3001Git Bash \u6216 Docker \u5bb9\u5668\u6d41\u884c\u7684\u4eca\u5929\uff0cMakefile \u5df2\u7ecf\u6210\u4e3a\u4e91\u539f\u751f\u65f6\u4ee3\u7684\u6807\u51c6\u914d\u7f6e\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u4e94\u603b\u7ed3",children:"\u4e94\u3001\u603b\u7ed3"}),"\n",(0,d.jsxs)(n.p,{children:["\u5728\u8fd9\u4e2a ",(0,d.jsx)(n.code,{children:"simple-gin"}),' \u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u4e86 Makefile \u4e0d\u4ec5\u4ec5\u662f\u7528\u6765"\u7f16\u8bd1"\u7684\u3002\u5b83\u5b9e\u9645\u4e0a\u627f\u62c5\u4e86 ',(0,d.jsx)(n.strong,{children:"\u4f9d\u8d56\u7ba1\u7406\u3001\u6587\u6863\u751f\u6210\u3001\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\u3001\u6d4b\u8bd5\u62a5\u544a\u751f\u6210\u3001\u73af\u5883\u8fd0\u884c"})," \u7b49\u5168\u65b9\u4f4d\u7684\u804c\u8d23\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u638c\u63e1 Makefile\uff0c\u901a\u8fc7\u7f16\u5199\u7b80\u5355\u7684\u811a\u672c\u5c06\u590d\u6742\u7684\u8fc7\u7a0b\u81ea\u52a8\u5316\uff0c\u662f\u6bcf\u4e00\u4f4d\u8ffd\u6c42\u9ad8\u6548\u7684\u5de5\u7a0b\u5e08\u7684\u5fc5\u4fee\u8bfe\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}},28453(e,n,l){l.d(n,{R:()=>c,x:()=>r});var i=l(96540);const d={},s=i.createContext(d);function c(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);