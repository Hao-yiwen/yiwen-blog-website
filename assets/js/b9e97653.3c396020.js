"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[75117],{7284:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"web/Nextjs/next_docker","title":"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898","description":"\u4ecb\u7ecd","source":"@site/docs/web/Nextjs/next_docker.md","sourceDirName":"web/Nextjs","slug":"/web/Nextjs/next_docker","permalink":"/yiwen-blog-website/docs/web/Nextjs/next_docker","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/web/Nextjs/next_docker.md","tags":[],"version":"current","frontMatter":{},"sidebar":"webSidebar","previous":{"title":"Nextjs","permalink":"/yiwen-blog-website/docs/web/Nextjs/intro"},"next":{"title":"Rollup","permalink":"/yiwen-blog-website/docs/web/Rollup/intro"}}');var r=t(74848),o=t(28453);const i={},a="\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898",c={},d=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u4f7f\u7528-nginx-\u6620\u5c04-next-\u8d44\u6e90\u7684\u95ee\u9898",children:"\u4f7f\u7528 nginx \u6620\u5c04 next \u8d44\u6e90\u7684\u95ee\u9898"})}),"\n",(0,r.jsx)(n.h2,{id:"\u4ecb\u7ecd",children:"\u4ecb\u7ecd"}),"\n",(0,r.jsxs)(n.p,{children:["nextjs \u5982\u679c\u8fd8\u7528\u56fe\u7247\u8d44\u6e90\uff0c\u6846\u67b6\u81ea\u8eab\u4f1a\u5bf9\u56fe\u7247\u8d44\u6e90\u8fdb\u884c\u4f18\u5316\uff0c\u4f18\u5316\u540e\u7684\u8d44\u6e90\u8def\u5f84\u4e0d\u518d\u662f\u539f\u6765\u7684\u8def\u5f84\uff0c\u800c\u662f",(0,r.jsx)(n.code,{children:"/_next/image"}),"\uff0c\u5982\u679c\u4f7f\u7528nginx\u90e8\u7f72\u65f6\u5019\u53ea\u7ed9",(0,r.jsx)(n.code,{children:"/"}),"\u8def\u5f84\u505a\u6620\u5c04\u4f1a\u5bfc\u81f4\u56fe\u7247\u65e0\u6cd5\u52a0\u8f7d\u95ee\u9898\uff0c\u5728\u751f\u4ea7\u90e8\u7f72\u65f6\u5019\u9700\u8981\u6ce8\u610f\u8fd9\u4e2a\u95ee\u9898\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u89e3\u51b3\u65b9\u6848",children:"\u89e3\u51b3\u65b9\u6848"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"server {\n    listen 80;\n    listen [::]:80;\n    server_name _; # \u66ff\u6362\u4e3a\u60a8\u7684\u57df\u540d\n\n    location /_next/image {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n\n    location / {\n        proxy_pass http://localhost:3000; # \u4ee3\u7406\u5230 Next.js \u5e94\u7528\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n"})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var s=t(96540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);