"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[60335],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var a=s(96540);const c={},i=a.createContext(c);function r(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),a.createElement(i.Provider,{value:n},e.children)}},57275:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"backend/java/nacos_setting","title":"nacos\u914d\u7f6e","description":"\u67b6\u6784\u56fe","source":"@site/docs/backend/java/nacos_setting.md","sourceDirName":"backend/java","slug":"/backend/java/nacos_setting","permalink":"/yiwen-blog-website/docs/backend/java/nacos_setting","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/backend/java/nacos_setting.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"backendSidebar","previous":{"title":"Java\u8bed\u8a00\u7ec4\u6210\u90e8\u5206","permalink":"/yiwen-blog-website/docs/backend/java/java_base"},"next":{"title":"\u7f51\u5173\u914d\u7f6e","permalink":"/yiwen-blog-website/docs/backend/java/gateway_setting"}}');var c=s(74848),i=s(28453);const r=s.p+"assets/images/nacos_setting-65a83b4868a086edde37fedbfa63a6a1.png",o={sidebar_position:2},t="nacos\u914d\u7f6e",l={},d=[{value:"\u67b6\u6784\u56fe",id:"\u67b6\u6784\u56fe",level:2},{value:"pom\u4f9d\u8d56\u5f15\u5165",id:"pom\u4f9d\u8d56\u5f15\u5165",level:2},{value:"\u672c\u5730bootstarp.yml\u57fa\u672c\u914d\u7f6e",id:"\u672c\u5730bootstarpyml\u57fa\u672c\u914d\u7f6e",level:2},{value:"nacos\u8fdc\u7a0b\u914d\u7f6e",id:"nacos\u8fdc\u7a0b\u914d\u7f6e",level:2},{value:"\u6570\u636e\u5e93\u6269\u5c55\u914d\u7f6e",id:"\u6570\u636e\u5e93\u6269\u5c55\u914d\u7f6e",level:2},{value:"swagger\u516c\u5171\u914d\u7f6e",id:"swagger\u516c\u5171\u914d\u7f6e",level:2},{value:"logger\u516c\u5171\u914d\u7f6e",id:"logger\u516c\u5171\u914d\u7f6e",level:2},{value:"\u6700\u7ec8\u672c\u5730nacos\u914d\u7f6e",id:"\u6700\u7ec8\u672c\u5730nacos\u914d\u7f6e",level:2},{value:"\u914d\u7f6e\u4f18\u5148\u7ea7",id:"\u914d\u7f6e\u4f18\u5148\u7ea7",level:2}];function g(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"nacos\u914d\u7f6e",children:"nacos\u914d\u7f6e"})}),"\n",(0,c.jsx)(n.h2,{id:"\u67b6\u6784\u56fe",children:"\u67b6\u6784\u56fe"}),"\n",(0,c.jsx)("img",{src:r,style:{width:700}}),"\n",(0,c.jsx)(n.h2,{id:"pom\u4f9d\u8d56\u5f15\u5165",children:"pom\u4f9d\u8d56\u5f15\u5165"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n</dependency>\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u672c\u5730bootstarpyml\u57fa\u672c\u914d\u7f6e",children:"\u672c\u5730bootstarp.yml\u57fa\u672c\u914d\u7f6e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="\u672c\u5730\u914d\u7f6e"',children:"spring:\n    application:\n        name: content-api # \u670d\u52a1\u540d\n    cloud:\n        nacos:\n            server-addr: 127.0.0.1:8848\n            discovery: # \u670d\u52a1\u6ce8\u518c\n                namespace: dev402\n                group: xuecheng-plus-project\n            config: # \u914d\u7f6e\u6587\u4ef6\u76f8\u5173\u914d\u7f6e\n                namespace: dev402\n                group: xuecheng-plus-project\n                file-extension: yaml\n                refresh-enabled: true\n    profiles:\n        active: dev # \u73af\u5883\u540d\n"})}),"\n",(0,c.jsx)(n.h2,{id:"nacos\u8fdc\u7a0b\u914d\u7f6e",children:"nacos\u8fdc\u7a0b\u914d\u7f6e"}),"\n",(0,c.jsxs)(n.p,{children:["\u6839\u636e\u672c\u5730\u914d\u7f6e\u7684\u89c4\u5219\u65b0\u5efa\u8fdc\u7a0b\u914d\u7f6e\uff0c\u4f8b\u5982\u4e0a\u8ff0\u672c\u5730\u914d\u7f6e\u9700\u8981\u5728\u547d\u540d\u7a7a\u95f4",(0,c.jsx)(n.code,{children:"dev402"}),"\u4e2d\u521b\u5efa\u4ee5\u4e0b\u8fdc\u7a0b\u914d\u7f6e\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"data Id"}),": ",(0,c.jsx)(n.code,{children:"content-api-dev.yaml"})]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"group"}),": ",(0,c.jsx)(n.code,{children:"xuecheng-plus-project"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="content-api-dev.yaml"',children:"server:\n    servlet:\n        context-path: /content\n    port: 63040\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u6570\u636e\u5e93\u6269\u5c55\u914d\u7f6e",children:"\u6570\u636e\u5e93\u6269\u5c55\u914d\u7f6e"}),"\n",(0,c.jsxs)(n.p,{children:["\u60f3\u5fc5\u5927\u5bb6\u53d1\u73b0\u4e86\uff0c\u5728\u4e0a\u8ff0\u7684\u914d\u7f6e\u4e2d\u5176\u5b9e\u4e0d\u5b58\u5728\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u4e3a\u4ec0\u4e48\u90a3\uff0c\u56e0\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u4e8e",(0,c.jsx)(n.code,{children:"service"}),"\u5c42\uff0c\u5728\u53e6\u4e00\u4e2a\u914d\u7f6e\u4e2d\uff0c\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u5728\u8ba9\u4e00\u4e2a\u670d\u52a1\u53bb\u83b7\u5f97\u591a\u4e2a\u914d\u7f6e\u90a3\uff0c",(0,c.jsx)(n.code,{children:"nacos"}),"\u62e5\u6709\u6269\u5c55\u914d\u7f6e\u6a21\u5757\uff0c\u53ef\u8f7b\u677e\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="\u672c\u5730\u914d\u7f6e"',children:"spring:\n    application:\n        # ...\u7701\u7565\n    cloud:\n        nacos:\n            # ...\u7701\u7565\n            discovery:# \u670d\u52a1\u6ce8\u518c\n                # ...\u7701\u7565\n            config: # \u914d\u7f6e\u6587\u4ef6\u76f8\u5173\u914d\u7f6e\n                # ...\u7701\u7565\n                extension-configs: # \u6269\u5c55\u914d\u7f6e\n                    - data-id: content-service-${spring.profiles.active}.yaml\n                      group: xuecheng-plus-project\n                      refresh: true\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="content-service-dev.yaml"',children:"spring:\n    datasource:\n        driver-class-name: com.mysql.cj.jdbc.Driver\n        url: jdbc:mysql://localhost:3306/xc402_content?serverTimezone=UTC&userUnicode=true&useSSL=false&\n        username: root\n        password: hyw650022\n"})}),"\n",(0,c.jsx)(n.h2,{id:"swagger\u516c\u5171\u914d\u7f6e",children:"swagger\u516c\u5171\u914d\u7f6e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="\u672c\u5730\u914d\u7f6e"',children:"spring:\n    application:\n        # ...\u7701\u7565\n    cloud:\n        nacos:\n            # ...\u7701\u7565\n            discovery:# \u670d\u52a1\u6ce8\u518c\n                # ...\u7701\u7565\n            config: # \u914d\u7f6e\u6587\u4ef6\u76f8\u5173\u914d\u7f6e\n                # ...\u7701\u7565\n                extension-configs:# \u6269\u5c55\u914d\u7f6e\n                    # ...\u7701\u7565\n                shared-configs:\n                    - data-id: swagger-${spring.profiles.active}.yaml\n                      group: xuecheng-plus-common\n                      refresh: true\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="swagger-dev.yaml"',children:"# swagger \u6587\u6863\u914d\u7f6e\nswagger:\n    title: '\u5b66\u6210\u5728\u7ebf\u9879\u76ee\u63a5\u53e3\u6587\u6863'\n    description: '\u5b66\u6210\u5728\u7ebf\u9879\u76ee\u63a5\u53e3\u6587\u6863'\n    base-package: com.xuecheng\n    enabled: true\n    version: 1.0.0\n"})}),"\n",(0,c.jsx)(n.h2,{id:"logger\u516c\u5171\u914d\u7f6e",children:"logger\u516c\u5171\u914d\u7f6e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="\u672c\u5730\u914d\u7f6e"',children:"spring:\n  application:\n    # ...\u7701\u7565\n  cloud:\n    nacos:\n      # ...\u7701\u7565\n      discovery: # \u670d\u52a1\u6ce8\u518c\n        # ...\u7701\u7565\n      config: # \u914d\u7f6e\u6587\u4ef6\u76f8\u5173\u914d\u7f6e\n        # ...\u7701\u7565\n        extension-configs: # \u6269\u5c55\u914d\u7f6e\n          # ...\u7701\u7565\n        shared-configs:\n            # ...\u7701\u7565\n            - data-id: logging-${spring.profiles.active}.yaml\n            group: xuecheng-plus-common\n            refresh: true\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",metastring:'title="logging-dev.yaml"',children:"# \u65e5\u5fd7\u6587\u4ef6\u914d\u7f6e\u8def\u5f84\nlogging:\n    config: classpath:log4j2-dev.xml\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u6700\u7ec8\u672c\u5730nacos\u914d\u7f6e",children:"\u6700\u7ec8\u672c\u5730nacos\u914d\u7f6e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"#\u5fae\u670d\u52a1\u914d\u7f6e\nspring:\n    application:\n        name: content-api # \u670d\u52a1\u540d\n    cloud:\n        nacos:\n            server-addr: 127.0.0.1:8848\n            discovery: # \u670d\u52a1\u6ce8\u518c\n                namespace: dev402\n                group: xuecheng-plus-project\n            config: # \u914d\u7f6e\u6587\u4ef6\u76f8\u5173\u914d\u7f6e\n                namespace: dev402\n                group: xuecheng-plus-project\n                file-extension: yaml\n                refresh-enabled: true\n                extension-configs:\n                    - data-id: content-service-${spring.profiles.active}.yaml\n                      group: xuecheng-plus-project\n                      refresh: true\n                shared-configs:\n                    - data-id: swagger-${spring.profiles.active}.yaml\n                      group: xuecheng-plus-common\n                      refresh: true\n                    - data-id: logging-${spring.profiles.active}.yaml\n                      group: xuecheng-plus-common\n                      refresh: true\n    profiles:\n        active: dev # \u73af\u5883\u540d\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u914d\u7f6e\u4f18\u5148\u7ea7",children:"\u914d\u7f6e\u4f18\u5148\u7ea7"}),"\n",(0,c.jsx)(n.p,{children:"\u9879\u76ee\u5e94\u7528\u540d\u914d\u7f6e\u6587\u4ef6 > \u6269\u5c55\u914d\u7f6e\u6587\u4ef6 > \u5171\u4eab\u914d\u7f6e\u6587\u4ef6 > \u672c\u5730\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,c.jsxs)(n.admonition,{type:"note",children:[(0,c.jsxs)(n.p,{children:["\u4f46\u662f\u5f88\u591a\u65f6\u5019\u672c\u5730\u9700\u8981\u542f\u52a8\u591a\u4e2a\u670d\u52a1\uff0c\u8fd9\u4e2a\u65f6\u5019\u4fee\u6539",(0,c.jsx)(n.code,{children:"nacos"}),"\u914d\u7f6e\u662f\u4e0d\u5408\u7406\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7",(0,c.jsx)(n.code,{children:"vm option"}),"\u65b9\u5f0f\u4f20\u53c2\u3002"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"-Dserver.port=63041\n"})})]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(g,{...e})}):g(e)}}}]);