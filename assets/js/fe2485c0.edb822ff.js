"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[48390],{15877:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"backend/java/upload_oss","title":"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS","description":"\u4f7f\u7528\u963f\u91cc\u4e91OSS\u4f5c\u4e3a\u9759\u6001\u8d44\u6e90\u4fdd\u5b58\u573a\u6240\u3002\u4f7f\u7528\u6587\u6863","source":"@site/docs/backend/java/upload_oss.md","sourceDirName":"backend/java","slug":"/backend/java/upload_oss","permalink":"/yiwen-blog-website/docs/backend/java/upload_oss","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/backend/java/upload_oss.md","tags":[],"version":"current","frontMatter":{},"sidebar":"backendSidebar","previous":{"title":"Java\u4e2d\u7684\u5404\u79cd\u6d41","permalink":"/yiwen-blog-website/docs/backend/java/streams"},"next":{"title":"\u4e3a\u4ec0\u4e48\u4f20\u8f93\u6570\u636e\u9700\u8981\u5e8f\u5217\u5316\uff0c\u800c\u4e0d\u80fd\u76f4\u63a5\u4f20\u8f93\uff1f","permalink":"/yiwen-blog-website/docs/backend/java/whysequence"}}');var a=t(74848),s=t(28453);const o={},l="\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS",r={},c=[{value:"\u4e0a\u4f20\u793a\u4f8b",id:"\u4e0a\u4f20\u793a\u4f8b",level:2},{value:"\u4f9d\u8d56",id:"\u4f9d\u8d56",level:3},{value:"spring boot\u793a\u4f8b",id:"spring-boot\u793a\u4f8b",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccoss",children:"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS"})}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528\u963f\u91cc\u4e91OSS\u4f5c\u4e3a\u9759\u6001\u8d44\u6e90\u4fdd\u5b58\u573a\u6240\u3002",(0,a.jsx)(n.a,{href:"https://help.aliyun.com/zh/oss/getting-started/sdk-quick-start?spm=a2c4g.11186623.0.0.2d4a4a74iqsgTm",children:"\u4f7f\u7528\u6587\u6863"})]}),"\n",(0,a.jsx)(n.h2,{id:"\u4e0a\u4f20\u793a\u4f8b",children:"\u4e0a\u4f20\u793a\u4f8b"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f9d\u8d56",children:"\u4f9d\u8d56"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"implementation 'com.aliyun.oss:aliyun-sdk-oss:3.15.1'\nimplementation 'javax.xml.bind:jaxb-api:2.3.1'\nimplementation 'javax.activation:activation:1.1.1'\nimplementation 'org.glassfish.jaxb:jaxb-runtime:2.3.3'\n"})}),"\n",(0,a.jsx)(n.h3,{id:"spring-boot\u793a\u4f8b",children:"spring boot\u793a\u4f8b"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public FileDto upload(@RequestParam("file") MultipartFile file) {\n    if (file.isEmpty()) {\n        return null;\n    }\n    String fileName = FileUtil.generateUniqueFileName(file.getOriginalFilename());\n\n    CredentialsProvider credentialsProvider = new DefaultCredentialProvider(accessKeyId, accessKeySecret);\n    OSS ossClient = new OSSClientBuilder().build(endpoint, credentialsProvider);\n    FileDto fileDto = new FileDto();\n    try {\n        ossClient.putObject(bucketName, fileName, file.getInputStream());\n        fileDto.setThumbUrl("https://" + bucketName + "." + endpoint + "/" + fileName);\n        fileDto.setUrl("https://" + bucketName + "." + endpoint + "/" + fileName);\n        fileDto.setName(fileName);\n        fileDto.setStatus("done");\n        return fileDto;\n    } catch (Exception e) {\n        log.error("Error uploading file to OSS", e);\n        fileDto.setStatus("error");\n\n    }\n    return fileDto;\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(96540);const a={},s=i.createContext(a);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);