"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[70910],{28453(e,t,n){n.d(t,{R:()=>l,x:()=>o});var i=n(96540);const a={},s=i.createContext(a);function l(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),i.createElement(s.Provider,{value:t},e.children)}},75613(e,t,n){n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"backend/java/spring/upload_oss","title":"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS","description":"\u4f7f\u7528\u963f\u91cc\u4e91OSS\u4f5c\u4e3a\u9759\u6001\u8d44\u6e90\u4fdd\u5b58\u573a\u6240\u3002\u4f7f\u7528\u6587\u6863","source":"@site/docs/backend/java/spring/upload_oss.md","sourceDirName":"backend/java/spring","slug":"/backend/java/spring/upload_oss","permalink":"/yiwen-blog-website/docs/backend/java/spring/upload_oss","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/backend/java/spring/upload_oss.md","tags":[],"version":"current","lastUpdatedAt":1719273600000,"frontMatter":{"title":"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS","sidebar_label":"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS","date":"2024-06-25T00:00:00.000Z","last_update":{"date":"2024-06-25T00:00:00.000Z"}},"sidebar":"backendSidebar","previous":{"title":"SpringBoot3\u5f15\u5165Jwt","permalink":"/yiwen-blog-website/docs/backend/java/spring/springboot3_jwt"},"next":{"title":"Mysql","permalink":"/yiwen-blog-website/docs/category/mysql"}}');var a=n(74848),s=n(28453);const l={title:"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS",sidebar_label:"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS",date:new Date("2024-06-25T00:00:00.000Z"),last_update:{date:new Date("2024-06-25T00:00:00.000Z")}},o="\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS",r={},d=[{value:"\u4e0a\u4f20\u793a\u4f8b",id:"\u4e0a\u4f20\u793a\u4f8b",level:2},{value:"\u4f9d\u8d56",id:"\u4f9d\u8d56",level:3},{value:"spring boot\u793a\u4f8b",id:"spring-boot\u793a\u4f8b",level:3}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccoss",children:"\u4e0a\u4f20\u6587\u4ef6\u81f3\u963f\u91ccOSS"})}),"\n",(0,a.jsxs)(t.p,{children:["\u4f7f\u7528\u963f\u91cc\u4e91OSS\u4f5c\u4e3a\u9759\u6001\u8d44\u6e90\u4fdd\u5b58\u573a\u6240\u3002",(0,a.jsx)(t.a,{href:"https://help.aliyun.com/zh/oss/getting-started/sdk-quick-start?spm=a2c4g.11186623.0.0.2d4a4a74iqsgTm",children:"\u4f7f\u7528\u6587\u6863"})]}),"\n",(0,a.jsx)(t.h2,{id:"\u4e0a\u4f20\u793a\u4f8b",children:"\u4e0a\u4f20\u793a\u4f8b"}),"\n",(0,a.jsx)(t.h3,{id:"\u4f9d\u8d56",children:"\u4f9d\u8d56"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"implementation 'com.aliyun.oss:aliyun-sdk-oss:3.15.1'\nimplementation 'javax.xml.bind:jaxb-api:2.3.1'\nimplementation 'javax.activation:activation:1.1.1'\nimplementation 'org.glassfish.jaxb:jaxb-runtime:2.3.3'\n"})}),"\n",(0,a.jsx)(t.h3,{id:"spring-boot\u793a\u4f8b",children:"spring boot\u793a\u4f8b"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'public FileDto upload(@RequestParam("file") MultipartFile file) {\n    if (file.isEmpty()) {\n        return null;\n    }\n    String fileName = FileUtil.generateUniqueFileName(file.getOriginalFilename());\n\n    CredentialsProvider credentialsProvider = new DefaultCredentialProvider(accessKeyId, accessKeySecret);\n    OSS ossClient = new OSSClientBuilder().build(endpoint, credentialsProvider);\n    FileDto fileDto = new FileDto();\n    try {\n        ossClient.putObject(bucketName, fileName, file.getInputStream());\n        fileDto.setThumbUrl("https://" + bucketName + "." + endpoint + "/" + fileName);\n        fileDto.setUrl("https://" + bucketName + "." + endpoint + "/" + fileName);\n        fileDto.setName(fileName);\n        fileDto.setStatus("done");\n        return fileDto;\n    } catch (Exception e) {\n        log.error("Error uploading file to OSS", e);\n        fileDto.setStatus("error");\n\n    }\n    return fileDto;\n}\n'})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);