"use strict";(globalThis.webpackChunkyiwen_blog_website=globalThis.webpackChunkyiwen_blog_website||[]).push([[5994],{28453:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>c});var s=i(96540);const r={},t=s.createContext(r);function d(n){const e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),s.createElement(t.Provider,{value:e},n.children)}},48257:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"backend/go/char-encoding-rune","title":"\u5b57\u7b26\u7f16\u7801\u4e0erune","description":"\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u7cbe\u51c6\u7684\u95ee\u9898\uff01\u4f60\u89e6\u78b0\u5230\u4e86 \u5b57\u7b26\u7f16\u7801\uff08Encoding\uff09 \u548c \u5b57\u7b26\u96c6\uff08Character Set\uff09 \u7684\u6838\u5fc3\u533a\u522b\u3002","source":"@site/docs/backend/go/char-encoding-rune.md","sourceDirName":"backend/go","slug":"/backend/go/char-encoding-rune","permalink":"/yiwen-blog-website/docs/backend/go/char-encoding-rune","draft":false,"unlisted":false,"editUrl":"https://github.com/Hao-yiwen/yiwen-blog-website/tree/master/docs/backend/go/char-encoding-rune.md","tags":[{"inline":true,"label":"go","permalink":"/yiwen-blog-website/docs/tags/go"},{"inline":true,"label":"string","permalink":"/yiwen-blog-website/docs/tags/string"},{"inline":true,"label":"rune","permalink":"/yiwen-blog-website/docs/tags/rune"},{"inline":true,"label":"utf-8","permalink":"/yiwen-blog-website/docs/tags/utf-8"},{"inline":true,"label":"unicode","permalink":"/yiwen-blog-website/docs/tags/unicode"},{"inline":true,"label":"\u5b57\u7b26\u7f16\u7801","permalink":"/yiwen-blog-website/docs/tags/\u5b57\u7b26\u7f16\u7801"}],"version":"current","lastUpdatedAt":1768417262000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"\u5b57\u7b26\u7f16\u7801\u4e0erune","tags":["go","string","rune","utf-8","unicode","\u5b57\u7b26\u7f16\u7801"]},"sidebar":"backendSidebar","previous":{"title":"new\u5173\u952e\u5b57\u4e0e\u6307\u9488\u521d\u59cb\u5316","permalink":"/yiwen-blog-website/docs/backend/go/pointer-initialization"},"next":{"title":"\u5207\u7247\u4f20\u53c2\u7684\u503c\u62f7\u8d1d\u9677\u9631","permalink":"/yiwen-blog-website/docs/backend/go/slice-pass-by-value"}}');var r=i(74848),t=i(28453);const d={sidebar_position:10,title:"\u5b57\u7b26\u7f16\u7801\u4e0erune",tags:["go","string","rune","utf-8","unicode","\u5b57\u7b26\u7f16\u7801"]},c="Go \u5b57\u7b26\u7f16\u7801\uff1aString vs Rune",l={},o=[{value:"1. \u5b58\u50a8\u5f62\u6001\uff1aString (UTF-8, <code>uint8</code>)",id:"1-\u5b58\u50a8\u5f62\u6001string-utf-8-uint8",level:2},{value:"2. \u903b\u8f91\u5f62\u6001\uff1aRune (Unicode, <code>int32</code>)",id:"2-\u903b\u8f91\u5f62\u6001rune-unicode-int32",level:2},{value:"3. \u4ee3\u7801\u5b9e\u9524\u9a8c\u8bc1",id:"3-\u4ee3\u7801\u5b9e\u9524\u9a8c\u8bc1",level:2},{value:"4. \u603b\u7ed3\u5bf9\u6bd4",id:"4-\u603b\u7ed3\u5bf9\u6bd4",level:2},{value:"5. Range \u904d\u5386\u7684\u79d8\u5bc6",id:"5-range-\u904d\u5386\u7684\u79d8\u5bc6",level:2},{value:"\u76f8\u5173\u9605\u8bfb",id:"\u76f8\u5173\u9605\u8bfb",level:2}];function h(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"go-\u5b57\u7b26\u7f16\u7801string-vs-rune",children:"Go \u5b57\u7b26\u7f16\u7801\uff1aString vs Rune"})}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u7cbe\u51c6\u7684\u95ee\u9898\uff01\u4f60\u89e6\u78b0\u5230\u4e86 ",(0,r.jsx)(e.strong,{children:"\u5b57\u7b26\u7f16\u7801\uff08Encoding\uff09"})," \u548c ",(0,r.jsx)(e.strong,{children:"\u5b57\u7b26\u96c6\uff08Character Set\uff09"})," \u7684\u6838\u5fc3\u533a\u522b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u7b80\u77ed\u7684\u56de\u7b54\u662f\uff1a",(0,r.jsx)(e.strong,{children:"\u4f60\u8bf4\u7684\u90fd\u5bf9\uff0c\u4f46\u662f\u573a\u666f\u4e0d\u540c\u3002"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5b58\u50a8/\u4f20\u8f93\u65f6\uff08String\uff09"}),"\uff1a\u662f\u7528 3 \u4e2a ",(0,r.jsx)(e.code,{children:"byte"})," (",(0,r.jsx)(e.code,{children:"uint8"}),") \u6765\u8868\u793a\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\uff08\u5728 UTF-8 \u7f16\u7801\u4e0b\uff09\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5904\u7406/\u8ba1\u7b97\u65f6\uff08Rune\uff09"}),"\uff1a\u662f\u7528 1 \u4e2a ",(0,r.jsx)(e.code,{children:"int32"})," \u6765\u8868\u793a\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\uff08\u8fd9\u5c31\u662f Go \u91cc\u7684 ",(0,r.jsx)(e.code,{children:"rune"}),"\uff09\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u60f3\u8c61\u6210 ",(0,r.jsx)(e.strong,{children:'"\u6253\u5305"'})," \u548c ",(0,r.jsx)(e.strong,{children:'"\u89e3\u5305"'})," \u7684\u5173\u7cfb\u3002"]}),"\n",(0,r.jsxs)(e.h2,{id:"1-\u5b58\u50a8\u5f62\u6001string-utf-8-uint8",children:["1. \u5b58\u50a8\u5f62\u6001\uff1aString (UTF-8, ",(0,r.jsx)(e.code,{children:"uint8"}),")"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u662f\u4e3a\u4e86\u7701\u7a7a\u95f4\u3002"})}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u6240\u6709\u7684\u5b57\u7b26\uff08\u5305\u62ec\u7b80\u5355\u7684\u82f1\u6587 'a', 'b'\uff09\u90fd\u7528 ",(0,r.jsx)(e.code,{children:"int32"}),"\uff084\u4e2a\u5b57\u8282\uff09\u5b58\uff0c\u90a3\u539f\u672c 1GB \u7684\u82f1\u6587\u6587\u4ef6\u5c31\u4f1a\u53d8\u6210 4GB\uff0c\u592a\u6d6a\u8d39\u4e86\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["Go \u7684 ",(0,r.jsx)(e.code,{children:"string"})," \u9ed8\u8ba4\u4f7f\u7528 ",(0,r.jsx)(e.strong,{children:"UTF-8"})," \u7f16\u7801\uff0c\u8fd9\u662f\u4e00\u79cd ",(0,r.jsx)(e.strong,{children:"\u53d8\u957f"})," \u7f16\u7801\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u82f1\u6587"}),"\uff1a\u53ea\u7528 ",(0,r.jsx)(e.strong,{children:"1\u4e2a"})," ",(0,r.jsx)(e.code,{children:"byte"})," (",(0,r.jsx)(e.code,{children:"uint8"}),")\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u4e2d\u6587"}),"\uff1a\u901a\u5e38\u7528 ",(0,r.jsx)(e.strong,{children:"3\u4e2a"})," ",(0,r.jsx)(e.code,{children:"byte"})," (",(0,r.jsx)(e.code,{children:"uint8"}),")\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6240\u4ee5\u5f53\u4f60\u5b9a\u4e49 ",(0,r.jsx)(e.code,{children:'s := "\u4e2d"'})," \u65f6\uff0c\u5185\u5b58\u91cc\u8eba\u7740\u7684\u662f 3 \u4e2a ",(0,r.jsx)(e.code,{children:"uint8"}),"\uff1a\n",(0,r.jsx)(e.code,{children:"[11100100, 10111000, 10101101]"})," (\u5341\u516d\u8fdb\u5236\uff1aE4 B8 AD)"]}),"\n",(0,r.jsxs)(e.h2,{id:"2-\u903b\u8f91\u5f62\u6001rune-unicode-int32",children:["2. \u903b\u8f91\u5f62\u6001\uff1aRune (Unicode, ",(0,r.jsx)(e.code,{children:"int32"}),")"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u662f\u4e3a\u4e86\u65b9\u4fbf\u8ba1\u7b97\u3002"})}),"\n",(0,r.jsxs)(e.p,{children:['\u5f53\u6211\u4eec\u60f3\u628a "\u4e2d" \u5f53\u4f5c ',(0,r.jsx)(e.strong,{children:"\u4e00\u4e2a\u5b57"})," \u6765\u770b\u5f85\u65f6\uff08\u6bd4\u5982\u7b97\u957f\u5ea6\u3001\u622a\u53d6\uff09\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u7edf\u4e00\u7684\u7f16\u53f7\u3002\u8fd9\u4e2a\u7f16\u53f7\u5c31\u662f ",(0,r.jsx)(e.strong,{children:"Unicode \u7801\u70b9\uff08Code Point\uff09"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728 Go \u4e2d\uff0c\u4e3a\u4e86\u88c5\u5f97\u4e0b\u5168\u4e16\u754c\u6240\u6709\u7684\u5b57\u7b26\uff08\u51e0\u5341\u4e07\u4e2a\uff09\uff0c\u4e13\u95e8\u7528\u4e86\u4e00\u4e2a\u7c7b\u578b\u53eb ",(0,r.jsx)(e.code,{children:"rune"}),"\u3002\n",(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"rune"})," \u672c\u8d28\u4e0a\u5c31\u662f ",(0,r.jsx)(e.code,{children:"int32"}),"\u3002"]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:['"\u4e2d" \u7684 Unicode \u7f16\u53f7\u662f ',(0,r.jsx)(e.code,{children:"20013"}),"\uff08\u5341\u516d\u8fdb\u5236 4E2D\uff09\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u8fd9\u6b63\u597d\u80fd\u585e\u8fdb\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"int32"})," \u91cc\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"3-\u4ee3\u7801\u5b9e\u9524\u9a8c\u8bc1",children:"3. \u4ee3\u7801\u5b9e\u9524\u9a8c\u8bc1"}),"\n",(0,r.jsx)(e.p,{children:'\u6211\u4eec\u53ef\u4ee5\u5199\u6bb5\u4ee3\u7801\uff0c\u4eb2\u773c\u770b\u770b\u8fd9"\u4e24\u5e45\u9762\u5b54"\uff1a'}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"unicode/utf8"\n)\n\nfunc main() {\n\ts := "\u4e2d"\n\n\t// --- \u89c6\u89d2 1: String (\u5e95\u5c42\u662f byte/uint8) ---\n\t// \u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u5b83\u5360\u4e86 3 \u4e2a\u5b57\u8282\n\tfmt.Printf("\u5b57\u7b26\u4e32\u957f\u5ea6 (len): %d\\n", len(s))\n\t// \u6253\u5370\u5e95\u5c42\u5b57\u8282\uff1a[228 184 173] (\u5bf9\u5e94\u5341\u516d\u8fdb\u5236 E4 B8 AD)\n\tfmt.Printf("\u5e95\u5c42\u5b57\u8282: %v\\n", []byte(s))\n\n\tfmt.Println("----------------")\n\n\t// --- \u89c6\u89d2 2: Rune (\u672c\u8d28\u662f int32) ---\n\t// \u628a\u5b83\u8f6c\u6362\u6210 rune \u5207\u7247\uff0c\u76f8\u5f53\u4e8e"\u89e3\u538b\u7f29"\u4e86\n\tr := []rune(s)\n\t// \u8fd9\u91cc\u957f\u5ea6\u5c31\u662f 1 \u4e86\n\tfmt.Printf("\u5b57\u7b26\u6570\u91cf (rune): %d\\n", len(r))\n\t// \u6253\u5370\u6570\u503c\uff1a[20013]\n\tfmt.Printf("Unicode \u6570\u503c (int32): %v\\n", r)\n\n\t// \u4e5f\u53ef\u4ee5\u7528\u6807\u51c6\u5e93\u51fd\u6570\u76f4\u63a5\u6570\n\tfmt.Printf("\u6807\u51c6\u5e93\u6570\u51fa\u6765\u7684\u5b57\u6570: %d\\n", utf8.RuneCountInString(s))\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"4-\u603b\u7ed3\u5bf9\u6bd4",children:"4. \u603b\u7ed3\u5bf9\u6bd4"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u573a\u666f"}),(0,r.jsx)(e.th,{children:"Go \u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5e95\u5c42\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:'"\u4e2d" \u7684\u6837\u5b50'}),(0,r.jsx)(e.th,{children:"\u4e3a\u4ec0\u4e48\uff1f"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u5b58\u50a8/\u7f51\u7edc\u4f20\u8f93"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"string"})}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"[]uint8"})," (byte)"]}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"[228, 184, 173]"})}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.strong,{children:"\u7701\u7a7a\u95f4"})," (UTF-8 \u53d8\u957f\u7f16\u7801)"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u5185\u5b58\u5904\u7406/\u8ba1\u6570"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"[]rune"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"[]int32"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"[20013]"})}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.strong,{children:"\u5b9a\u957f\u65b9\u4fbf"})," (\u6bcf\u4e2a\u5b57\u90fd\u662f\u72ec\u7acb\u7684 4 \u5b57\u8282)"]})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"5-range-\u904d\u5386\u7684\u79d8\u5bc6",children:"5. Range \u904d\u5386\u7684\u79d8\u5bc6"}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5728 Go \u91cc\uff0c\u5982\u679c\u4f60\u7528 ",(0,r.jsx)(e.code,{children:"range"})," \u904d\u5386\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\u7684 ",(0,r.jsx)(e.code,{children:"value"})," \u4f1a\u81ea\u52a8\u53d8\u6210 ",(0,r.jsx)(e.code,{children:"rune"})," (",(0,r.jsx)(e.code,{children:"int32"}),')\uff0c\u56e0\u4e3a Go \u77e5\u9053\u4f60\u5927\u6982\u7387\u662f\u60f3\u5904\u7406"\u5b57\u7b26"\uff0c\u800c\u4e0d\u662f\u5904\u7406"\u788e\u7247\u5b57\u8282"\u3002']}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'for i, v := range "\u4e2d" {\n    // i \u662f 0 (\u5b57\u8282\u7d22\u5f15)\n    // v \u662f 20013 (rune/int32\uff0c\u81ea\u52a8\u5e2e\u4f60\u8f6c\u597d\u4e86)\n    fmt.Printf("%d type: %T\\n", v, v)\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u76f8\u5173\u9605\u8bfb",children:"\u76f8\u5173\u9605\u8bfb"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/yiwen-blog-website/docs/backend/go/string-design",children:"\u5b57\u7b26\u4e32\u8bbe\u8ba1\u54f2\u5b66"})," - Go vs Java \u7684\u5b57\u7b26\u4e32\u8bbe\u8ba1\u5dee\u5f02"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/yiwen-blog-website/docs/backend/go/range",children:"Range \u8fed\u4ee3"})," - Go \u7684 range \u5173\u952e\u5b57\u8be6\u89e3"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/yiwen-blog-website/docs/backend/go/basic-types",children:"\u57fa\u7840\u7c7b\u578b"})," - Go \u8bed\u8a00\u57fa\u7840\u7c7b\u578b\u6982\u89c8"]}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(h,{...n})}):h(n)}}}]);